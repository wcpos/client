{"version":3,"sources":["../../common/src/components/popover/placements.ts","../../common/src/hooks/use-measure/use-measure.ts","../../common/src/components/textinput/styles.ts","../../common/src/components/textinput/textinput.tsx","../../common/src/database/plugins/utils/collections.ts","../../common/src/database/plugins/remove-children.ts","../../common/src/database/plugins/utils/generate-id.ts","../../common/src/database/plugins/woocommerce-rest-api/collection-service.ts","../../common/src/database/plugins/woocommerce-rest-api/helpers.ts","../../common/src/database/plugins/woocommerce-rest-api/sync-collection.ts","../../common/src/database/plugins/woocommerce-rest-api/document-service.ts","../../common/src/database/plugins/woocommerce-rest-api/sync-document.ts","../../common/src/database/plugins/woocommerce-rest-api/to-json.ts","../../common/src/database/plugins/woocommerce-rest-api/bulk-upsert.ts","../../common/src/database/plugins/woocommerce-rest-api/audit-ids.ts","../../common/src/database/plugins/woocommerce-rest-api/sync-plugin.ts","../../common/src/database/collections/logs/logs.ts","../../common/src/database/collections/users/users.ts","../../common/src/database/collections/sites/service.ts","../../common/src/database/collections/sites/sites.ts","../../common/src/database/collections/wp-credentials/wp-credentials.ts","../../common/src/database/collections/stores/stores.ts","../../common/src/database/collections/products/statics.ts","../../common/src/database/collections/products/products.ts","../../common/src/database/collections/product-variations/product-variations.ts","../../common/src/database/collections/orders/methods.ts","../../common/src/database/collections/orders/statics.ts","../../common/src/database/collections/utils.ts","../../common/src/database/collections/orders/orders.ts","../../common/src/database/collections/orders/postCreate.ts","../../common/src/database/collections/line-items/postCreate.ts","../../common/src/database/collections/line-items/line-items.ts","../../common/src/database/collections/line-items/statics.ts","../../common/src/database/collections/fee-lines/fee-lines.ts","../../common/src/database/collections/fee-lines/statics.ts","../../common/src/database/collections/shipping-lines/shipping-lines.ts","../../common/src/database/collections/shipping-lines/statics.ts","../../common/src/database/collections/customers/statics.ts","../../common/src/database/collections/customers/customers.ts","../../common/src/database/collections/index.ts","../../common/src/database/collections/taxes/taxes.ts","../../common/src/database/service.ts","../../common/src/components/portal/provider.tsx","../../common/src/components/portal/portal.tsx","../../common/src/components/portal/manager.tsx","../../common/src/components/portal/index.ts","../../common/src/components/text/styles.ts","../../common/src/lib/http.ts","../../common/src/components/pressable/index.ts","../../common/src/components/segment/styles.ts","../../common/src/components/segment/segment.tsx","../../common/src/components/segment/group.tsx","../../common/src/components/skeleton/skeleton.tsx","../../common/src/hooks/use-position-in-app.tsx","../../common/src/components/snackbar/styles.ts","../../common/src/components/popover/styles.ts","../../common/src/hooks/use-why-did-you-update.tsx","../../common/src/components/text/text.tsx","../../common/src/components/error-boundary/fallback.tsx","../../common/src/components/error-boundary/boundary.tsx","../../common/src/components/error-boundary/index.ts","../../common/src/components/pressable/styles.ts","../../common/src/components/pressable/pressable.tsx","../../common/src/components/skeleton/index.ts","../../common/src/components/backdrop/index.ts","../../common/src/lib/url-parse/parse-link-header.ts","../../common/src/lib/url-parse/index.ts","../../common/src/components/popover/context.tsx","../../common/src/components/popover/item.tsx","../../common/src/components/popover/popover.tsx","../../common/src/components/tag/styles.ts","../../common/src/components/tag/tag.tsx","../../common/src/components/tag/group.tsx","../../common/src/components/tag/index.ts","../../common/src/hooks/use-uncontrolled-state.ts","../../common/src/components/image/styles.ts","../../common/src/components/image/image.tsx","../../common/src/components/tooltip/styles.ts","../../common/src/components/tooltip/tooltip.tsx","../../common/src/components/backdrop/backdrop.tsx","../../common/src/components/text/skeleton.tsx","../../common/src/components/text/index.ts","../../common/src/components/snackbar/snackbar-provider.tsx","../../common/src/components/base-input/styles.ts","../../common/src/components/base-input/base-input.tsx","../../common/src/components/inline-error/styles.ts","../../common/src/components/inline-error/inline-error.tsx","../../common/src/components/base-input/base-input-container.tsx","../../common/src/hooks/use-auth-login/login-form.tsx","../../common/src/hooks/use-auth-login/auth-login-provider.tsx","../../common/src/hooks/use-auth-login/use-auth-login.ts","../../common/src/components/avatar/avatar.tsx","../../common/src/components/skeleton/styles.ts","../../common/src/components/popover/view.tsx","../../common/src/components/backdrop/styles.ts","../../common/src/components/snackbar/snackbar.tsx","../../common/src/hooks/use-timeout.ts","../../common/src/components/icon/svg/add.svg","../../common/src/components/icon/svg/add-circle.svg","../../common/src/components/icon/svg/arrow.svg","../../common/src/components/icon/svg/arrow-down.svg","../../common/src/components/icon/svg/backspace.svg","../../common/src/components/icon/svg/check.svg","../../common/src/components/icon/svg/cog.svg","../../common/src/components/icon/svg/comment.svg","../../common/src/components/icon/svg/error.svg","../../common/src/components/icon/svg/more-horiz.svg","../../common/src/components/icon/svg/more-vert.svg","../../common/src/components/icon/svg/remove.svg","../../common/src/components/icon/svg/wcpos-icon.svg","../../common/src/components/icon/svg/visibility.svg","../../common/src/components/icon/svg/visibility-off.svg","../../common/src/components/icon/svg/resize.svg","../../common/src/components/icon/svg/drag.svg","../../common/src/components/icon/svg/notifications.svg","../../common/src/components/icon/svg/circle.svg","../../common/src/components/icon/svg/chevron-right.svg","../../common/src/components/icon/svg/pending.svg","../../common/src/components/icon/svg/processing.svg","../../common/src/components/icon/svg/on-hold.svg","../../common/src/components/icon/svg/completed.svg","../../common/src/components/icon/svg/cancelled.svg","../../common/src/components/icon/svg/refunded.svg","../../common/src/components/icon/svg/failed.svg","../../common/src/components/icon/svg/add-customer.svg","../../common/src/components/icon/svg/add-circle-outline.svg","../../common/src/components/icon/svg/credit-card.svg","../../common/src/components/icon/svg/receipt.svg","../../common/src/components/icon/svg/shopping-cart.svg","../../common/src/components/icon/svg/index.ts","../../common/src/components/icon/styles.ts","../../common/src/components/icon/icon.tsx","../../common/src/components/button/styles.ts","../../common/src/components/button/button.tsx","../../common/src/components/button/index.ts","../../common/src/components/button/group.tsx","../../common/src/services/translation/translation.ts","../../common/src/components/dimmer/styles.ts","../../common/src/components/dimmer/index.ts","../../common/src/components/dimmer/dimmer.tsx","../../common/src/components/modal/view.tsx","../../common/src/components/modal/styles.ts","../../common/src/components/modal/modal.tsx","../../common/src/components/modal/index.ts","../../common/src/screens/auth/login-modal.tsx","../../common/src/screens/auth/wp-user.tsx","../../common/src/screens/auth/styles.ts","../../common/src/screens/auth/site.tsx","../../common/src/screens/auth/auth.tsx","../../common/src/screens/modal/login-form.tsx","../../common/src/screens/modal/modal.tsx","../../common/src/navigators/app.tsx","../../common/src/components/logo/logo.tsx","../../common/src/screens/splash/styles.ts","../../common/src/screens/splash/splash.tsx","../../common/src/app.tsx","index.tsx","../../common/src/components/dialog/styles.ts","../../common/src/components/dialog/header.tsx","../../common/src/components/dialog/footer.tsx","../../common/src/components/dialog/section.tsx","../../common/src/components/dialog/dialog.tsx","../../common/src/lib/platform/index.web.ts","../../common/src/themes/normalize-text.ts","../../common/src/themes/defaultTheme.ts","../../common/src/hooks/use-user/use-user.tsx","../../common/src/hooks/use-app-state/device-info.web.ts","../../common/src/hooks/use-app-state/use-last-user.ts","../../common/src/hooks/use-app-state/app-state-provider.tsx","../../common/src/hooks/use-screen-size/use-screen-size.tsx","../../common/src/hooks/use-online/use-online.tsx","../../common/src/themes/switcher.ts","../../common/src/hooks/use-app-state/use-app-state.tsx"],"names":["isTop","placement","indexOf","isBottom","isLeft","isRight","isStart","isEnd","initialMeasurements","height","pageX","pageY","width","x","y","adjustPageY","Platform","OS","window","scrollY","Box","styled","View","theme","SEGMENT_BACKGROUND_COLOR","SEGMENT_BORDER_WIDTH","focused","SEGMENT_BORDER_COLOR","SEGMENT_BORDER_RADIUS","SEGMENT_PADDING","TextInput","INPUT_FONT_SIZE","css","MeasureText","value","onMeasure","ref","React","onLayout","props","measurements","setMeasurements","handleMeasure","layout","handle","findNodeHandle","current","prevMeasurements","UIManager","measure","newMeasurements","handleLayout","e","nativeEvent","handleResize","Dimensions","addEventListener","removeEventListener","useMeasure","keyPrefix","style","position","top","alignItems","label","valueRaw","onChangeRaw","onChange","type","placeholder","helpText","disabled","error","returnKeyType","onSubmit","onClear","hideLabel","selectTextOnFocus","autoCapitalize","prefix","leftAccessory","onKeyPress","onFocusProp","onFocus","onBlurProp","onBlur","action","onAction","autosize","clearable","useUncontrolledState","inputRef","hasFocus","setHasFocus","onLabelClick","input","focus","handleClear","measuredWidth","setMeasuredWidth","blur","inputType","textContentType","keyboardType","autoCompleteType","editable","onChangeText","blurOnSubmit","onSubmitEditing","name","size","onPress","backgroundStyle","title","isFunction","borderTopLeftRadius","borderBottomLeftRadius","rxdb","prototypes","overwritable","hooks","preCreateRxCollection","model","statics","methods","collections","this","database","collection","console","log","createRxCollection","preRemove","plainData","rxDocument","a","hasChildren","pickBy","schema","jsonSchema","properties","property","promises","map","object","key","childCollection","get","Array","isArray","bulkRemove","Promise","resolve","all","catch","err","warn","RxDBGenerateIdPlugin","preInsert","data","primaryPath","randomToken","Date","now","RxDBWooCommerceRestApiSyncCollectionService","url","auth","pull","push","deletedFlag","lastPulledRevField","live","liveInterval","retryTime","syncRevisions","recieved","Subject","send","canceled","BehaviorSubject","active","initialReplicationComplete","undefined","client","endpointHash","_prepare","onDestroy","then","cancel","Object","keys","_subjects","forEach","defineProperty","asObservable","destroyed","_value","retryOnFail","isStopped","_runQueueCount","_runningPromise","next","_run","willRetry","_runCount","runPush","setTimeout","run","runPull","queryBuilder","params","httpClient","result","response","code","status","message","statusText","request","bulkUpsertFromServer","_subs","sub","unsubscribe","DEFAULT_MODIFIER","d","parsePlainData","topLevelFields","includes","camelCase","unset","metaData","meta","JSON","stringify","omitProperties","difference","length","prop","promiseWait","ms","res","syncRestApiCollection","waitForLeadership","autoStart","modifier","replicationState","multiInstance","changeEventsSub","$","subscribe","changeEvent","rev","documentData","_rev","revision","ending","substring","endsWith","wasRevisionfromPullReplication","RxDBWooCommerceRestApiSyncDocumentService","document","id","method","atomicPatch","toRestApiJSON","syncRestApiDocument","json","toJSON","populate","items","invokeMap","line_items","fee_lines","shipping_lines","snakeCaseKey","snakeCase","item","find","where","eq","exec","existing","firstExisting","shift","d1","d2","insert","auditIdsFromServer","pouch","selector","$exists","fields","docs","bulkInsert","remove","doc","intersection","localId","isSynced","dateCreated","RxDBWooCommerceRestApiSyncPlugin","RxCollection","proto","syncRestApi","RxDocument","totalRecords","totalRecords$","storageInstance","internals","pipe","debounceTime","preSave","postInsert","update","$push","options","middlewares","middleware","hook","parallel","logs","users","addSiteByUrl","cleanUrl","isString","replace","sites","site","removeSite","getSites$","sites$","switchMap","args","wcposNamespace","parseApiUrlFromHeaders","headers","link","parsed","Url","parseLinkHeader","ConnectionService","connect","wpApiUrl","_quickCheck","success","_fetchHead","_fetchWcApiUrl","protocol","head","getUrlWithoutProtocol","Error","namespaces","home","gmtOffset","timezoneString","namespace","connection","addOrUpdateWpCredentials","wpCredentialsCollection","parsedData","userlocalId","username","displayName","display_name","email","firstName","firstname","lastName","lastname","jwt","niceName","nicename","findOne","wpUser","newWpUser","atomicUpdate","oldData","wpCredentials","getWcApiUrl","getWcposApiUrl","getWpCredentials$","wpCredentials$","postCreate","connectionServiceInstance","addOrUpdateStores","storesCollection","stores","rawStore","existingStore","newStore","old","getStores$","stores$","sanitizeStoreName","store","storeDB","DatabaseService","getStoreDB","escape","text","totalSales","parseFloat","product","products","query","search","regexp","RegExp","$regex","_get","categories","$elemMatch","tags","RxQuery","_flatten","indexes","sortBy","sort","sortDirection","restApiQuery","filtered","_filter","sorted","_sortBy","exclude","_map","join","lastModified_1","orderbyMap","orderby","order","category","tag","audit","posts_per_page","isVariable","productVariations","isOpen","getLineItems$","q","lineItems$","lineItems","_orderBy","getFeeLines$","feeLines$","feeLines","getShippingLines$","shippingLines$","shippingLines","getCart$","combineLatest","cartLines","concat","addOrUpdateLineItem","parent","productId","populatedLineItems","existingProducts","$inc","quantity","variationId","price","sku","tax_class","newLineItem","removeLineItem","lineItem","$pullAll","addFeeLine","newFee","removeFeeLine","feeLine","addShippingLine","newShipping","removeShippingLine","shippingLine","removeCartLine","addCustomer","customer","customerId","billing","computedTotal$","totals$","totals","String","_sumBy","total","Number","tap","computedSubtotal$","subtotals$","subtotals","subtotal","computedTotalTax$","totalTax$","cartLine","totalTax","orderBy","createNewOrderWithProduct","timestamp","dateCreatedGmt","toISOString","split","newOrder","roundedTaxStrings","taxes","roundedTaxes","tax","round","calcInclusiveTax","rates","compoundRates","regularRates","nonCompoundPrice","_rate","rate","compound","reverse","compoundRate","regularTaxRate","sumBy","regularRate","calcExclusiveTax","preCompoundTotal","calcTaxes","priceIncludesTax","sortedRates","sumTaxes","sumItemizedTaxes","groupedTaxes","groupBy","flatten","itemized","orders","populatedLineItems$","populatedFeeLines$","populatedshippingLines$","cart$","lines","line","totalWithTax","totalTaxString","totalWithTaxString","taxLines","taxTotal","assign","country","priority","shipping","class","parentName","bulkUpsert","meta_data","upsertedItem","upsert","quantity$","price$","array","subtotalTaxes","itemizedSubTotalTaxes","totalTaxes","itemizedTotalTaxes","obj","index","findIndex","el","subtotalTax","total$","customers","$or","metaKeyMap","meta_key","userCollections","wp_credentials","storeCollections","product_variations","_createDB","createRxDatabase","ignoreDuplicate","process","storage","getRxStoragePouch","revs_limit","auto_compaction","db","dbs","set","addCollections","_createStoresDB","baseURL","axios","create","Authorization","addPouchPlugin","require","addRxPlugin","collectionsHelper","removeChildren","RxDBLocalDocumentsPlugin","RxDBValidatePlugin","RxDBQueryBuilderPlugin","RxDBUpdatePlugin","RxDBLeaderElectionPlugin","USER_DB_CREATE_PROMISE","_createUsersDB","STORE_DB_CREATE_PROMISE","getUserDB","destroy","PortalContext","components","setComponent","Provider","children","setComponents","component","prev","Portal","uniqueId","Manager","values","Text","TEXT_COLOR_SECONDARY","TEXT_COLOR_ATTENTION","TEXT_COLOR_CRITICAL","TEXT_COLOR_INFO","TEXT_COLOR_SUCCESS","TEXT_COLOR_WARNING","TEXT_COLOR_INVERSE","TEXT_COLOR","FONT_FAMILY","italic","weight","FONT_WEIGHT_BOLD","FONT_WEIGHT_LIGHT","FONT_WEIGHT","FONT_SIZE_LARGE","FONT_SIZE_SMALL","FONT_SIZE","align","uppercase","http","interceptors","use","config","btoa","password","reject","CancelToken","isCancel","Segment","group","grow","SEGMENT_MARGIN_BOTTOM","raised","select","android","default","Group","flexDirection","content","segment","count","child","timingConfig","duration","Skeleton","border","pulseColor","useSharedValue","animatedBackground","useAnimatedStyle","backgroundColor","withRepeat","withSequence","withTiming","as","Animated","LAYOUT_DEFAULT","SizeContext","AppProviderSizeProvider","setLayout","otherRef","callback","measureLayout","flex","useAppProviderDimensions","usePositionInAppProvider","providerLayout","StyleSheet","absoluteFillObject","Container","Snackbar","SNACKBAR_BACKGROUND_COLOR","SNACKBAR_RADIUS","SNACKBAR_PADDING_Y","SNACKBAR_PADDING_X","SNACKBAR_WIDTH","StyledText","SNACKBAR_TEXT_COLOR","POPOVER_Z_INDEX","Popover","POPOVER_BACKGROUND_COLOR","PressableItem","Pressable","useWhyDidYouUpdate","previousProps","allKeys","changesObj","from","to","decode","Fallback","componentStack","resetErrorBoundary","initialState","ErrorBoundary","onReset","reset","updatedWithError","setState","info","onError","prevProps","state","resetKeys","b","some","is","changedArray","onResetKeysChange","fallbackRender","FallbackComponent","fallback","DefaultFallbackComponent","Boundary","RNPressable","hasRel","rel","intoRels","acc","assignIn","createObjects","p","m","match","parseLink","linkUrl","parts","parsedUrl","parse","reduce","linkHeader","filter","PopoverContext","requestClose","Item","icon","iconColor","onSelect","onSelectRaw","useTheme","styles","hovered","MENU_ITEM_HOVER_BACKGROUND_COLOR","color","LAYOUT_ZERO","open","activator","actions","onRequestClose","hideBackdrop","matchWidth","aboveActivator","clickThrough","popoverStyle","i","useContent","activatorLayout","invisible","Tag","TAG_PADDING_Y","TAG_PADDING_X","TAG_BORDER_RADIUS","TAG_BACKGROUND_DISABLED","TAG_BACKGROUND_COLOR","Label","TAG_TEXT_COLOR","TagSkeleton","removable","onRemove","paddingRight","marginLeft","padding","TagGroup","numberOfTags","v","stateProp","useState","setStateWrapper","useCallback","newState","Image","IMAGE_BORDER_RADIUS","ImageSkeleton","src","source","loaded","setLoaded","uri","onLoad","TOAST_BACKGROUND_COLOR","TOAST_BORDER_RADIUS","TOAST_PADDING_Y","TOAST_PADDING_X","TOAST_TEXT_COLOR","isNative","Tooltip","childrenRaw","preferredPlacement","setOpen","show","hapticFeedback","impactAsync","ImpactFeedbackStyle","Light","hide","useHideAfterDelayOnNative","TouchableWithoutFeedback","TouchableNativeFeedback","TouchableOpacity","TouchableHighlight","clickProp","_","wrap","origOnPress","event","persist","onMouseEnter","onMouseLeave","timeoutRef","clearTimeout","Backdrop","opacity","animatedStyle","contentView","pointerEvents","lengthMap","short","long","SnackbarContext","SnackbarProvider","snackbarOptions","setSnackbarOptions","onDismiss","origOnDismiss","InputText","MessageContainer","LabelContainer","BaseInput","rightAccessory","showPlaceholder","InlineError","BaseInputContainer","LoginForm","onClose","setUsername","setPassword","useAppState","handleLogin","post","primaryAction","Section","AuthLoginContext","AuthLoginProvider","visible","setVisible","useAuthLogin","small","large","Avatar","PopoverView","windowWidth","windowHeight","placementOffset","usePlacementOffset","correctedPlacementOffset","useOffsetsCorrectionToBeInWindow","transform","translateY","translateX","maxWidth","maxHeight","popoverLayout","offset","insets","useSafeAreaInsets","clamp","left","right","bottom","BACKDROP_COLOR","BACKDROP_Z_INDEX","durationValues","longer","dismissable","showDuration","useEffect","durationValue","dismiss","onActionClick","useTimeout","delay","_path","_extends","target","arguments","prototype","hasOwnProperty","call","apply","xmlns","viewBox","_path2","_path3","_circle","add","addCircle","arrow","backspace","check","comment","cog","clear","close","delete","more","moreVert","note","wcpos","stroke","strokeWidth","strokeLinecap","fill","fillOpacity","settings","visibility","resize","drag","notifications","circle","cx","cy","r","chevronRight","pending","processing","completed","cancelled","refunded","failed","addCircleOutline","creditCard","receipt","shoppingCart","PressableIcon","BUTTON_BORDER_RADIUS","sizeMap","Icon","tooltip","SvgIcon","Svgs","IconComponent","toUpperCase","pressableStyle","ICON_BACKGROUND_COLOR","Background","background","pressed","BUTTON_COLOR_CRITICAL","BUTTON_COLOR_INFO","BUTTON_COLOR_SUCCESS","BUTTON_COLOR_WARNING","BUTTON_COLOR_INVERSE","BUTTON_COLOR","BUTTON_COLOR_SECONDARY","BUTTON_COLOR_ATTENTION","hairlineWidth","math","BUTTON_PADDING_Y","BUTTON_PADDING_X","alignment","GroupChild","last","BUTTONGROUP_SPACING","Button","accessoryLeft","accessoryRight","loading","onPressIn","onPressOut","onLongPress","textType","delayLongPress","childrenLength","i18nService","i18n","initReactI18next","init","lng","fallbackLng","debug","ns","defaultNS","interpolation","escapeValue","resources","en","Dimmer","zIndex","screen","RCModal","stopMaskAnim","setValue","getOpacity","animMask","timing","toValue","animationDuration","useNativeDriver","start","stop","animDialog","stopDialogAnim","animateMask","animationType","getPosition","easing","Easing","elastic","spring","scale","getScale","modalVisible","onAnimationEnd","animateDialog","maskClosable","Value","nextProps","shouldComponentUpdate","nextState","animateAppear","componentDidUpdate","animationStyleMap","none","fade","onMaskClose","_visible","ModalContainer","Modal","root","setNativeProps","paddingBottom","closable","footer","popup","transparent","bodyStyle","operation","LoginModal","user","WpUser","setLastUser","showDialog","setShowDialog","useObservableState","handleStoreSelect","handleStoreRemove","handleWpUserRemove","secondaryActions","PAGE_MAIN_PADDING_Y","PAGE_MAIN_PADDING_X","SiteWrapper","SiteTextWrapper","SiteStatusWrapper","Site","status$","active$","name$","openConfirmDialog","setOpenConfirmDialog","showConfirmDialog","hideConfirmDialog","navigation","useNavigation","wpUsers","handleRemoveSite","renderStatus","renderActiveIcon","renderWpUsers","marginRight","navigate","login","Auth","onConnect","currentSite","_site","ModalScreen","route","goBack","sectioned","MainNavigator","Stack","createStackNavigator","AppNavigator","Navigator","screenOptions","headerShown","Screen","presentation","Logo","createAnimatedComponent","Path","animate","Splash","TranslationService","App","homepage","prefixes","pathname","host","linking","screens","Main","path","POS","Products","Orders","Customers","Support","isAppStateReady","overflow","NavigationContainer","AppRegistry","registerComponent","runApplication","rootTag","getElementById","initialProps","DIALOG_BACKGROUND_COLOR","DIALOG_WIDTH","DIALOG_MIN_WIDTH","DIALOG_BORDER_RADIUS","Header","HeaderText","Footer","hideClose","Dialog","RNPlatform","isElectron","isStandalone","navigator","standalone","pixelRatio","PixelRatio","deviceHeight","deviceWidth","platform","normalize","colors","palette","primary","secondary","attention","critical","warning","inverse","grey","baseRadius","basePadding","fonts","regular","ios","APP_BACKGROUND_COLOR","BUTTON_COLOR_DISABLED","BUTTONGROUP_BORDER_COLOR","BUTTONGROUP_TEXT_COLOR","CHECKBOX_BACKGROUND_COLOR","CHECKBOX_BACKGROUND_COLOR_DISABLED","CHECKBOX_BORDER_COLOR","CHECKBOX_BORDER_RADIUS","CHECKBOX_BORDER_WIDTH","CHECKBOX_INFO_COLOR","CHECKBOX_INFO_FONT_SIZE","normalizeText","CHECKBOX_LABEL_COLOR","CHECKBOX_LABEL_FONT_SIZE","CHECKBOX_WIDTH","CHECKBOX_HEIGHT","COLOR_PRIMARY","COLOR_SECONDARY","COLOR_ATTENTION","COLOR_CRITICAL","COLOR_INFO","COLOR_SUCCESS","COLOR_WARNING","COLOR_INVERSE","COLOR_DISABLED","INPUT_BACKGROUND_COLOR","INPUT_BORDER_COLOR","INPUT_BORDER_RADIUS","INPUT_BORDER_WIDTH","INPUT_ERROR_TEXT_COLOR","INPUT_PADDING","INPUT_TEXT_COLOR","MASTERBAR_BACKGROUND_COLOR","MASTERBAR_TITLE_COLOR","MASTERBAR_TITLE_SIZE","LIST_ITEM_PADDING","LOADER_COLOR","PAGE_BACKGROUND_COLOR","PAGE_HEADER_BACKGROUND_COLOR","PAGE_HEADER_PADDING_X","PAGE_HEADER_PADDING_Y","PAGE_MAIN_BACKGROUND_COLOR","SEGMENT_GROUP_PADDING","SIDEBAR_BACKGROUND_COLOR","TOAST_Z_INDEX","userDB","pkg","APP_VERSION","version","AppStateContext","AppStateProvider","setScreen","debounce","useScreenSize","online","setOnline","NetInfo","isConnected","useOnline","setUser","getLocal","lastUser","lastUserDoc","newUserDoc","upsertLocal","useUser","defaultTheme","getTheme","_setLastUser","ready","setReady","storeID","siteID","wpUserID","lastStore","unsetLastUser","useLastUser","useContext"],"mappings":"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","file":"static/js/main.a3e1a696.chunk.js","sourcesContent":["/**\n * Determines placement of the `Popover`.\n */\nexport type PopoverPlacement =\n\t| 'top'\n\t| 'top-start'\n\t| 'top-end'\n\t| 'bottom'\n\t| 'bottom-start'\n\t| 'bottom-end'\n\t| 'left'\n\t| 'left-start'\n\t| 'left-end'\n\t| 'right'\n\t| 'right-start'\n\t| 'right-end';\n\nexport const isTop = (placement: PopoverPlacement): placement is 'top' | 'top-start' | 'top-end' =>\n\t['top', 'top-start', 'top-end'].indexOf(placement) >= 0;\n\nexport const isBottom = (\n\tplacement: PopoverPlacement\n): placement is 'bottom' | 'bottom-start' | 'bottom-end' =>\n\t['bottom', 'bottom-start', 'bottom-end'].indexOf(placement) >= 0;\n\nexport const isLeft = (\n\tplacement: PopoverPlacement\n): placement is 'left' | 'left-start' | 'left-end' =>\n\t['left', 'left-start', 'left-end'].indexOf(placement) >= 0;\n\nexport const isRight = (\n\tplacement: PopoverPlacement\n): placement is 'right' | 'right-start' | 'right-end' =>\n\t['right', 'right-start', 'right-end'].indexOf(placement) >= 0;\n\nexport const isStart = (\n\tplacement: PopoverPlacement\n): placement is 'top-start' | 'bottom-start' | 'left-start' | 'right-start' =>\n\t['top-start', 'bottom-start', 'left-start', 'right-start'].indexOf(placement) >= 0;\n\nexport const isEnd = (\n\tplacement: PopoverPlacement\n): placement is 'top-end' | 'bottom-end' | 'left-end' | 'right-end' =>\n\t['top-end', 'bottom-end', 'left-end', 'right-end'].indexOf(placement) >= 0;\n","import * as React from 'react';\nimport {\n\tDimensions,\n\tfindNodeHandle,\n\tLayoutChangeEvent,\n\tLayoutRectangle,\n\tPlatform,\n\tUIManager,\n} from 'react-native';\n\nexport interface Measurements {\n\theight: number;\n\tpageX: number;\n\tpageY: number;\n\twidth: number;\n\tx: number;\n\ty: number;\n}\n\nexport interface UseMeasureProps {\n\tonMeasure?: (props: Measurements) => void;\n\tref: React.MutableRefObject<any>;\n}\n\nexport const initialMeasurements = {\n\theight: 0,\n\tpageX: 0,\n\tpageY: 0,\n\twidth: 0,\n\tx: 0,\n\ty: 0,\n};\n\nconst adjustPageY = (pageY: number) => {\n\t// On the web, when scroll position is restored (e.g. User is scrolled down and refreshes the page)\n\t// We need to adjust pageY accordingly. Required to correct behavior of positioner\n\treturn Platform.OS === 'web' ? pageY + window.scrollY : pageY;\n};\n\n/**\n * A render prop to measure given node by passing `onLayout` and `ref` handlers.\n * This differs from `ViewMeasure` in that it does not create any node in the tree\n */\nexport const useMeasure = (props: UseMeasureProps) => {\n\tconst { onMeasure, ref } = props;\n\tconst [measurements, setMeasurements] = React.useState(initialMeasurements);\n\n\tconst handleMeasure = React.useCallback(\n\t\t(layout?: LayoutRectangle) => {\n\t\t\tconst handle = findNodeHandle(ref.current);\n\t\t\tconst prevMeasurements = measurements;\n\n\t\t\tif (handle) {\n\t\t\t\tUIManager.measure(handle, (x, y, width, height, pageX, pageY) => {\n\t\t\t\t\tconst newMeasurements = {\n\t\t\t\t\t\t...prevMeasurements,\n\t\t\t\t\t\t...layout,\n\t\t\t\t\t\tpageX,\n\t\t\t\t\t\tpageY: adjustPageY(pageY),\n\t\t\t\t\t};\n\n\t\t\t\t\tsetMeasurements(newMeasurements);\n\n\t\t\t\t\tif (onMeasure) onMeasure(newMeasurements);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[measurements, onMeasure, ref]\n\t);\n\n\tconst handleLayout = React.useCallback(\n\t\t(e: LayoutChangeEvent) => {\n\t\t\t// Use the value from here, isntead of inside UIManager.measure callback\n\t\t\t// Async behavior will nullify nativeEvent\n\t\t\tconst { layout } = e.nativeEvent;\n\t\t\thandleMeasure(layout);\n\t\t},\n\t\t[handleMeasure]\n\t);\n\n\tconst handleResize = React.useCallback(() => {\n\t\thandleMeasure();\n\t}, [handleMeasure]);\n\n\tReact.useEffect(() => {\n\t\tDimensions.addEventListener('change', handleResize);\n\n\t\treturn () => Dimensions.removeEventListener('change', handleResize);\n\t}, [handleResize, measurements]);\n\n\treturn {\n\t\tmeasurements,\n\t\tonLayout: handleLayout,\n\t\tonMeasure: handleMeasure,\n\t};\n};\n","import styled, { css } from 'styled-components/native';\nimport Platform from '@wcpos/common/src/lib/platform';\n\nexport const Box = styled.View<{ focused: boolean }>`\n\tflex-direction: row;\n\talign-items: center;\n\tbackground: ${({ theme }) => theme.SEGMENT_BACKGROUND_COLOR};\n\tborder-width: ${({ theme }) => theme.SEGMENT_BORDER_WIDTH};\n\tborder-color: ${({ theme, focused }) => (focused ? 'green' : theme.SEGMENT_BORDER_COLOR)};\n\tborder-style: solid;\n\tborder-radius: ${({ theme }) => theme.SEGMENT_BORDER_RADIUS};\n\tpadding: ${({ theme }) => theme.SEGMENT_PADDING};\n\twidth: 100%;\n`;\n\nexport const TextInput = styled.TextInput`\n\tflex: 1;\n\talign-self: center;\n\tfont-size: ${({ theme }) => theme.INPUT_FONT_SIZE};\n\tpadding: 0;\n\n\t${\n\t\tPlatform.OS !== 'ios' &&\n\t\tPlatform.OS !== 'android' &&\n\t\tcss`\n\t\t\toutline-width: 0;\n\t\t`\n\t}}\n`;\n","import * as React from 'react';\nimport {\n\tView,\n\tTextInputProps as RNTextInputProps,\n\tTextInput as RNTextInput,\n\tNativeSyntheticEvent,\n\tTextInputContentSizeChangeEventData,\n\tText as RNText,\n\tStyleProp,\n\tViewStyle,\n} from 'react-native';\nimport isFunction from 'lodash/isFunction';\nimport useUncontrolledState from '@wcpos/common/src/hooks/use-uncontrolled-state';\nimport get from 'lodash/get';\nimport useMeasure from '@wcpos/common/src/hooks/use-measure';\nimport * as Styled from './styles';\nimport Button from '../button';\nimport Text from '../text';\nimport Icon from '../icon';\nimport Portal from '../portal';\nimport { BaseInputContainer } from '../base-input';\n\nexport interface TextInputProps {\n\t/**\n\t * Label to display above the input.\n\t */\n\tlabel: string;\n\t/**\n\t * Text value in the input.\n\t */\n\tvalue?: string | null;\n\t/**\n\t * Type of the TextField.\n\t *\n\t * Will define a logical `autoCapitalize` value if not set.\n\t *\n\t * Also defines the type of keyboard displayed and the value for autocomplete/autofill properties.\n\t */\n\ttype?:\n\t\t| 'text'\n\t\t| 'email'\n\t\t| 'password'\n\t\t| 'new-password'\n\t\t| 'first-name'\n\t\t| 'last-name'\n\t\t| 'integer'\n\t\t| 'url'; // iOS only\n\t/**\n\t * Placeholder text when input is empty.\n\t */\n\tplaceholder?: string;\n\t/**\n\t * Help text shown to help the user with usage of this input.\n\t */\n\thelpText?: string;\n\t/**\n\t * Set to `true` to disable.\n\t */\n\tdisabled?: boolean;\n\t/**\n\t * Set to `true` to expand width to fit text.\n\t */\n\tautosize?: boolean;\n\t/**\n\t * Set to `true` to add icon for clearing textfield.\n\t */\n\tclearable?: boolean;\n\t/**\n\t * Error text to display _(shown in a `InlineError` component)_.\n\t *\n\t * User can also pass `true` boolean value to display the `InlineError` without any message.\n\t */\n\terror?: string | boolean;\n\t/**\n\t * Type of the return key for the software keyboard.\n\t */\n\treturnKeyType?: 'done' | 'go' | 'next' | 'search' | 'send';\n\t/**\n\t * Set to `true` to focus the field and to `false` to blur it.\n\t *\n\t * To initially focus this field when arriving on this screen, simply use\n\t *\n\t * ```tsx\n\t * <TextField focused />\n\t * ```\n\t */\n\tfocused?: boolean;\n\t/**\n\t * Set this to `true` to hide the label on top of the input. `label` property is still mandatory for accessibility purposes, even if not shown.\n\t */\n\thideLabel?: boolean;\n\t/**\n\t * Set to `true` to select all text when focused.\n\t */\n\tselectTextOnFocus?: boolean;\n\t/**\n\t * Automatically handled by `type` property. Use this to override or when using `type=\"text\"`.\n\t *\n\t * @see https://reactnative.dev/docs/textinput#autocapitalize\n\t */\n\tautoCapitalize?: RNTextInputProps['autoCapitalize'];\n\t/**\n\t * Called when the input value changes. `value` property should be changed to reflect this new value.\n\t *\n\t * If not set, component will be an uncontrolled component. @see https://reactjs.org/docs/uncontrolled-components.html\n\t */\n\tonChange?: (value: string) => void;\n\t/**\n\t * Called when focused.\n\t */\n\tonFocus?: () => void;\n\t/**\n\t * Called when blurred.\n\t */\n\tonBlur?: () => void;\n\t/**\n\t * Called when the keyboard submit to this field.\n\t */\n\tonSubmit?: () => void;\n\t// action?: string;\n\t// invalid?: boolean;\n\t// onAction?: (value: string) => void;\n\t/**\n\t * Called when the clear icon is pressed\n\t */\n\tonClear?: () => void;\n\t/**\n\t * Display a prefix label on the input.\n\t */\n\tprefix?: string;\n\t/**\n\t * Adds functionality to the TextInput, eg: buttons, tags\n\t */\n\tleftAccessory?: React.ReactNode;\n\t/**\n\t * Called when a key is pressed.\n\t */\n\tonKeyPress?: RNTextInputProps['onKeyPress'];\n\t/**\n\t * Common action button (WIP)\n\t */\n\taction?: string;\n\t/**\n\t * Called when action is pressed\n\t */\n\tonAction?: (value: string) => void;\n\t/**\n\t * Styles for the textinput container\n\t */\n\tstyle?: StyleProp<ViewStyle>;\n}\n\n/**\n * Measure Text\n */\nconst MeasureText = ({\n\tvalue,\n\tonMeasure,\n}: {\n\tvalue: string;\n\tonMeasure: ({ width }: { width: number }) => void;\n}) => {\n\tconst ref = React.useRef<RNText>(null);\n\tconst { onLayout } = useMeasure({ onMeasure, ref });\n\n\t/**\n\t * Place text in hidden portal\n\t */\n\treturn (\n\t\t<Portal keyPrefix=\"TextInputSize\">\n\t\t\t<View style={{ position: 'absolute', top: '100%', height: 0, alignItems: 'flex-start' }}>\n\t\t\t\t<RNText onLayout={onLayout} ref={ref}>\n\t\t\t\t\t{value}\n\t\t\t\t</RNText>\n\t\t\t</View>\n\t\t</Portal>\n\t);\n};\n\n/**\n * Input field that users can type into.\n */\nexport const TextInput = React.forwardRef<RNTextInput, TextInputProps>(\n\t(\n\t\t{\n\t\t\tlabel,\n\t\t\tvalue: valueRaw = '',\n\t\t\tonChange: onChangeRaw,\n\t\t\ttype = 'text',\n\t\t\tplaceholder,\n\t\t\thelpText,\n\t\t\tdisabled = false,\n\t\t\terror = false,\n\t\t\treturnKeyType = 'next',\n\t\t\tfocused = false,\n\t\t\tonSubmit,\n\t\t\tonClear,\n\t\t\thideLabel = false,\n\t\t\tselectTextOnFocus = false,\n\t\t\tautoCapitalize,\n\t\t\tprefix,\n\t\t\tleftAccessory,\n\t\t\tonKeyPress,\n\t\t\tonFocus: onFocusProp,\n\t\t\tonBlur: onBlurProp,\n\t\t\taction,\n\t\t\tonAction,\n\t\t\tautosize = false,\n\t\t\tclearable = false,\n\t\t\tstyle,\n\t\t},\n\t\tref\n\t) => {\n\t\t// @ts-ignore\n\t\tconst [value, onChange] = useUncontrolledState(valueRaw, onChangeRaw);\n\n\t\t// Register the form field in the Form\n\t\tconst inputRef = React.useRef<RNTextInput>(null);\n\t\tReact.useImperativeHandle(ref, () => inputRef.current as RNTextInput);\n\n\t\tconst [hasFocus, setHasFocus] = React.useState(focused);\n\t\tconst onFocus = React.useCallback(() => {\n\t\t\tonFocusProp?.();\n\t\t\tsetHasFocus(true);\n\t\t}, [onFocusProp]);\n\t\tconst onBlur = React.useCallback(() => {\n\t\t\tonBlurProp?.();\n\t\t\tsetHasFocus(false);\n\t\t}, [onBlurProp]);\n\t\tconst onLabelClick = React.useCallback(() => {\n\t\t\tconst input = inputRef.current;\n\n\t\t\tif (input) {\n\t\t\t\tinput.focus();\n\t\t\t}\n\t\t}, []);\n\n\t\t/**\n\t\t * clearable\n\t\t */\n\t\tconst handleClear = React.useCallback(() => {\n\t\t\treturn typeof onClear === 'function' ? onClear() : onChange('');\n\t\t}, [onChange, onClear]);\n\n\t\t/**\n\t\t * autosize\n\t\t */\n\t\tconst [measuredWidth, setMeasuredWidth] = React.useState(0);\n\t\t// const [measuredHeight, setMeasureHeight] = React.useState(0);\n\t\t// const handleContentSizeChange = (\n\t\t// \tevent: NativeSyntheticEvent<TextInputContentSizeChangeEventData>\n\t\t// ) => {\n\t\t// \tconst contentSize = get(event, 'nativeEvent.contentSize');\n\t\t// \tconsole.log(contentSize.width);\n\t\t// \t// setWidth(contentSize.width);\n\t\t// \tsetMeasureHeight(contentSize.height);\n\t\t// };\n\t\tconst handleMeasure = ({ width }: { width: number }) => {\n\t\t\tsetMeasuredWidth(width + 3);\n\t\t};\n\n\t\t/**\n\t\t * action\n\t\t */\n\t\tconst handleOnAction = () => {\n\t\t\tif (isFunction(onAction)) onAction(value);\n\t\t};\n\n\t\t/**\n\t\t * Handle focus changes\n\t\t */\n\t\tReact.useEffect(() => {\n\t\t\tconst input = inputRef.current;\n\n\t\t\tif (!input) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (focused) {\n\t\t\t\tinput.focus();\n\t\t\t} else {\n\t\t\t\tinput.blur();\n\t\t\t}\n\t\t}, [focused]);\n\n\t\t/**\n\t\t *\n\t\t */\n\t\tconst inputType = React.useMemo<\n\t\t\tPick<RNTextInputProps, 'keyboardType' | 'textContentType' | 'autoCapitalize'>\n\t\t>(() => {\n\t\t\tswitch (type) {\n\t\t\t\tcase 'text':\n\t\t\t\t\treturn { textContentType: 'none', autoCapitalize };\n\t\t\t\tcase 'email':\n\t\t\t\t\treturn {\n\t\t\t\t\t\tkeyboardType: 'email-address',\n\t\t\t\t\t\ttextContentType: 'emailAddress',\n\t\t\t\t\t\tautoCompleteType: 'email',\n\t\t\t\t\t\tautoCapitalize: 'none',\n\t\t\t\t\t};\n\t\t\t\tcase 'password':\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttextContentType: 'password',\n\t\t\t\t\t\tautoCompleteType: 'password',\n\t\t\t\t\t\tautoCapitalize: 'none',\n\t\t\t\t\t};\n\t\t\t\tcase 'new-password':\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttextContentType: 'newPassword',\n\t\t\t\t\t\tautoCompleteType: 'password',\n\t\t\t\t\t\tautoCapitalize: 'none',\n\t\t\t\t\t};\n\t\t\t\tcase 'first-name':\n\t\t\t\t\treturn { textContentType: 'name', autoCapitalize: 'words' };\n\t\t\t\tcase 'last-name':\n\t\t\t\t\treturn { textContentType: 'familyName', autoCapitalize: 'words' };\n\t\t\t\tcase 'integer':\n\t\t\t\t\treturn { textContentType: 'none', keyboardType: 'number-pad' };\n\t\t\t\tcase 'url':\n\t\t\t\t\treturn { textContentType: 'none', keyboardType: 'url' };\n\t\t\t\tdefault:\n\t\t\t\t\treturn {};\n\t\t\t}\n\t\t}, [type, autoCapitalize]);\n\n\t\treturn (\n\t\t\t<BaseInputContainer\n\t\t\t\tlabel={label}\n\t\t\t\thideLabel={hideLabel}\n\t\t\t\terror={error}\n\t\t\t\thelpText={helpText}\n\t\t\t\tonLabelClick={onLabelClick}\n\t\t\t\tdisabled={disabled}\n\t\t\t>\n\t\t\t\t<Styled.Box\n\t\t\t\t\tfocused={hasFocus}\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tstyle={style}\n\t\t\t\t>\n\t\t\t\t\t{leftAccessory || null}\n\t\t\t\t\t{prefix ? (\n\t\t\t\t\t\t<View>\n\t\t\t\t\t\t\t<Text>{prefix}</Text>\n\t\t\t\t\t\t</View>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<Styled.TextInput\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t{...inputType}\n\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\teditable={!disabled}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tonChangeText={onChange}\n\t\t\t\t\t\treturnKeyType={returnKeyType}\n\t\t\t\t\t\tblurOnSubmit={returnKeyType !== 'next'} // Prevent keyboard flicker when going from one field to another\n\t\t\t\t\t\tonFocus={onFocus}\n\t\t\t\t\t\tonBlur={onBlur}\n\t\t\t\t\t\tonSubmitEditing={onSubmit}\n\t\t\t\t\t\tselectTextOnFocus={selectTextOnFocus}\n\t\t\t\t\t\tonKeyPress={onKeyPress}\n\t\t\t\t\t\t// multiline\n\t\t\t\t\t\t// onContentSizeChange={handleContentSizeChange}\n\t\t\t\t\t\tstyle={{ width: autosize ? measuredWidth : '100%' }}\n\t\t\t\t\t/>\n\t\t\t\t\t{clearable && value !== '' && (\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tname=\"clear\"\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t// type=\"secondary\"\n\t\t\t\t\t\t\tonPress={handleClear}\n\t\t\t\t\t\t\tbackgroundStyle=\"none\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{action && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\ttitle={action}\n\t\t\t\t\t\t\tonPress={handleOnAction}\n\t\t\t\t\t\t\tstyle={{ borderTopLeftRadius: 0, borderBottomLeftRadius: 0 }}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{autosize && <MeasureText value={value} onMeasure={handleMeasure} />}\n\t\t\t\t</Styled.Box>\n\t\t\t</BaseInputContainer>\n\t\t);\n\t}\n);\n","type RxCollection = import('rxdb/plugins/core').RxCollection;\ntype RxDocument = import('rxdb/plugins/core').RxDocument;\n// type Model = import('rxdb/dist/types/types/rx-collection').RxCollectionCreatorBase;\n\nexport default {\n\tname: 'collections helper',\n\trxdb: true,\n\tprototypes: {},\n\toverwritable: {},\n\thooks: {\n\t\tpreCreateRxCollection(model: any) {\n\t\t\tif (!model.statics) model.statics = {};\n\t\t\tif (!model.methods) model.methods = {};\n\n\t\t\tmodel.statics.collections = function collections(this: RxCollection) {\n\t\t\t\treturn this.database.collections;\n\t\t\t};\n\n\t\t\tmodel.methods.collections = function collections(this: RxDocument) {\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (!this.collection.collections) {\n\t\t\t\t\tconsole.log('@TODO - why does this collection not have helper??');\n\t\t\t\t\treturn this.collection.database.collections;\n\t\t\t\t}\n\t\t\t\t// @ts-ignore\n\t\t\t\treturn this.collection.collections();\n\t\t\t};\n\n\t\t\treturn model;\n\t\t},\n\t},\n};\n","import pickBy from 'lodash/pickBy';\nimport map from 'lodash/map';\nimport get from 'lodash/get';\n\ntype RxCollection = import('rxdb/plugins/core').RxCollection;\ntype RxDocument = import('rxdb/plugins/core').RxDocument;\n\nexport default {\n\trxdb: true,\n\n\t/**\n\t * every value in this object can manipulate the prototype of the keynames class\n\t * You can manipulate every prototype in this list:\n\t * @link https://github.com/pubkey/rxdb/blob/master/src/plugin.ts#L22\n\t */\n\tprototypes: {},\n\n\t/**\n\t * some methods are static and can be overwritten in the overwriteable-object\n\t */\n\toverwritable: {},\n\n\t/**\n\t * you can add hooks to the hook-list\n\t * https://github.com/pubkey/rxdb/blob/master/src/hooks.ts\n\t */\n\thooks: {\n\t\tcreateRxCollection(collection: RxCollection) {\n\t\t\tcollection.preRemove(async function (plainData: any, rxDocument: RxDocument) {\n\t\t\t\t// check schema to see which props have children\n\t\t\t\tconst hasChildren = pickBy(\n\t\t\t\t\tcollection.schema.jsonSchema.properties,\n\t\t\t\t\t(property) => !!property.ref\n\t\t\t\t);\n\n\t\t\t\t// bulk remove all children\n\t\t\t\tconst promises = map(hasChildren, (object, key) => {\n\t\t\t\t\tconst childCollection = get(collection, `database.collections.${object.ref}`);\n\t\t\t\t\tif (Array.isArray(plainData[key]) && childCollection) {\n\t\t\t\t\t\treturn childCollection.bulkRemove(plainData[key]);\n\t\t\t\t\t}\n\t\t\t\t\treturn Promise.resolve();\n\t\t\t\t});\n\n\t\t\t\treturn Promise.all(promises).catch((err) => {\n\t\t\t\t\tconsole.warn(err);\n\t\t\t\t});\n\t\t\t}, false);\n\t\t},\n\t},\n};\n","import { RxPlugin, RxCollection } from 'rxdb/plugins/core'\nimport randomToken from 'random-token';\n\nexport function generateId(): string {\n\treturn randomToken(10) + ':' + Date.now();\n}\n\nexport const RxDBGenerateIdPlugin: RxPlugin = {\n\tname: 'generate-id',\n\trxdb: true,\n\tprototypes: {},\n\toverwritable: {},\n\thooks: {\n\t\tcreateRxCollection(collection: RxCollection) {\n\t\t\tcollection.preInsert(function (data) {\n\t\t\t\tif (!data[collection.schema.primaryPath]) {\n\t\t\t\t\tdata[collection.schema.primaryPath] = generateId();\n\t\t\t\t}\n\t\t\t}, false);\n\t\t},\n\t},\n};\n","import { BehaviorSubject, Subject, Subscription, Observable } from 'rxjs';\n\ntype RxCollection = import('rxdb/dist/types').RxCollection;\ntype RestApiSyncPullOptions = import('./types').RestApiSyncPullOptions;\ntype RestApiSyncPushOptions = import('./types').RestApiSyncPushOptions;\n\nexport class RxDBWooCommerceRestApiSyncCollectionService {\n\tconstructor(\n\t\tpublic readonly collection: RxCollection,\n\t\tpublic readonly url: string,\n\t\tpublic auth: { [k: string]: string },\n\t\tpublic readonly pull: RestApiSyncPullOptions,\n\t\tpublic readonly push: RestApiSyncPushOptions,\n\t\tpublic readonly deletedFlag: string,\n\t\tpublic readonly lastPulledRevField: string,\n\t\tpublic readonly live: boolean,\n\t\tpublic liveInterval: number,\n\t\tpublic retryTime: number,\n\t\tpublic readonly syncRevisions: boolean\n\t) {\n\t\t// this.client = GraphQLClient({\n\t\t// \turl,\n\t\t// \theaders,\n\t\t// });\n\t\tthis.client = '';\n\t\t// this.endpointHash = hash(url);\n\t\tthis.endpointHash = '';\n\t\tthis._prepare();\n\t}\n\n\tpublic client: any;\n\tpublic endpointHash: string;\n\tpublic _subjects = {\n\t\trecieved: new Subject(), // all documents that are recieved from the endpoint\n\t\tsend: new Subject(), // all documents that are send to the endpoint\n\t\terror: new Subject(), // all errors that are revieced from the endpoint, emits new Error() objects\n\t\tcanceled: new BehaviorSubject(false), // true when the replication was canceled\n\t\tactive: new BehaviorSubject(false), // true when something is running, false when not\n\t\tinitialReplicationComplete: new BehaviorSubject(false), // true the initial replication-cycle is over\n\t};\n\n\tpublic _runningPromise: Promise<void> = Promise.resolve();\n\tpublic _subs: Subscription[] = [];\n\n\tpublic _runQueueCount = 0;\n\tpublic _runCount = 0; // used in tests\n\n\tpublic initialReplicationComplete$: Observable<any> = undefined as any;\n\n\tpublic recieved$: Observable<any> = undefined as any;\n\tpublic send$: Observable<any> = undefined as any;\n\tpublic error$: Observable<any> = undefined as any;\n\tpublic canceled$: Observable<any> = undefined as any;\n\tpublic active$: Observable<boolean> = undefined as any;\n\n\t/**\n\t *\n\t */\n\t_prepare() {\n\t\t// stop sync when collection gets destroyed\n\t\tthis.collection.onDestroy.then(() => {\n\t\t\tthis.cancel();\n\t\t});\n\n\t\t// create getters for the observables\n\t\tObject.keys(this._subjects).forEach((key) => {\n\t\t\tObject.defineProperty(this, `${key}$`, {\n\t\t\t\tget() {\n\t\t\t\t\treturn this._subjects[key].asObservable();\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tisStopped(): boolean {\n\t\tif (this.collection.destroyed) {\n\t\t\treturn true;\n\t\t}\n\t\t// @ts-ignore\n\t\tif (!this.live && this._subjects.initialReplicationComplete._value) {\n\t\t\treturn true;\n\t\t}\n\t\t// @ts-ignore\n\t\tif (this._subjects.canceled._value) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t// ensures this._run() does not run in parallel\n\tasync run(retryOnFail = true): Promise<void> {\n\t\tif (this.isStopped()) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tif (this._runQueueCount > 2) {\n\t\t\treturn this._runningPromise;\n\t\t}\n\n\t\tthis._runQueueCount += 1;\n\t\tthis._runningPromise = this._runningPromise.then(async () => {\n\t\t\tthis._subjects.active.next(true);\n\t\t\tconst willRetry = await this._run(retryOnFail);\n\t\t\tthis._subjects.active.next(false);\n\t\t\t// @ts-ignore\n\t\t\tif (retryOnFail && !willRetry && this._subjects.initialReplicationComplete._value === false) {\n\t\t\t\tthis._subjects.initialReplicationComplete.next(true);\n\t\t\t}\n\t\t\tthis._runQueueCount -= 1;\n\t\t});\n\n\t\treturn this._runningPromise;\n\t}\n\n\t/**\n\t * returns true if retry must be done\n\t */\n\tasync _run(retryOnFail = true): Promise<boolean> {\n\t\tthis._runCount += 1;\n\n\t\tif (this.push) {\n\t\t\tconst ok = await this.runPush();\n\t\t\tif (!ok && retryOnFail) {\n\t\t\t\tsetTimeout(() => this.run(), this.retryTime);\n\t\t\t\t/*\n\t\t\t\t\tBecause we assume that conflicts are solved on the server side,\n\t\t\t\t\tif push failed, do not attempt to pull before push was successful\n\t\t\t\t\totherwise we do not know how to merge changes with the local state\n\t\t\t\t*/\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif (this.pull) {\n\t\t\tconst ok = await this.runPull();\n\t\t\tif (!ok && retryOnFail) {\n\t\t\t\tsetTimeout(() => this.run(), this.retryTime);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * @return true if sucessfull\n\t */\n\tasync runPull(): Promise<boolean> {\n\t\tif (this.isStopped()) {\n\t\t\treturn Promise.resolve(false);\n\t\t}\n\n\t\t// get last date_modified_gmt\n\t\t// note: getting last date_modified_gmt required an index using this method\n\t\t// const lastModified = await this.collection.findOne().sort({ dateModifiedGmt: 'desc' }).exec();\n\t\tconst params = await this.pull.queryBuilder('');\n\n\t\tlet result;\n\t\ttry {\n\t\t\tresult = await this.collection.database.httpClient.get(this.collection.name, {\n\t\t\t\tparams,\n\t\t\t});\n\t\t\t// if (result.errors) {\n\t\t\t// \tif (typeof result.errors === 'string') {\n\t\t\t// \t\tthrow new Error(result.errors);\n\t\t\t// \t} else {\n\t\t\t// \t\tconst err: any = new Error('unknown errors occured - see innerErrors for more details');\n\t\t\t// \t\terr.innerErrors = result.errors;\n\t\t\t// \t\tthrow err;\n\t\t\t// \t}\n\t\t\t// }\n\t\t} catch (err) {\n\t\t\tif (err.response) {\n\t\t\t\t// client received an error response (5xx, 4xx)\n\t\t\t\tconsole.log(err.response);\n\t\t\t\tthis._subjects.error.next({ code: err.response.status, message: err.response.statusText });\n\t\t\t} else if (err.request) {\n\t\t\t\t// client never received a response, or request never left\n\t\t\t\tconsole.log(err.request);\n\t\t\t\tthis._subjects.error.next({ message: 'Request Error' });\n\t\t\t} else {\n\t\t\t\t// anything else\n\t\t\t\tconsole.log(err);\n\t\t\t\tthis._subjects.error.next({ message: 'Unknown Error' });\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tconst { data } = result;\n\t\t// @ts-ignore\n\t\tawait this.collection.bulkUpsertFromServer(data);\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * @return true if successfull, false if not\n\t */\n\tasync runPush(): Promise<boolean> {\n\t\tconsole.log('hi');\n\t\treturn false;\n\t}\n\n\tcancel(): Promise<any> {\n\t\tif (this.isStopped()) return Promise.resolve(false);\n\t\tthis._subs.forEach((sub) => sub.unsubscribe());\n\t\tthis._subjects.canceled.next(true);\n\t\treturn Promise.resolve(true);\n\t}\n}\n","import camelCase from 'lodash/camelCase';\nimport forEach from 'lodash/forEach';\nimport get from 'lodash/get';\nimport unset from 'lodash/unset';\nimport difference from 'lodash/difference';\n\ntype RxCollection = import('rxdb').RxCollection;\n\nexport const PLUGIN_IDENT = 'woocommercerestapisync';\n\n// does nothing\nexport const DEFAULT_MODIFIER = (d: any) => Promise.resolve(d);\n\n/**\n * Parse plain data helper\n * Converts properties to camelCase and strips out any properties not in the schema\n *\n * @param plainData\n * @param collection\n */\nexport function parsePlainData(this: RxCollection, plainData: Record<string, unknown>) {\n\tconst topLevelFields = get(this, 'schema.topLevelFields');\n\n\t/**\n\t * convert all plainData properties to camelCase\n\t */\n\tforEach(plainData, (data, key) => {\n\t\tconst privateProperties = ['localId', '_attachments', '_rev'];\n\t\tif (!privateProperties.includes(key) && key.includes('_')) {\n\t\t\tplainData[camelCase(key)] = data;\n\t\t\tunset(plainData, key);\n\t\t}\n\t});\n\n\t/**\n\t * @TODO - change this to a validator \n\t * special fix for metaData values to make sure they are strings\n\t * fixes bug where WC REST API customer endpoint for returns:\n\t * {\n\t\t\t\"id\": 18,\n\t\t\t\"key\": \"community-events-location\",\n\t\t\t\"value\": {\n\t\t\t\t\"ip\": \"XXX.XXX.XXX.XXX\"\n\t\t\t}\n\t\t}\n\t\t*/\n\tif (Array.isArray(plainData.metaData)) {\n\t\tforEach(plainData.metaData, (meta) => {\n\t\t\tif (typeof meta.value === 'object' && meta.value !== null) {\n\t\t\t\tmeta.value = JSON.stringify(meta.value);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * remove any properties not in the schema\n\t */\n\tconst omitProperties = difference(Object.keys(plainData), topLevelFields);\n\tif (omitProperties.length > 0) {\n\t\tconsole.log('the following properties are being omitted', omitProperties);\n\t\tomitProperties.forEach((prop: string) => {\n\t\t\tunset(plainData, prop);\n\t\t});\n\t}\n\n\treturn plainData;\n}\n\n/**\n *\n */\nexport function promiseWait(ms = 0): Promise<void> {\n\treturn new Promise((res) => setTimeout(res, ms));\n}\n\n/**\n *\n */\nexport function wasRevisionfromPullReplication(endpointHash: string, revision: string) {\n\tconst ending = endpointHash.substring(0, 8) + PLUGIN_IDENT;\n\tconst ret = revision.endsWith(ending);\n\treturn ret;\n}\n","import { RxDBWooCommerceRestApiSyncCollectionService } from './collection-service';\nimport { DEFAULT_MODIFIER, promiseWait, wasRevisionfromPullReplication } from './helpers';\n\ntype RxCollection = import('rxdb/dist/types').RxCollection;\ntype Collection = RxCollection & { collections: () => Record<string, RxCollection> };\n\n/**\n *\n */\nexport function syncRestApiCollection(\n\tthis: Collection,\n\t{\n\t\turl,\n\t\tauth = {},\n\t\twaitForLeadership = true,\n\t\tpull,\n\t\tpush,\n\t\tdeletedFlag,\n\t\tlastPulledRevField = 'last_pulled_rev',\n\t\tlive = false,\n\t\tliveInterval = 1000 * 10, // in ms\n\t\tretryTime = 1000 * 5, // in ms\n\t\tautoStart = true, // if this is false, the replication does nothing at start\n\t\tsyncRevisions = false,\n\t}: any\n) {\n\tconst collection = this;\n\n\t// fill in defaults for pull & push\n\tif (pull) {\n\t\tif (!pull.modifier) pull.modifier = DEFAULT_MODIFIER;\n\t}\n\tif (push) {\n\t\tif (!push.modifier) push.modifier = DEFAULT_MODIFIER;\n\t}\n\n\t// ensure the collection is listening to plain-pouchdb writes\n\t//  collection.watchForChanges();\n\n\tconst replicationState = new RxDBWooCommerceRestApiSyncCollectionService(\n\t\tthis,\n\t\turl,\n\t\tauth,\n\t\tpull,\n\t\tpush,\n\t\tdeletedFlag,\n\t\tlastPulledRevField,\n\t\tlive,\n\t\tliveInterval,\n\t\tretryTime,\n\t\tsyncRevisions\n\t);\n\n\tif (!autoStart) {\n\t\treturn replicationState;\n\t}\n\n\t// run internal so .sync() does not have to be async\n\tconst waitTillRun: any =\n\t\twaitForLeadership && this.database.multiInstance // do not await leadership if not multiInstance\n\t\t\t? this.database.waitForLeadership()\n\t\t\t: promiseWait(0);\n\n\twaitTillRun.then(() => {\n\t\tif (collection.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\t// trigger run once\n\t\treplicationState.run();\n\t\tdebugger;\n\t\t// start sync-interval\n\t\tif (replicationState.live) {\n\t\t\tif (pull) {\n\t\t\t\t(async () => {\n\t\t\t\t\twhile (!replicationState.isStopped()) {\n\t\t\t\t\t\tawait promiseWait(replicationState.liveInterval);\n\t\t\t\t\t\tif (replicationState.isStopped()) return;\n\t\t\t\t\t\tawait replicationState.run(\n\t\t\t\t\t\t\t// do not retry on liveInterval-runs because they might stack up\n\t\t\t\t\t\t\t// when failing\n\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t}\n\n\t\t\tif (push) {\n\t\t\t\t/**\n\t\t\t\t * we have to use the rxdb changestream\n\t\t\t\t * because the pouchdb.changes stream sometimes\n\t\t\t\t * does not emit events or stucks\n\t\t\t\t */\n\t\t\t\tconst changeEventsSub = collection.$.subscribe((changeEvent) => {\n\t\t\t\t\tif (replicationState.isStopped()) return;\n\t\t\t\t\tconst rev = changeEvent.documentData._rev;\n\t\t\t\t\tif (rev && !wasRevisionfromPullReplication(replicationState.endpointHash, rev)) {\n\t\t\t\t\t\treplicationState.run();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treplicationState._subs.push(changeEventsSub);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn replicationState;\n}\n","import { BehaviorSubject, Subject, Subscription, Observable } from 'rxjs';\n\ntype RestApiSyncPullOptions = import('./types').RestApiSyncPullOptions;\ntype RestApiSyncPushOptions = import('./types').RestApiSyncPushOptions;\ntype Document = import('./sync-plugin').Document;\n\nexport class RxDBWooCommerceRestApiSyncDocumentService {\n\tconstructor(\n\t\tpublic readonly document: Document,\n\t\tpublic readonly url: string,\n\t\tpublic auth: { [k: string]: string },\n\t\tpublic readonly pull: RestApiSyncPullOptions,\n\t\tpublic readonly push: RestApiSyncPushOptions,\n\t\tpublic readonly deletedFlag: string,\n\t\tpublic readonly lastPulledRevField: string,\n\t\tpublic readonly live: boolean,\n\t\tpublic liveInterval: number,\n\t\tpublic retryTime: number,\n\t\tpublic readonly syncRevisions: boolean\n\t) {\n\t\t// this.client = GraphQLClient({\n\t\t// \turl,\n\t\t// \theaders,\n\t\t// });\n\t\tthis.client = '';\n\t\t// this.endpointHash = hash(url);\n\t\tthis.endpointHash = '';\n\t\tthis._prepare();\n\t}\n\n\tpublic client: any;\n\tpublic endpointHash: string;\n\tpublic _subjects = {\n\t\trecieved: new Subject(), // all documents that are recieved from the endpoint\n\t\tsend: new Subject(), // all documents that are send to the endpoint\n\t\terror: new Subject(), // all errors that are revieced from the endpoint, emits new Error() objects\n\t\tcanceled: new BehaviorSubject(false), // true when the replication was canceled\n\t\tactive: new BehaviorSubject(false), // true when something is running, false when not\n\t\tinitialReplicationComplete: new BehaviorSubject(false), // true the initial replication-cycle is over\n\t};\n\n\tpublic _runningPromise: Promise<void> = Promise.resolve();\n\tpublic _subs: Subscription[] = [];\n\n\tpublic _runQueueCount = 0;\n\tpublic _runCount = 0; // used in tests\n\n\tpublic initialReplicationComplete$: Observable<any> = undefined as any;\n\n\tpublic recieved$: Observable<any> = undefined as any;\n\tpublic send$: Observable<any> = undefined as any;\n\tpublic error$: Observable<any> = undefined as any;\n\tpublic canceled$: Observable<any> = undefined as any;\n\tpublic active$: Observable<boolean> = undefined as any;\n\n\t/**\n\t *\n\t */\n\t_prepare() {\n\t\t// stop sync when document gets deleted\n\t\t// this.document.deleted$.subscribe(state => state && this.cancel());\n\n\t\t// create getters for the observables\n\t\tObject.keys(this._subjects).forEach((key) => {\n\t\t\tObject.defineProperty(this, `${key}$`, {\n\t\t\t\tget() {\n\t\t\t\t\treturn this._subjects[key].asObservable();\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tisStopped(): boolean {\n\t\t// if (!this.live && this._subjects.initialReplicationComplete._value) return true;\n\t\t// if (this._subjects.canceled._value) return true;\n\t\treturn false;\n\t}\n\n\t// ensures this._run() does not run in parallel\n\tasync run(retryOnFail = true): Promise<boolean> {\n\t\treturn this._run(retryOnFail);\n\t}\n\n\t/**\n\t * returns true if retry must be done\n\t */\n\tasync _run(retryOnFail = true): Promise<boolean> {\n\t\t// eslint-disable-next-line no-plusplus\n\t\tthis._runCount++;\n\n\t\tif (this.push) {\n\t\t\tconst ok = await this.runPush();\n\t\t\tif (!ok && retryOnFail) {\n\t\t\t\tsetTimeout(() => this.run(), this.retryTime);\n\t\t\t\t/*\n\t\t\t\t\t\tBecause we assume that conflicts are solved on the server side,\n\t\t\t\t\t\tif push failed, do not attempt to pull before push was successful\n\t\t\t\t\t\totherwise we do not know how to merge changes with the local state\n\t\t\t\t\t*/\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif (this.pull) {\n\t\t\tconst ok = await this.runPull();\n\t\t\tif (!ok && retryOnFail) {\n\t\t\t\tsetTimeout(() => this.run(), this.retryTime);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * @return true if successfull, false if not\n\t */\n\tasync runPull(): Promise<boolean> {\n\t\tlet result;\n\t\tlet url = this.document.collection.name;\n\t\t// @ts-ignore\n\t\tif (this.document.id) {\n\t\t\t// @ts-ignore\n\t\t\turl = `${this.document.collection.name}/${this.document.id}`;\n\t\t}\n\n\t\ttry {\n\t\t\t// @ts-ignore\n\t\t\tresult = await this.document.collection.database.httpClient({\n\t\t\t\tmethod: 'get',\n\t\t\t\turl,\n\t\t\t});\n\t\t\t// if (result.errors) {\n\t\t\t// \tif (typeof result.errors === 'string') {\n\t\t\t// \t\tthrow new Error(result.errors);\n\t\t\t// \t} else {\n\t\t\t// \t\tconst err: any = new Error('unknown errors occured - see innerErrors for more details');\n\t\t\t// \t\terr.innerErrors = result.errors;\n\t\t\t// \t\tthrow err;\n\t\t\t// \t}\n\t\t\t// }\n\t\t} catch (err) {\n\t\t\tif (err.response) {\n\t\t\t\t// client received an error response (5xx, 4xx)\n\t\t\t\tconsole.log(err.response);\n\t\t\t\tthis._subjects.error.next({ code: err.response.status, message: err.response.statusText });\n\t\t\t} else if (err.request) {\n\t\t\t\t// client never received a response, or request never left\n\t\t\t\tconsole.log(err.request);\n\t\t\t\tthis._subjects.error.next({ message: 'Request Error' });\n\t\t\t} else {\n\t\t\t\t// anything else\n\t\t\t\tconsole.log(err);\n\t\t\t\tthis._subjects.error.next({ message: 'Unknown Error' });\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tconst { data } = result;\n\t\tawait this.document.atomicPatch(data);\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * @return true if successfull, false if not\n\t * @TODO construct url with document.id or link self href?\n\t */\n\tasync runPush(): Promise<boolean> {\n\t\tlet result;\n\t\tlet url = this.document.collection.name;\n\t\t// @ts-ignore\n\t\tif (this.document.id) {\n\t\t\t// @ts-ignore\n\t\t\turl = `${this.document.collection.name}/${this.document.id}`;\n\t\t}\n\n\t\ttry {\n\t\t\t// @ts-ignore\n\t\t\tresult = await this.document.collection.database.httpClient({\n\t\t\t\tmethod: 'post',\n\t\t\t\turl,\n\t\t\t\tdata: await this.document.toRestApiJSON(),\n\t\t\t});\n\t\t\t// if (result.errors) {\n\t\t\t// \tif (typeof result.errors === 'string') {\n\t\t\t// \t\tthrow new Error(result.errors);\n\t\t\t// \t} else {\n\t\t\t// \t\tconst err: any = new Error('unknown errors occured - see innerErrors for more details');\n\t\t\t// \t\terr.innerErrors = result.errors;\n\t\t\t// \t\tthrow err;\n\t\t\t// \t}\n\t\t\t// }\n\t\t} catch (err) {\n\t\t\tif (err.response) {\n\t\t\t\t// client received an error response (5xx, 4xx)\n\t\t\t\tconsole.log(err.response);\n\t\t\t\tthis._subjects.error.next({ code: err.response.status, message: err.response.statusText });\n\t\t\t} else if (err.request) {\n\t\t\t\t// client never received a response, or request never left\n\t\t\t\tconsole.log(err.request);\n\t\t\t\tthis._subjects.error.next({ message: 'Request Error' });\n\t\t\t} else {\n\t\t\t\t// anything else\n\t\t\t\tconsole.log(err);\n\t\t\t\tthis._subjects.error.next({ message: 'Unknown Error' });\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tconst { data } = result;\n\t\tawait this.document.atomicPatch(data);\n\n\t\treturn true;\n\t}\n\n\tcancel(): Promise<any> {\n\t\tif (this.isStopped()) return Promise.resolve(false);\n\t\tthis._subs.forEach((sub) => sub.unsubscribe());\n\t\tthis._subjects.canceled.next(true);\n\t\treturn Promise.resolve(true);\n\t}\n}\n","import { RxDBWooCommerceRestApiSyncDocumentService } from './document-service';\nimport { DEFAULT_MODIFIER } from './helpers';\n\ntype RxCollection = import('rxdb/dist/types').RxCollection;\ntype RxDocument = import('rxdb/dist/types').RxDocument;\ntype Document = RxDocument & {\n\ttoRestApiJSON: () => Record<string, unknown>;\n\tcollections: () => Record<string, RxCollection>;\n};\n\n/**\n *\n */\n export function syncRestApiDocument(\n\tthis: Document,\n\t{\n\t\turl,\n\t\tauth = {},\n\t\twaitForLeadership = true,\n\t\tpull,\n\t\tpush,\n\t\tdeletedFlag,\n\t\tlastPulledRevField = 'last_pulled_rev',\n\t\tlive = false,\n\t\tliveInterval = 1000 * 10, // in ms\n\t\tretryTime = 1000 * 5, // in ms\n\t\tautoStart = true, // if this is false, the replication does nothing at start\n\t\tsyncRevisions = false,\n\t}: any\n) {\n\tconst replicationState = new RxDBWooCommerceRestApiSyncDocumentService(\n\t\tthis,\n\t\turl,\n\t\tauth,\n\t\tpull,\n\t\tpush,\n\t\tdeletedFlag,\n\t\tlastPulledRevField,\n\t\tlive,\n\t\tliveInterval,\n\t\tretryTime,\n\t\tsyncRevisions\n\t);\n\n\t// if (!autoStart) return replicationState;\n\treturn replicationState;\n}","import unset from 'lodash/unset';\nimport snakeCase from 'lodash/snakeCase';\nimport forEach from 'lodash/forEach';\nimport invokeMap from 'lodash/invokeMap';\n\ntype RxCollection = import('rxdb/dist/types').RxCollection;\ntype RxDocument = import('rxdb/dist/types').RxDocument;\nexport type Document = RxDocument & {\n\ttoRestApiJSON: () => Record<string, unknown>;\n\tcollections: () => Record<string, RxCollection>;\n};\n\n/**\n *\n */\n export async function toRestApiJSON(this: Document) {\n\tconst json: Record<string, unknown> = this.toJSON();\n\n\tif (this.collection.name === 'orders') {\n\t\tjson.line_items = await this.populate('lineItems').then((items) =>\n\t\t\tPromise.all(invokeMap(items, toRestApiJSON))\n\t\t);\n\t\tjson.fee_lines = await this.populate('feeLines').then((items) =>\n\t\t\tPromise.all(invokeMap(items, toRestApiJSON))\n\t\t);\n\t\tjson.shipping_lines = await this.populate('shippingLines').then((items) =>\n\t\t\tPromise.all(invokeMap(items, toRestApiJSON))\n\t\t);\n\n\t\tunset(json, 'lineItems');\n\t\tunset(json, 'feeLines');\n\t\tunset(json, 'shippingLines');\n\t}\n\n\t// reverse camelCase for WC REST API\n\tforEach(json, (data, key) => {\n\t\tconst privateProperties = ['localId', '_attachments', '_rev'];\n\t\tconst snakeCaseKey = snakeCase(key);\n\t\tif (!privateProperties.includes(key) && key !== snakeCaseKey) {\n\t\t\tjson[snakeCaseKey] = data;\n\t\t\tunset(json, key);\n\t\t}\n\t});\n\n\treturn json;\n}","import forEach from 'lodash/forEach';\nimport map from 'lodash/map';\nimport get from 'lodash/get';\n\ntype RxCollection = import('rxdb').RxCollection;\ntype RxDocument = import('rxdb').RxDocument;\n\nexport async function bulkUpsertFromServer(this: RxCollection, data: Record<string, any>[]) {\n\tconst collection = this;\n\n\t// loop through data and match ids to local database\n\tforEach(data, async (item) => {\n\t\tif (item.id) {\n\t\t\tconst existing = (await collection.find().where('id').eq(item.id).exec()) as RxDocument[];\n\t\t\tconst firstExisting = existing.shift();\n\t\t\tif (existing.length > 0) {\n\t\t\t\tconsole.warn('This should not happen, remove extraneous records');\n\t\t\t\tcollection.bulkRemove(map(existing, 'localId'));\n\t\t\t}\n\t\t\tif (firstExisting) {\n\t\t\t\t// check local modified time\n\t\t\t\tconst d1 = new Date(get(firstExisting, 'dateModifiedGmt'));\n\t\t\t\tconst d2 = new Date(get(item, 'dateModifiedGmt'));\n\t\t\t\tif (d1 > d2) {\n\t\t\t\t\tconsole.warn('Record has local updates, TODO: merge strategy');\n\t\t\t\t} else {\n\t\t\t\t\t// upsert item\n\t\t\t\t\tfirstExisting.atomicPatch(item);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// insert new item\n\t\t\t\tcollection.insert(item);\n\t\t\t}\n\t\t}\n\t});\n}\n","import forEach from 'lodash/forEach';\nimport find from 'lodash/find';\nimport pull from 'lodash/pull';\nimport map from 'lodash/map';\n\ntype RxCollection = import('rxdb').RxCollection;\ntype RxDocument = import('rxdb').RxDocument;\n\nexport async function auditIdsFromServer(this: RxCollection, data: Record<string, any>[]) {\n\tconst collection = this;\n\n\t// @ts-ignore\n\tconst { docs } = await collection.pouch\n\t\t.find({\n\t\t\tselector: { id: { $exists: true } },\n\t\t\t// @ts-ignore\n\t\t\tfields: ['localId', 'id'],\n\t\t})\n\t\t.catch((err: any) => {\n\t\t\tconsole.log(err);\n\t\t});\n\n\t// no synced local docs\n\tif (docs.length === 0) {\n\t\treturn collection.bulkInsert(data).catch((err) => {\n\t\t\tconsole.log(err);\n\t\t});\n\t}\n\n\t//\n\tconst remove = map(docs, 'localId');\n\n\tforEach(docs, (doc) => {\n\t\tconst intersection = find(data, { id: doc.id });\n\t\tif (intersection) {\n\t\t\tpull(remove, doc.localId);\n\t\t\tpull(data, intersection);\n\t\t}\n\t});\n\n\tawait collection.bulkRemove(remove).catch((err) => {\n\t\tconsole.log(err);\n\t});\n\treturn collection.bulkInsert(data).catch((err) => {\n\t\tconsole.log(err);\n\t});\n}\n","import { BehaviorSubject } from 'rxjs';\nimport { map, debounceTime } from 'rxjs/operators';\nimport forEach from 'lodash/forEach';\nimport { syncRestApiCollection } from './sync-collection';\nimport { syncRestApiDocument } from './sync-document';\nimport { toRestApiJSON } from './to-json';\nimport { bulkUpsertFromServer } from './bulk-upsert';\nimport { auditIdsFromServer } from './audit-ids';\n\nimport { parsePlainData } from './helpers';\n\ntype RxPlugin = import('rxdb/dist/types').RxPlugin;\ntype RxCollection = import('rxdb/dist/types').RxCollection;\ntype RxDocument = import('rxdb/dist/types').RxDocument;\nexport type Document = RxDocument & {\n\ttoRestApiJSON: () => Record<string, unknown>;\n\tcollections: () => Record<string, RxCollection>;\n};\nexport type Collection = RxCollection & { collections: () => Record<string, RxCollection> };\n\n/**\n *\n */\nfunction isSynced(this: Collection) {\n\t// @ts-ignore\n\treturn !!this.dateCreated;\n}\n\n/**\n *\n */\nconst prototypes = {\n\tRxCollection: (proto: any) => {\n\t\tproto.syncRestApi = syncRestApiCollection;\n\t\tproto.bulkUpsertFromServer = bulkUpsertFromServer;\n\t\tproto.auditIdsFromServer = auditIdsFromServer;\n\t},\n\tRxDocument: (proto: any) => {\n\t\tproto.syncRestApi = syncRestApiDocument;\n\t\tproto.toRestApiJSON = toRestApiJSON;\n\t\tproto.isSynced = isSynced;\n\t},\n};\n\n/**\n *\n */\nconst hooks = {\n\tcreateRxCollection(collection: RxCollection) {\n\t\t// @ts-ignore\n\t\tcollection.totalRecords = new BehaviorSubject(0);\n\t\t// @ts-ignore\n\t\tcollection.totalRecords$ = collection.totalRecords.asObservable();\n\n\t\t/**\n\t\t * count the total records\n\t\t * */\n\t\tcollection.storageInstance.internals.pouch\n\t\t\t.find({\n\t\t\t\tselector: {},\n\t\t\t\t// @ts-ignore\n\t\t\t\tfields: ['localId', 'id', 'dateCreatedGmt'],\n\t\t\t})\n\t\t\t.then((result: any) => {\n\t\t\t\tconsole.log(collection.name, result.docs.length);\n\t\t\t\t// @ts-ignore\n\t\t\t\tcollection.totalRecords.next(result.docs.length);\n\t\t\t})\n\t\t\t.catch((err: any) => {\n\t\t\t\tconsole.log(err);\n\t\t\t});\n\n\t\t/**\n\t\t * count the total records\n\t\t * */\n\t\tconst watch = collection.$.pipe(\n\t\t\tdebounceTime(20),\n\t\t\tmap(() => {\n\t\t\t\tcollection.storageInstance.internals.pouch\n\t\t\t\t\t.find({\n\t\t\t\t\t\tselector: {},\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tfields: ['localId', 'id', 'dateCreatedGmt'],\n\t\t\t\t\t})\n\t\t\t\t\t.then((result: any) => {\n\t\t\t\t\t\tconsole.log(collection.name, result.docs.length);\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tcollection.totalRecords.next(result.docs.length);\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err: any) => {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t});\n\t\t\t})\n\t\t);\n\t\twatch.subscribe();\n\n\t\t/**\n\t\t * Parse plaindata on insert and save\n\t\t */\n\t\tcollection.preInsert(parsePlainData, false);\n\t\tcollection.preSave(parsePlainData, false);\n\n\t\t/**\n\t\t * Add _posLocalId to meta if no id\n\t\t */\n\t\tcollection.postInsert(function maybeAddMeta(\n\t\t\tthis: RxCollection,\n\t\t\tplainData: Record<string, unknown>,\n\t\t\tdocument: RxDocument\n\t\t) {\n\t\t\t// @ts-ignore\n\t\t\tif (!document.id) {\n\t\t\t\tdocument.update({\n\t\t\t\t\t$push: {\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tmetaData: { key: '_pos', value: document.localId },\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tfalse);\n\n\t\t/**\n\t\t * Allow colections to set middleware-hooks via config options\n\t\t * needs to allow for promises\n\t\t */\n\t\tforEach(collection.options.middlewares, (middleware, hook) => {\n\t\t\tconst { handle, parallel } = middleware;\n\t\t\t// @ts-ignore\n\t\t\tcollection[hook](handle, parallel);\n\t\t});\n\n\t\treturn collection;\n\t},\n};\n\nexport const RxDBWooCommerceRestApiSyncPlugin: RxPlugin = {\n\tname: 'woocommerce-rest-api-sync',\n\trxdb: true,\n\tprototypes,\n\thooks,\n};\n","import schema from './schema.json';\n\nexport type LogSchema = import('./interface').LogSchema;\nexport type LogDocument = import('rxdb').RxDocument<LogSchema, LogMethods>;\nexport type LogCollection = import('rxdb').RxCollection<LogDocument, LogMethods, LogStatics>;\ntype LogMethods = Record<string, never>;\ntype LogStatics = Record<string, never>;\n\nexport const logs = {\n\tschema,\n\t// pouchSettings: {},\n\t// statics: {},\n\t// methods: {},\n\t// attachments: {},\n\t// options: {},\n\t// migrationStrategies: {},\n\t// autoMigrate: true,\n\t// cacheReplacementPolicy() {},\n};\n","import { Observable } from 'rxjs';\nimport { switchMap, map } from 'rxjs/operators';\nimport isString from 'lodash/isString';\nimport get from 'lodash/get';\nimport pull from 'lodash/pull';\nimport schema from './schema.json';\n\nexport type UserSchema = import('./interface').UserSchema;\nexport type UserDocument = import('rxdb').RxDocument<UserSchema, UserMethods>;\nexport type UserCollection = import('rxdb').RxCollection<UserDocument, UserMethods, UserStatics>;\ntype UserStatics = Record<string, never>;\n\ntype SiteCollection = import('../sites').SiteCollection;\ntype SiteDocument = import('../sites').SiteDocument;\n\ninterface UserMethods {\n\taddSiteByUrl: (url: string) => Promise<void>;\n\tremoveSite: (site: SiteDocument) => Promise<void>;\n\tgetSites$: () => Observable<SiteDocument[]>;\n}\n\nconst methods: UserMethods = {\n\t/**\n\t *\n\t */\n\tasync addSiteByUrl(this: UserDocument, url) {\n\t\tconst cleanUrl = isString(url) && url.replace(/^.*:\\/{2,}|\\s|\\/+$/g, '');\n\t\tif (!cleanUrl) return;\n\n\t\tconst site = await this.collections().sites.insert({ url: cleanUrl });\n\t\tawait this.update({ $push: { sites: site.localId } }).catch((err) => {\n\t\t\tconsole.log(err);\n\t\t\treturn err;\n\t\t});\n\t},\n\n\t/**\n\t *\n\t */\n\tasync removeSite(this: UserDocument, site: SiteDocument) {\n\t\tawait site.remove();\n\t\tawait this.atomicPatch({\n\t\t\tsites: pull(this.sites as any[], site.localId),\n\t\t});\n\t},\n\n\t/**\n\t *\n\t */\n\tgetSites$(this: UserDocument) {\n\t\treturn this.sites$.pipe(\n\t\t\tswitchMap(async (args: any) => {\n\t\t\t\tconst sites = await this.populate('sites');\n\t\t\t\treturn sites || [];\n\t\t\t})\n\t\t);\n\t},\n};\n\nexport const users = {\n\tschema,\n\t// pouchSettings: {},\n\t// statics: {},\n\tmethods,\n\t// attachments: {},\n\t// options: {},\n\t// migrationStrategies: {},\n\t// autoMigrate: true,\n\t// cacheReplacementPolicy() {},\n};\n","import { BehaviorSubject, Subject, Subscription, Observable } from 'rxjs';\nimport httpClient from '@wcpos/common/src/lib/http';\nimport Url from '@wcpos/common/src/lib/url-parse';\nimport Platform from '@wcpos/common/src/lib/platform';\n\ntype SiteDocument = import('./sites').SiteDocument;\ninterface Status {\n\ttype: 'pending' | 'error' | 'complete';\n\tmessage: string;\n}\n\nconst wcNamespace = 'wc/v3';\nconst wcposNamespace = 'wcpos/v1';\n\nconst parseApiUrlFromHeaders = (headers: { link: string }) => {\n\tconst link = headers?.link;\n\t// @ts-ignore\n\tconst parsed = Url.parseLinkHeader(link);\n\treturn parsed?.['https://api.w.org/']?.url;\n};\n\nexport class ConnectionService {\n\tconstructor(public readonly site: SiteDocument) {\n\t\tthis.client = httpClient;\n\n\t\tthis._prepare();\n\t\tthis.connect();\n\t}\n\n\tpublic client;\n\tpublic _subjects = {\n\t\tstatus: new BehaviorSubject<null | Status>(null), // connection status\n\t\tactive: new BehaviorSubject(false), // true when something is running, false when not\n\t};\n\n\tpublic _runningPromise: Promise<void> = Promise.resolve();\n\tpublic _subs: Subscription[] = [];\n\n\tpublic status$: Observable<null | Status> = undefined as any;\n\tpublic active$: Observable<boolean> = undefined as any;\n\n\t/**\n\t * things that are more complex to not belong into the constructor\n\t */\n\t_prepare() {\n\t\t// create getters for the observables\n\t\tObject.keys(this._subjects).forEach((key) => {\n\t\t\tObject.defineProperty(this, `${key}$`, {\n\t\t\t\tget() {\n\t\t\t\t\treturn this._subjects[key].asObservable();\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * things that are more complex to not belong into the constructor\n\t */\n\tasync connect(): Promise<any> {\n\t\tthis._subjects.status.next({ type: 'pending', message: 'Connecting...' });\n\n\t\tif (this.site.wpApiUrl) {\n\t\t\treturn this._quickCheck()\n\t\t\t\t.then((success) => {\n\t\t\t\t\tif (success) {\n\t\t\t\t\t\tthis._subjects.status.next({ type: 'complete', message: 'Connected' });\n\t\t\t\t\t\tthis._subjects.active.next(true);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tthis._subjects.status.next({ type: 'error', message: err.message });\n\t\t\t\t});\n\t\t}\n\n\t\treturn this._fetchHead()\n\t\t\t.then((status) => {\n\t\t\t\treturn this._fetchWcApiUrl();\n\t\t\t})\n\t\t\t.then((success) => {\n\t\t\t\tif (success) {\n\t\t\t\t\tthis._subjects.status.next({ type: 'complete', message: 'Connected' });\n\t\t\t\t\tthis._subjects.active.next(true);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t\tthis._subjects.status.next({ type: 'error', message: err.message });\n\t\t\t});\n\t}\n\n\t/**\n\t * Fetch WordPress API URL\n\t * @param url WordPress URL\n\t */\n\tasync _fetchHead(): Promise<any> {\n\t\tlet protocol = 'https';\n\t\tif (Platform.OS === 'web' && process.env.NODE_ENV === 'development') {\n\t\t\tprotocol = 'http';\n\t\t}\n\t\treturn this.client\n\t\t\t.head(`${protocol}://${this.site.getUrlWithoutProtocol()}`)\n\t\t\t.then((response) => {\n\t\t\t\tconst wpApiUrl = parseApiUrlFromHeaders(response.headers);\n\t\t\t\tif (wpApiUrl) {\n\t\t\t\t\tthis._subjects.status.next({ type: 'pending', message: 'WordPress website found' });\n\t\t\t\t\treturn this.site.atomicPatch({ wpApiUrl });\n\t\t\t\t}\n\t\t\t\tthrow Error('Site does not seem to be a WordPress site');\n\t\t\t});\n\t}\n\n\t/**\n\t * Fetch WooCommerce API URL\n\t * @param url WordPress API URL\n\t */\n\tasync _fetchWcApiUrl(): Promise<any> {\n\t\treturn (\n\t\t\tthis.site.wpApiUrl &&\n\t\t\tthis.client.get(this.site.wpApiUrl).then((response) => {\n\t\t\t\tconst namespaces: string[] = response?.data?.namespaces || [];\n\t\t\t\tif (!namespaces.includes(wcNamespace)) {\n\t\t\t\t\tthrow Error('WooCommerce API not found');\n\t\t\t\t} else if (!namespaces.includes(wcposNamespace)) {\n\t\t\t\t\tthrow Error('WooCommerce POS API not found');\n\t\t\t\t}\n\n\t\t\t\treturn this.site.atomicPatch({\n\t\t\t\t\tname: response.data.name,\n\t\t\t\t\turl: response.data.url,\n\t\t\t\t\thome: response.data.home,\n\t\t\t\t\tgmtOffset: response.data.gmtOffset,\n\t\t\t\t\ttimezoneString: response.data.timezoneString,\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\t}\n\n\t/**\n\t * Fetch WooCommerce API URL\n\t * @param url WordPress API URL\n\t */\n\tasync _quickCheck(): Promise<any> {\n\t\treturn this.client.get(this.site.wpApiUrl + wcposNamespace).then((response) => {\n\t\t\tif (response.status !== 200 || response.data.namespace !== wcposNamespace) {\n\t\t\t\tthrow Error('WooCommerce POS API not found');\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t}\n}\n","import { switchMap } from 'rxjs/operators';\nimport get from 'lodash/get';\nimport schema from './schema.json';\nimport { ConnectionService } from './service';\n\nexport type SiteSchema = import('./interface').SiteSchema;\nexport type SiteDocument = import('rxdb').RxDocument<\n\tSiteSchema,\n\tSiteMethods & { connection: ConnectionService }\n>;\nexport type SiteCollection = import('rxdb').RxCollection<\n\tSiteDocument,\n\tSiteMethods & { connection: ConnectionService },\n\tSiteStatics\n>;\ntype SiteStatics = Record<string, unknown>;\ntype WPCredentialsCollection = import('../wp-credentials').WPCredentialsCollection;\ntype WPCredentialsDocument = import('../wp-credentials').WPCredentialsDocument;\ntype WPCredentialsDocumentsObservable = import('rxjs').Observable<WPCredentialsDocument[]>;\n\ninterface SiteMethods {\n\tgetUrlWithoutProtocol: () => string;\n\tconnect: () => Promise<any>;\n\taddOrUpdateWpCredentials: (data: Record<string, unknown>) => Promise<WPCredentialsDocument>;\n\tgetWcApiUrl: () => string;\n\tgetWcposApiUrl: () => string;\n\tgetWpCredentials$: () => WPCredentialsDocumentsObservable;\n}\n\nconst methods: SiteMethods = {\n\t/**\n\t *\n\t */\n\tgetUrlWithoutProtocol(this: SiteDocument) {\n\t\treturn this?.url?.replace(/^.*:\\/{2,}|\\s|\\/+$/g, '') || '';\n\t},\n\n\t/**\n\t *\n\t */\n\tasync connect(this: SiteDocument) {\n\t\tawait this.connection.connect();\n\t},\n\n\t/**\n\t *\n\t */\n\tasync addOrUpdateWpCredentials(this: SiteDocument, data) {\n\t\tconst wpCredentialsCollection: WPCredentialsCollection = get(\n\t\t\tthis,\n\t\t\t'collection.database.collections.wp_credentials'\n\t\t);\n\n\t\tconst parsedData = {\n\t\t\tid: data.userlocalId,\n\t\t\tusername: data.username,\n\t\t\tdisplayName: data.display_name,\n\t\t\temail: data.email,\n\t\t\tfirstName: data.firstname,\n\t\t\tlastName: data.lastname,\n\t\t\tjwt: data.jwt,\n\t\t\tniceName: data.nicename,\n\t\t};\n\n\t\ttry {\n\t\t\tconst wpUser = await wpCredentialsCollection\n\t\t\t\t.findOne({\n\t\t\t\t\tselector: { id: data.userlocalId },\n\t\t\t\t})\n\t\t\t\t.exec();\n\n\t\t\tif (wpUser) {\n\t\t\t\t// @ts-ignore\n\t\t\t\treturn wpUser.atomicPatch(parsedData);\n\t\t\t}\n\t\t\t// @ts-ignore\n\t\t\tconst newWpUser = await wpCredentialsCollection.insert(parsedData);\n\t\t\tawait this.atomicUpdate((oldData) => {\n\t\t\t\toldData.wpCredentials = oldData.wpCredentials || [];\n\t\t\t\t// @ts-ignore\n\t\t\t\toldData.wpCredentials.push(newWpUser.localId);\n\t\t\t\treturn oldData;\n\t\t\t});\n\n\t\t\treturn newWpUser;\n\t\t} catch (error) {\n\t\t\tthrow Error(error);\n\t\t}\n\t},\n\n\t/**\n\t *\n\t */\n\tgetWcApiUrl(this: SiteDocument) {\n\t\treturn `${this.wpApiUrl}wc/v3`;\n\t},\n\n\t/**\n\t *\n\t */\n\tgetWcposApiUrl(this: SiteDocument) {\n\t\treturn `${this.wpApiUrl}wcpos/v1`;\n\t},\n\n\t/**\n\t *\n\t */\n\tgetWpCredentials$(this: SiteDocument) {\n\t\treturn this.wpCredentials$.pipe(\n\t\t\tswitchMap(async () => {\n\t\t\t\tconst wpCredentials = await this.populate('wpCredentials');\n\t\t\t\treturn wpCredentials || [];\n\t\t\t})\n\t\t);\n\t},\n};\n\n/**\n *\n */\nfunction postCreate(this: SiteCollection, plainData: any, rxDocument: SiteDocument) {\n\tconst connectionServiceInstance = new ConnectionService(rxDocument);\n\tObject.defineProperty(rxDocument, 'connection', {\n\t\tget: () => connectionServiceInstance,\n\t});\n}\n\nexport const sites = {\n\tschema,\n\t// pouchSettings: {},\n\t// statics: {},\n\tmethods,\n\t// attachments: {},\n\toptions: {\n\t\tmiddlewares: {\n\t\t\tpostCreate: {\n\t\t\t\thandle: postCreate,\n\t\t\t\tparallel: false,\n\t\t\t},\n\t\t},\n\t},\n\t// migrationStrategies: {},\n\t// autoMigrate: true,\n\t// cacheReplacementPolicy() {},\n};\n","import { Observable } from 'rxjs';\nimport { switchMap, map } from 'rxjs/operators';\nimport get from 'lodash/get';\nimport forEach from 'lodash/forEach';\nimport remove from 'lodash/remove';\nimport schema from './schema.json';\n\ntype StoreCollection = import('../stores').StoreCollection;\ntype StoreDocument = import('../stores').StoreDocument;\n\nexport type WPCredentialsSchema = import('./interface').WPCredentialsSchema;\nexport type WPCredentialsDocument = import('rxdb').RxDocument<\n\tWPCredentialsSchema,\n\tWPCredentialsMethods\n>;\nexport type WPCredentialsCollection = import('rxdb').RxCollection<\n\tWPCredentialsDocument,\n\tWPCredentialsMethods,\n\tWPCredentialsStatics\n>;\ntype WPCredentialsStatics = Record<string, never>;\n\ninterface WPCredentialsMethods {\n\taddOrUpdateStores: (data: any[]) => Promise<void>;\n\tgetStores$: () => Observable<StoreDocument[]>;\n}\n\n/**\n *\n */\nexport const methods: WPCredentialsMethods = {\n\t/**\n\t *\n\t */\n\tasync addOrUpdateStores(this: WPCredentialsDocument, data: any[]) {\n\t\tconst storesCollection: StoreCollection = get(this, 'collection.database.collections.stores');\n\t\tconst stores = await this.populate('stores');\n\n\t\tforEach(data, async (rawStore) => {\n\t\t\tconst existingStore = remove(stores, { id: rawStore.id });\n\n\t\t\tif (existingStore.length > 1) {\n\t\t\t\tconsole.log('this should not happen');\n\t\t\t\tdebugger;\n\t\t\t} else if (existingStore.length === 1) {\n\t\t\t\t// update existing store\n\t\t\t\t// @ts-ignore\n\t\t\t\tawait existingStore[0].atomicPatch(rawStore);\n\t\t\t} else {\n\t\t\t\t// create new store\n\t\t\t\tconst newStore = await storesCollection.insert(rawStore);\n\t\t\t\tawait this.atomicUpdate((old: any) => {\n\t\t\t\t\told.stores = old.stores || [];\n\t\t\t\t\told.stores?.push(newStore.localId);\n\t\t\t\t\treturn old;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (Array.isArray(stores) && stores.length > 0) {\n\t\t\t\tconsole.log('these stores need to be removed');\n\t\t\t\tdebugger;\n\t\t\t}\n\t\t});\n\t},\n\n\t/**\n\t *\n\t */\n\tgetStores$(this: WPCredentialsDocument) {\n\t\treturn this.stores$.pipe(\n\t\t\tswitchMap(async (args: any) => {\n\t\t\t\tconst stores = await this.populate('stores');\n\t\t\t\treturn stores || [];\n\t\t\t})\n\t\t);\n\t},\n};\n\nexport const wpCredentials = {\n\tschema,\n\t// pouchSettings: {},\n\t// statics,\n\tmethods,\n\t// attachments: {},\n\t// options: {},\n\t// migrationStrategies: {},\n\t// autoMigrate: true,\n\t// cacheReplacementPolicy() {},\n};\n","import schema from './schema.json';\nimport DatabaseService from '../../index';\n\nexport type StoreSchema = import('./interface').WCPOSStoreSchema;\nexport type StoreDocument = import('rxdb').RxDocument<StoreSchema, StoreMethods>;\nexport type StoreCollection = import('rxdb').RxCollection<\n\tStoreDocument,\n\tStoreMethods,\n\tStoreStatics\n>;\ntype StoreMethods = Record<string, never>;\ntype StoreStatics = Record<string, never>;\n\nfunction sanitizeStoreName(id: string) {\n\treturn `store_${id.replace(':', '_')}`;\n}\n\n/**\n *\n */\nasync function preRemove(this: StoreCollection, plainData: any, store: StoreDocument) {\n\t// @ts-ignore\n\tconst storeDB = DatabaseService.getStoreDB(sanitizeStoreName(plainData.localId));\n\t// @ts-ignore\n\treturn storeDB.remove();\n}\n\nexport const stores = {\n\tschema,\n\t// pouchSettings: {},\n\t// statics: {},\n\t// methods: {},\n\t// attachments: {},\n\toptions: {\n\t\tmiddlewares: {\n\t\t\tpreRemove: {\n\t\t\t\thandle: preRemove,\n\t\t\t\tparallel: false,\n\t\t\t},\n\t\t},\n\t},\n\t// migrationStrategies: {},\n\t// autoMigrate: true,\n\t// cacheReplacementPolicy() {},\n};\n","import _filter from 'lodash/filter';\nimport _sortBy from 'lodash/sortBy';\nimport _map from 'lodash/map';\nimport _get from 'lodash/get';\nimport _flatten from 'lodash/flatten';\n\ntype ProductCollection = import('.').ProductCollection;\ntype QueryState =\n\timport('@wcpos/common/src/hooks/use-data-observable/use-data-observable').QueryState;\n\nconst escape = (text: string) => text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n\n/**\n * WooCommerce Order Collection statics\n */\nexport default {\n\t/**\n\t *\n\t */\n\tquery(this: ProductCollection, query: QueryState) {\n\t\tconst selector = {};\n\t\tif (query.search) {\n\t\t\tconst regexp = new RegExp(escape(query.search), 'i');\n\t\t\t// @ts-ignore\n\t\t\tselector.name = { $regex: regexp };\n\t\t}\n\t\tif (_get(query, 'filters.category')) {\n\t\t\t// @ts-ignore\n\t\t\tselector.categories = { $elemMatch: { id: _get(query, 'filters.category.id') } };\n\t\t}\n\t\tif (_get(query, 'filters.tag')) {\n\t\t\t// @ts-ignore\n\t\t\tselector.tags = { $elemMatch: { id: _get(query, 'filters.tag.id') } };\n\t\t}\n\n\t\tconst RxQuery = this.find({ selector });\n\t\tconst indexes = _flatten(this.schema.indexes);\n\t\tif (indexes.includes(query.sortBy)) {\n\t\t\tconst sortedRxQuery = RxQuery.sort({ [query.sortBy]: query.sortDirection });\n\t\t\treturn sortedRxQuery;\n\t\t}\n\t\treturn RxQuery;\n\t},\n\n\t/**\n\t *\n\t */\n\tasync restApiQuery(this: ProductCollection, query: QueryState) {\n\t\ttry {\n\t\t\tconst result = await this.storageInstance.internals.pouch.find({\n\t\t\t\tselector: {},\n\t\t\t\t// @ts-ignore\n\t\t\t\tfields: ['localId', 'id', 'dateCreatedGmt'],\n\t\t\t});\n\t\t\t// get array of sorted records with dateCreatedGmt\n\t\t\tconst filtered = _filter(result.docs, 'dateCreatedGmt');\n\t\t\tconst sorted = _sortBy(filtered, 'dateCreatedGmt');\n\t\t\tconst exclude = _map(sorted, 'id').join(',');\n\n\t\t\t// @ts-ignore\n\t\t\tconst replicationState = this.syncRestApi({\n\t\t\t\tlive: false,\n\t\t\t\tautoStart: false,\n\t\t\t\tpull: {\n\t\t\t\t\tqueryBuilder: (lastModified_1: any) => {\n\t\t\t\t\t\tconst orderbyMap = {\n\t\t\t\t\t\t\tname: 'title',\n\t\t\t\t\t\t\tdateCreated: 'date',\n\t\t\t\t\t\t};\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tconst orderby = orderbyMap[query.sortBy] ? orderbyMap[query.sortBy] : query.sortBy;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tsearch: escape(query.search),\n\t\t\t\t\t\t\torder: query.sortDirection,\n\t\t\t\t\t\t\torderby,\n\t\t\t\t\t\t\texclude,\n\t\t\t\t\t\t\tcategory: _get(query, 'filters.category.id'),\n\t\t\t\t\t\t\ttag: _get(query, 'filters.tag.id'),\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treplicationState.run(false);\n\t\t\treturn replicationState;\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\treturn err;\n\t\t}\n\t},\n\n\t/**\n\t *\n\t */\n\taudit(this: ProductCollection) {\n\t\treturn this.database.httpClient\n\t\t\t.get('products', {\n\t\t\t\tparams: { fields: ['id', 'name'], posts_per_page: -1 },\n\t\t\t})\n\t\t\t.then(({ data }: any) => {\n\t\t\t\t// @ts-ignore\n\t\t\t\treturn this.auditIdsFromServer(data);\n\t\t\t});\n\t},\n};\n","import schema from './schema.json';\nimport statics from './statics';\n\nexport type ProductSchema = import('./interface').WooCommerceProductSchema;\nexport type ProductDocument = import('rxdb').RxDocument<ProductSchema, ProductMethods>;\nexport type ProductCollection = import('rxdb').RxCollection<\n\tProductDocument,\n\tProductMethods,\n\tProductStatics\n>;\n\ninterface ProductMethods {\n\tisVariable: (this: ProductDocument) => boolean;\n\t// isSynced: (this: ProductDocument) => boolean;\n}\n\ntype ProductStatics = Record<string, never>;\n\n/**\n *\n */\nexport const methods: ProductMethods = {\n\t/**\n\t *\n\t */\n\tisVariable(this) {\n\t\treturn this.type === 'variable';\n\t},\n\t/**\n\t *\n\t */\n\t// isSynced(this) {\n\t// \treturn !!this.dateModifiedGmt;\n\t// },\n};\n\n/**\n *\n */\nasync function preInsert(this: ProductCollection, plainData: Record<string, any>) {\n\t// totalSales is meant to be interger, but comes as string\n\tconst { totalSales } = plainData;\n\tif (totalSales) {\n\t\tplainData.totalSales = parseFloat(totalSales);\n\t}\n\n\treturn plainData;\n}\n\n/**\n *\n */\nasync function preSave(\n\tthis: ProductCollection,\n\tplainData: Record<string, any>,\n\tproduct: ProductDocument\n) {\n\t// totalSales is meant to be interger, but comes as string\n\tconst { totalSales } = plainData;\n\tif (totalSales) {\n\t\tplainData.totalSales = parseFloat(totalSales);\n\t}\n\n\treturn plainData;\n}\n\nexport const products = {\n\tschema,\n\t// pouchSettings: {},\n\tstatics,\n\tmethods,\n\t// attachments: {},\n\toptions: {\n\t\tmiddlewares: {\n\t\t\tpreInsert: {\n\t\t\t\thandle: preInsert,\n\t\t\t\tparallel: false,\n\t\t\t},\n\t\t\tpreSave: {\n\t\t\t\thandle: preSave,\n\t\t\t\tparallel: false,\n\t\t\t},\n\t\t},\n\t},\n\t// migrationStrategies: {},\n\t// autoMigrate: true,\n\t// cacheReplacementPolicy() {},\n};\n","import schema from './schema.json';\n\nexport type ProductVariationSchema = import('./interface').WooCommerceProductVariationSchema;\nexport type ProductVariationDocument = import('rxdb').RxDocument<\n\tProductVariationSchema,\n\tProductVariationMethods\n>;\nexport type ProductVariationCollection = import('rxdb').RxCollection<\n\tProductVariationDocument,\n\tProductVariationMethods,\n\tProductVariationStatics\n>;\ntype ProductVariationMethods = Record<string, never>;\ntype ProductVariationStatics = Record<string, never>;\n\nexport const productVariations = {\n\tschema,\n\t// pouchSettings: {},\n\t// statics: {},\n\t// methods: {},\n\t// attachments: {},\n\t// options: {},\n\t// migrationStrategies: {},\n\t// autoMigrate: true,\n\t// cacheReplacementPolicy() {},\n};\n","import { from, of, combineLatest, Observable } from 'rxjs';\nimport { switchMap, tap, catchError, map, debounceTime } from 'rxjs/operators';\nimport _orderBy from 'lodash/orderBy';\nimport _filter from 'lodash/filter';\nimport _sumBy from 'lodash/sumBy';\nimport _map from 'lodash/map';\n\ntype OrderDocument = import('./orders').OrderDocument;\ntype OrderCollection = import('./orders').OrderCollection;\ntype ProductDocument = import('../products/products').ProductDocument;\ntype LineItemDocument = import('../line-items').LineItemDocument;\ntype LineItemCollection = import('../line-items').LineItemCollection;\ntype FeeLineDocument = import('../fee-lines').FeeLineDocument;\ntype FeeLineCollection = import('../fee-lines').FeeLineCollection;\ntype ShippingLineDocument = import('../shipping-lines').ShippingLineDocument;\ntype ShippingLineCollection = import('../shipping-lines').ShippingLineCollection;\ntype ProductVariationDocument = import('../product-variations').ProductVariationDocument;\ntype CustomerDocument = import('../customers').CustomerDocument;\ntype CartLine = Array<LineItemDocument | FeeLineDocument | ShippingLineDocument>;\ntype CartLines = Array<LineItemDocument | FeeLineDocument | ShippingLineDocument>;\n\n/**\n * WooCommerce Order Model methods\n */\nexport default {\n\t/**\n\t *\n\t */\n\tisOpen(this: OrderDocument) {\n\t\treturn this.status === 'pending';\n\t},\n\n\t/**\n\t *\n\t */\n\tgetLineItems$(\n\t\tthis: OrderDocument,\n\t\tq?: { sortBy: string; sortDirection: 'asc' | 'desc' }\n\t): Observable<LineItemDocument[]> {\n\t\treturn this.lineItems$.pipe(\n\t\t\tswitchMap(async () => {\n\t\t\t\tconst lineItems = await this.populate('lineItems');\n\t\t\t\tif (!lineItems) {\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t\treturn q ? _orderBy(lineItems, q.sortBy, q.sortDirection) : lineItems;\n\t\t\t})\n\t\t);\n\t},\n\n\t/**\n\t *\n\t */\n\tgetFeeLines$(\n\t\tthis: OrderDocument,\n\t\tq?: { sortBy: string; sortDirection: 'asc' | 'desc' }\n\t): Observable<FeeLineDocument[]> {\n\t\treturn this.feeLines$.pipe(\n\t\t\tswitchMap(async () => {\n\t\t\t\tconst feeLines = await this.populate('feeLines');\n\t\t\t\tif (!feeLines) {\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t\treturn q ? _orderBy(feeLines, q.sortBy, q.sortDirection) : feeLines;\n\t\t\t})\n\t\t\t// tap((res) => {\n\t\t\t// \tdebugger;\n\t\t\t// })\n\t\t);\n\t},\n\n\t/**\n\t *\n\t */\n\tgetShippingLines$(\n\t\tthis: OrderDocument,\n\t\tq?: { sortBy: string; sortDirection: 'asc' | 'desc' }\n\t): Observable<ShippingLineDocument[]> {\n\t\treturn this.shippingLines$.pipe(\n\t\t\tswitchMap(async () => {\n\t\t\t\tconst shippingLines = await this.populate('shippingLines');\n\t\t\t\tif (!shippingLines) {\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\t\t\t\treturn q ? _orderBy(shippingLines, q.sortBy, q.sortDirection) : shippingLines;\n\t\t\t})\n\t\t);\n\t},\n\n\t/**\n\t *\n\t */\n\tgetCart$(\n\t\tthis: OrderDocument,\n\t\tq?: { sortBy: string; sortDirection: 'asc' | 'desc' }\n\t): Observable<CartLines> {\n\t\treturn combineLatest([\n\t\t\tthis.getLineItems$(q),\n\t\t\tthis.getFeeLines$(q),\n\t\t\tthis.getShippingLines$(q),\n\t\t]).pipe(\n\t\t\t/**\n\t\t\t * the population promises return at different times\n\t\t\t * debounce emissions to prevent unneccesary re-renders\n\t\t\t * @TODO - is there a better way?\n\t\t\t */\n\t\t\tdebounceTime(10),\n\t\t\tmap((cartLines) => {\n\t\t\t\tconst [lineItems = [], feeLines = [], shippingLines = []] = cartLines;\n\t\t\t\treturn lineItems.concat(feeLines, shippingLines);\n\t\t\t})\n\t\t);\n\t},\n\n\t/**\n\t *\n\t */\n\tasync addOrUpdateLineItem(\n\t\tthis: OrderDocument,\n\t\tproduct: ProductDocument | ProductVariationDocument,\n\t\tparent: ProductDocument\n\t): Promise<OrderDocument | void> {\n\t\t// check lineItems for same product id\n\t\tconst productId = parent ? parent.id : product.id;\n\t\tconst populatedLineItems = await this.populate('lineItems');\n\t\tconst existingProducts = _filter(populatedLineItems, { productId }) as LineItemDocument[];\n\n\t\t// if product exists, increase quantity by 1\n\t\tif (existingProducts.length === 1) {\n\t\t\tawait existingProducts[0]\n\t\t\t\t.update({\n\t\t\t\t\t$inc: {\n\t\t\t\t\t\tquantity: 1,\n\t\t\t\t\t},\n\t\t\t\t})\n\t\t\t\t.catch((err: any) => {\n\t\t\t\t\tdebugger;\n\t\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t\t// else, create new lineItem\n\t\tconst newLineItem: LineItemDocument = await this.collections()\n\t\t\t.line_items.insert({\n\t\t\t\tproductId,\n\t\t\t\tname: product.name || parent.name,\n\t\t\t\tvariationId: parent && product.id,\n\t\t\t\tquantity: 1,\n\t\t\t\tprice: parseFloat(product.price || ''),\n\t\t\t\tsku: product.sku,\n\t\t\t\ttax_class: product.tax_class,\n\t\t\t})\n\t\t\t.catch((err: any) => {\n\t\t\t\tdebugger;\n\t\t\t});\n\n\t\t/**\n\t\t * Add new line item id to the lineItems\n\t\t * - use atomicUpdate just in case lineItems is undefined\n\t\t */\n\t\treturn this.atomicUpdate((order) => {\n\t\t\torder.lineItems = order.lineItems ?? [];\n\t\t\torder.lineItems.push(newLineItem.localId);\n\t\t\treturn order;\n\t\t}).catch((err: any) => {\n\t\t\tdebugger;\n\t\t});\n\t},\n\n\t/**\n\t *\n\t */\n\tasync removeLineItem(this: OrderDocument, lineItem: LineItemDocument) {\n\t\tawait this.update({\n\t\t\t$pullAll: {\n\t\t\t\tlineItems: [lineItem.localId],\n\t\t\t},\n\t\t}).then(() => {\n\t\t\treturn lineItem.remove();\n\t\t});\n\t},\n\n\t/**\n\t *\n\t */\n\tasync addFeeLine(this: OrderDocument, data: Record<string, unknown>) {\n\t\tawait this.collections()\n\t\t\t.fee_lines.insert(data)\n\t\t\t.then((newFee: FeeLineDocument) => {\n\t\t\t\treturn this.update({\n\t\t\t\t\t$push: {\n\t\t\t\t\t\tfeeLines: newFee.localId,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\t},\n\n\t/**\n\t *\n\t */\n\tasync removeFeeLine(this: OrderDocument, feeLine: FeeLineDocument) {\n\t\tawait this.update({\n\t\t\t$pullAll: {\n\t\t\t\tfeeLines: [feeLine.localId],\n\t\t\t},\n\t\t}).then(() => {\n\t\t\treturn feeLine.remove();\n\t\t});\n\t},\n\n\t/**\n\t *\n\t */\n\tasync addShippingLine(this: OrderDocument, data: Record<string, unknown>) {\n\t\tawait this.collections()\n\t\t\t.shipping_lines.insert(data)\n\t\t\t.then((newShipping: ShippingLineDocument) => {\n\t\t\t\treturn this.update({\n\t\t\t\t\t$push: {\n\t\t\t\t\t\tshippingLines: newShipping.localId,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((err: any) => {\n\t\t\t\tconsole.log(err);\n\t\t\t});\n\t},\n\n\t/**\n\t *\n\t */\n\tasync removeShippingLine(this: OrderDocument, shippingLine: ShippingLineDocument) {\n\t\tawait this.update({\n\t\t\t$pullAll: {\n\t\t\t\tshippingLines: [shippingLine.localId],\n\t\t\t},\n\t\t}).then(() => {\n\t\t\treturn shippingLine.remove();\n\t\t});\n\t},\n\n\t/**\n\t *\n\t */\n\tasync removeCartLine(this: OrderDocument, item: CartLine) {\n\t\t// @ts-ignore\n\t\tswitch (item.collection.name) {\n\t\t\tcase 'line_items':\n\t\t\t\treturn this.removeLineItem(item);\n\t\t\tcase 'fee_lines':\n\t\t\t\treturn this.removeFeeLine(item);\n\t\t\tcase 'shipping_lines':\n\t\t\t\treturn this.removeShippingLine(item);\n\t\t\tdefault:\n\t\t\t\treturn null;\n\t\t}\n\t},\n\n\t/**\n\t *\n\t */\n\tasync addCustomer(this: OrderDocument, customer: CustomerDocument) {\n\t\tawait this.atomicPatch({\n\t\t\tcustomerId: customer.id,\n\t\t\tbilling: {\n\t\t\t\temail: customer.email,\n\t\t\t},\n\t\t}).then((res) => {\n\t\t\tconsole.log(res);\n\t\t});\n\t},\n\n\t/**\n\t *\n\t */\n\tcomputedTotal$(this: OrderDocument) {\n\t\treturn this.getCart$().pipe(\n\t\t\tswitchMap((cartLines: CartLines) => {\n\t\t\t\tconst totals$ = _map(cartLines, 'total$');\n\t\t\t\treturn combineLatest(totals$);\n\t\t\t}),\n\t\t\tmap((totals: string[]) => String(_sumBy(totals, (total) => Number(total ?? 0)))),\n\t\t\ttap((total: string) => {\n\t\t\t\tif (total !== this.total) this.atomicPatch({ total });\n\t\t\t})\n\t\t);\n\t},\n\n\t/**\n\t *\n\t */\n\tcomputedSubtotal$(this: OrderDocument) {\n\t\treturn this.getLineItems$().pipe(\n\t\t\tswitchMap((lineItems: LineItemDocument[]) => {\n\t\t\t\tconst subtotals$ = _map(lineItems, 'subtotal$');\n\t\t\t\treturn combineLatest(subtotals$);\n\t\t\t}),\n\t\t\tmap((subtotals: string[]) => String(_sumBy(subtotals, (subtotal) => Number(subtotal ?? 0))))\n\t\t);\n\t},\n\n\t/**\n\t *\n\t */\n\tcomputedTotalTax$(this: OrderDocument) {\n\t\treturn this.getCart$().pipe(\n\t\t\tswitchMap((cartLines: CartLines) => {\n\t\t\t\tconst totalTax$ = _map(cartLines, (cartLine) => cartLine.computedTotalTax$());\n\t\t\t\treturn combineLatest(totalTax$);\n\t\t\t}),\n\t\t\tmap((totals: string[]) => String(_sumBy(totals, (total) => Number(total ?? 0)))),\n\t\t\ttap((totalTax: string) => {\n\t\t\t\tif (totalTax !== this.totalTax) this.atomicPatch({ totalTax });\n\t\t\t})\n\t\t);\n\t},\n};\n","import _filter from 'lodash/filter';\nimport _sortBy from 'lodash/sortBy';\nimport _map from 'lodash/map';\n\ntype OrderCollection = import('.').OrderCollection;\ntype ProductDocument = import('../products').ProductDocument;\ntype ProductVariationDocument = import('../product-variations').ProductVariationDocument;\ntype QueryState =\n\timport('@wcpos/common/src/hooks/use-data-observable/use-data-observable').QueryState;\n\n/**\n * WooCommerce Order Collection statics\n */\nexport default {\n\t/**\n\t *\n\t */\n\tquery(this: OrderCollection, query: QueryState) {\n\t\treturn this.find();\n\t},\n\n\t/**\n\t *\n\t */\n\tasync restApiQuery(this: OrderCollection, query: QueryState) {\n\t\ttry {\n\t\t\tconst result = await this.storageInstance.internals.pouch.find({\n\t\t\t\tselector: {},\n\t\t\t\t// @ts-ignore\n\t\t\t\tfields: ['localId', 'id', 'dateCreatedGmt'],\n\t\t\t});\n\t\t\t// get array of sorted records with dateCreatedGmt\n\t\t\tconst filtered = _filter(result.docs, 'dateCreatedGmt');\n\t\t\tconst sorted = _sortBy(filtered, 'dateCreatedGmt');\n\t\t\tconst exclude = _map(sorted, 'id').join(',');\n\n\t\t\t// @ts-ignore\n\t\t\tconst replicationState = this.syncRestApi({\n\t\t\t\tlive: false,\n\t\t\t\tautoStart: false,\n\t\t\t\tpull: {\n\t\t\t\t\tqueryBuilder: (lastModified_1: any) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tsearch: query.search,\n\t\t\t\t\t\t\torder: query.sortDirection,\n\t\t\t\t\t\t\torderBy: query.sortBy,\n\t\t\t\t\t\t\texclude,\n\t\t\t\t\t\t};\n\t\t\t\t\t\t// const orderbyMap = {\n\t\t\t\t\t\t// \tlastName: 'meta_value',\n\t\t\t\t\t\t// \tfirstName: 'meta_value',\n\t\t\t\t\t\t// };\n\t\t\t\t\t\t// const metaKeyMap = {\n\t\t\t\t\t\t// \tlastName: 'last_name',\n\t\t\t\t\t\t// \tfirstName: 'first_name',\n\t\t\t\t\t\t// };\n\t\t\t\t\t\t// // @ts-ignore\n\t\t\t\t\t\t// const orderby = orderbyMap[query.sortBy] ? orderbyMap[query.sortBy] : query.sortBy;\n\t\t\t\t\t\t// // @ts-ignore\n\t\t\t\t\t\t// const meta_key = metaKeyMap[query.sortBy] ? metaKeyMap[query.sortBy] : undefined;\n\t\t\t\t\t\t// return {\n\t\t\t\t\t\t// \tsearch: escape(query.search),\n\t\t\t\t\t\t// \torder: query.sortDirection,\n\t\t\t\t\t\t// \torderby,\n\t\t\t\t\t\t// \texclude,\n\t\t\t\t\t\t// \tmeta_key,\n\t\t\t\t\t\t// };\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treplicationState.run(false);\n\t\t\treturn replicationState;\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\treturn err;\n\t\t}\n\t},\n\n\t/**\n\t *\n\t */\n\taudit(this: OrderCollection) {\n\t\treturn this.database.httpClient\n\t\t\t.get('orders', {\n\t\t\t\tparams: { fields: ['id'], posts_per_page: -1 },\n\t\t\t})\n\t\t\t.then(({ data }: any) => {\n\t\t\t\t// @ts-ignore\n\t\t\t\treturn this.auditIdsFromServer(data);\n\t\t\t});\n\t},\n\n\t/**\n\t *\n\t */\n\tasync createNewOrderWithProduct(\n\t\tthis: OrderCollection,\n\t\tproduct: ProductDocument | ProductVariationDocument\n\t) {\n\t\t// get timestamp and turn it into date_created_gmt, eg: 2020-07-07T14:40:00\n\t\tconst timestamp = Date.now();\n\t\tconst dateCreatedGmt = new Date(timestamp).toISOString().split('.')[0];\n\n\t\t// @ts-ignore\n\t\tconst newOrder = await this.insert({ dateCreatedGmt, status: 'pos-open' });\n\t\treturn newOrder.addOrUpdateLineItem(product);\n\t},\n};\n","import forEach from 'lodash/forEach';\nimport reverse from 'lodash/reverse';\nimport sumBy from 'lodash/sumBy';\nimport sortBy from 'lodash/sortBy';\nimport round from 'lodash/round';\nimport map from 'lodash/map';\nimport flatten from 'lodash/flatten';\nimport groupBy from 'lodash/groupBy';\n\ntype TaxRateSchema = import('@wcpos/common/src/database').TaxRateSchema;\ninterface Taxes {\n\tid: number;\n\ttotal: string;\n}\n\n/**\n * Round taxes and convert total to string\n */\nfunction roundedTaxStrings(taxes: { id: number; total: number }[]) {\n\tconst roundedTaxes: { id: number; total: string }[] = [];\n\tforEach(taxes, (tax) => {\n\t\troundedTaxes.push({ id: tax.id, total: String(round(tax.total, 4)) });\n\t});\n\treturn roundedTaxes;\n}\n\n/**\n * Calculate taxes when price includes tax\n */\nfunction calcInclusiveTax(price: number, rates: TaxRateSchema[]) {\n\tconst taxes: { id: number; total: number }[] = [];\n\tconst compoundRates: { id: number; rate: string }[] = [];\n\tconst regularRates: { id: number; rate: string }[] = [];\n\tlet nonCompoundPrice = price;\n\n\t// Index array so taxes are output in correct order and see what compound/regular rates we have to calculate.\n\tforEach(rates, (_rate) => {\n\t\tconst { id = 0, rate = '0', compound = false } = _rate;\n\n\t\tif (compound) {\n\t\t\tcompoundRates.push({ id, rate });\n\t\t} else {\n\t\t\tregularRates.push({ id, rate });\n\t\t}\n\t});\n\n\treverse(compoundRates); // Working backwards.\n\n\tforEach(compoundRates, (compoundRate) => {\n\t\tconst { id, rate } = compoundRate;\n\t\tconst total = nonCompoundPrice - nonCompoundPrice / (1 + +rate / 100);\n\t\ttaxes.push({ id, total });\n\t\tnonCompoundPrice -= total;\n\t});\n\n\t// Regular taxes.\n\tconst regularTaxRate = 1 + sumBy(regularRates, (regularRate) => +regularRate.rate / 100);\n\n\tforEach(regularRates, (regularRate) => {\n\t\tconst { id, rate } = regularRate;\n\t\tconst theRate = +rate / 100 / regularTaxRate;\n\t\tconst netPrice = price - theRate * nonCompoundPrice;\n\t\tconst total = price - netPrice;\n\t\ttaxes.push({ id, total });\n\t});\n\n\t/**\n\t * Round all taxes to precision (4DP) before passing them back. Note, this is not the same rounding\n\t * as in the cart calculation class which, depending on settings, will round to 2DP when calculating\n\t * final totals. Also unlike that class, this rounds .5 up for all cases.\n\t */\n\t// const roundedTaxes = map(taxes, (tax) => {\n\t// \ttax.total = round(tax.total, 4);\n\t// \treturn tax;\n\t// });\n\n\treturn roundedTaxStrings(taxes);\n}\n\n/**\n * Calculate taxes when price excludes tax\n */\nfunction calcExclusiveTax(price: number, rates: TaxRateSchema[]) {\n\tconst taxes: { id: number; total: number }[] = [];\n\n\tforEach(rates, (_rate) => {\n\t\tconst { id = 0, rate = '0', compound = false } = _rate;\n\n\t\tif (!compound) {\n\t\t\tconst total = price * (+rate / 100);\n\t\t\ttaxes.push({ id, total });\n\t\t}\n\t});\n\n\tlet preCompoundTotal = sumBy(taxes, (tax) => tax.total);\n\n\t// Compound taxes.\n\tforEach(rates, (_rate) => {\n\t\tconst { id = 0, rate = '0', compound = false } = _rate;\n\n\t\tif (compound) {\n\t\t\tconst thePriceIncTax = price + preCompoundTotal;\n\t\t\tconst total = thePriceIncTax * (+rate / 100);\n\t\t\ttaxes.push({ id, total });\n\t\t\tpreCompoundTotal = sumBy(taxes, (tax) => tax.total);\n\t\t}\n\t});\n\n\t/**\n\t * Round all taxes to precision (4DP) before passing them back. Note, this is not the same rounding\n\t * as in the cart calculation class which, depending on settings, will round to 2DP when calculating\n\t * final totals. Also unlike that class, this rounds .5 up for all cases.\n\t */\n\t// const roundedTaxes = map(taxes, (tax) => {\n\t// \ttax.total = round(tax.total, 4);\n\t// \treturn tax;\n\t// });\n\n\treturn roundedTaxStrings(taxes);\n}\n\n/**\n * Takes a price and an array of tax rates, eg: [{ id: 1, rate: '4.0000', order: 1 }]\n * Returns the calculated array of taxes tax, eg: [{ id: 1, total: 1.2345 }]\n */\nexport function calcTaxes(price: number, rates: TaxRateSchema[], priceIncludesTax = false) {\n\tconst sortedRates = sortBy(rates, 'order');\n\n\treturn priceIncludesTax\n\t\t? calcInclusiveTax(+price, sortedRates)\n\t\t: calcExclusiveTax(+price, sortedRates);\n}\n\n/**\n *\n */\nexport function sumTaxes(taxes: Taxes[]) {\n\treturn sumBy(taxes, (tax) => +tax.total);\n}\n\n/**\n *\n */\nexport function sumItemizedTaxes(taxes: Taxes[]) {\n\t// group taxes by id\n\tconst groupedTaxes = groupBy(flatten(taxes), 'id');\n\treturn map(groupedTaxes, (itemized, id) => ({\n\t\tid: +id,\n\t\ttotal: String(sumTaxes(itemized)),\n\t}));\n}\n","import map from 'lodash/map';\nimport get from 'lodash/get';\nimport isArray from 'lodash/isArray';\nimport isString from 'lodash/isString';\nimport find from 'lodash/find';\nimport forEach from 'lodash/forEach';\nimport schema from './schema.json';\nimport methods from './methods';\nimport statics from './statics';\nimport postCreate from './postCreate';\n\ntype BaseColection = import('rxdb').RxCollection;\n\ntype OrderMethods = typeof import('./methods');\ntype OrderStatics = typeof import('./statics');\nexport type OrderSchema = import('./interface').WooCommerceOrderSchema;\nexport type OrderDocument = import('rxdb').RxDocument<OrderSchema, OrderMethods>;\nexport type OrderCollection = import('rxdb').RxCollection<\n\tOrderDocument,\n\tOrderMethods,\n\tOrderStatics & { collections: () => Record<string, import('rxdb').RxCollection> }\n>;\n\n/**\n * @TODO - how to add collection statics types for ALL collections\n */\nasync function preInsert(this: OrderCollection, plainData: Record<string, unknown>) {\n\tconsole.log('Order pre-insert', plainData);\n\tif (isArray(plainData.lineItems)) {\n\t\tconst result = await this.collections().line_items.bulkInsert(plainData.lineItems);\n\t\tplainData.lineItems = map(result.success, 'localId');\n\t}\n\tif (isArray(plainData.feeLines)) {\n\t\tconst result = await this.collections().fee_lines.bulkInsert(plainData.feeLines);\n\t\tplainData.feeLines = map(result.success, 'localId');\n\t}\n\tif (isArray(plainData.shippingLines)) {\n\t\tconst result = await this.collections().shipping_lines.bulkInsert(plainData.shippingLines);\n\t\tplainData.shippingLines = map(result.success, 'localId');\n\t}\n\treturn plainData;\n}\n\n/**\n *\n */\n// @ts-ignore\nasync function preSave(\n\tthis: OrderCollection,\n\tplainData: Record<string, unknown>,\n\torder: OrderDocument\n) {\n\tconsole.log('Order pre-save', plainData);\n\t// @TODO - bulkInsert should match bulkInsert, eg: result.success\n\tconst { lineItems, feeLines, shippingLines } = plainData;\n\tif (isArray(lineItems) && lineItems.length > 0 && !isString(lineItems[0])) {\n\t\tconst result = await this.collections().line_items.bulkInsert(lineItems);\n\t\tplainData.lineItems = map(result, 'localId');\n\t}\n\tif (isArray(feeLines) && feeLines.length > 0 && !isString(feeLines[0])) {\n\t\tconst result = await this.collections().fee_lines.bulkInsert(feeLines);\n\t\tplainData.feeLines = map(result, 'localId');\n\t}\n\tif (isArray(shippingLines) && shippingLines.length > 0 && !isString(shippingLines[0])) {\n\t\tconst result = await this.collections().shipping_lines.bulkInsert(shippingLines);\n\t\tplainData.shippingLines = map(result, 'localId');\n\t}\n\treturn plainData;\n}\n\n/**\n *\n */\n// async function preRemove(this: OrderCollection, order: OrderDocument) {\n// \t// remove all lineItems\n// \tif (isArray(order.lineItems) && order.lineItems.length > 0) {\n// \t\tconst result = await this.collections().line_items.bulkRemove(order.lineItems);\n// \t\tconsole.log(result);\n// \t}\n// \t// remove all feeLines\n// \tif (isArray(order.feeLines) && order.feeLines.length > 0) {\n// \t\tconst result = await this.collections().fee_lines.bulkRemove(order.feeLines);\n// \t\tconsole.log(result);\n// \t}\n// \t// remove all shippingLines\n// \tif (isArray(order.shippingLines) && order.shippingLines.length > 0) {\n// \t\tconst result = await this.collections().shipping_lines.bulkRemove(order.shippingLines);\n// \t\tconsole.log(result);\n// \t}\n// }\n\n/**\n *\n */\nexport const orders = {\n\tschema,\n\t// pouchSettings: {},\n\tstatics,\n\tmethods,\n\t// attachments: {},\n\toptions: {\n\t\tmiddlewares: {\n\t\t\tpostCreate: {\n\t\t\t\thandle: postCreate,\n\t\t\t\tparallel: false,\n\t\t\t},\n\t\t\tpreInsert: {\n\t\t\t\thandle: preInsert,\n\t\t\t\tparallel: false,\n\t\t\t},\n\t\t\tpreSave: {\n\t\t\t\thandle: preSave,\n\t\t\t\tparallel: false,\n\t\t\t},\n\t\t\t// preRemove: {\n\t\t\t// \thandle: preRemove,\n\t\t\t// \tparallel: false,\n\t\t\t// },\n\t\t},\n\t},\n\t// migrationStrategies: {},\n\t// autoMigrate: true,\n\t// cacheReplacementPolicy() {},\n};\n","import { from, of, combineLatest } from 'rxjs';\nimport { switchMap, tap, catchError, map, debounceTime } from 'rxjs/operators';\nimport sumBy from 'lodash/sumBy';\nimport { sumItemizedTaxes } from '../utils';\n\ntype OrderDocument = import('./').OrderDocument;\ntype OrderCollection = import('./').OrderCollection;\ntype LineItemDocument = import('../line-items').LineItemDocument;\n\n/**\n *\n */\nfunction postCreate(\n\tthis: OrderCollection,\n\tplainData: Record<string, unknown>,\n\torder: OrderDocument\n) {\n\t/**\n\t *\n\t */\n\tconst populatedLineItems$ = order.lineItems$.pipe(\n\t\tswitchMap(async () => {\n\t\t\tconst lineItems = await order.populate('lineItems');\n\t\t\tif (!lineItems) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\t// return q ? _orderBy(lineItems, q.sortBy, q.sortDirection) : lineItems;\n\t\t\treturn lineItems;\n\t\t})\n\t);\n\n\t/**\n\t *\n\t */\n\tconst populatedFeeLines$ = order.feeLines$.pipe(\n\t\tswitchMap(async () => {\n\t\t\tconst feeLines = await order.populate('feeLines');\n\t\t\tif (!feeLines) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\t// return q ? _orderBy(lineItems, q.sortBy, q.sortDirection) : lineItems;\n\t\t\treturn feeLines;\n\t\t})\n\t);\n\n\t/**\n\t *\n\t */\n\tconst populatedshippingLines$ = order.shippingLines$.pipe(\n\t\tswitchMap(async () => {\n\t\t\tconst shippingLines = await order.populate('shippingLines');\n\t\t\tif (!shippingLines) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t\t// return q ? _orderBy(lineItems, q.sortBy, q.sortDirection) : lineItems;\n\t\t\treturn shippingLines;\n\t\t})\n\t);\n\n\t/**\n\t *\n\t */\n\tconst cart$ = combineLatest([\n\t\tpopulatedLineItems$,\n\t\tpopulatedFeeLines$,\n\t\tpopulatedshippingLines$,\n\t]).pipe(\n\t\t/**\n\t\t * the population promises return at different times\n\t\t * debounce emissions to prevent unneccesary re-renders\n\t\t * @TODO - is there a better way?\n\t\t */\n\t\t// debounceTime(100),\n\t\tmap((lines) => {\n\t\t\tconst [lineItems = [], feeLines = [], shippingLines = []] = lines;\n\t\t\treturn lineItems.concat(feeLines, shippingLines);\n\t\t})\n\t);\n\n\t/**\n\t *\n\t */\n\tcart$\n\t\t.pipe(switchMap((lines: LineItemDocument[]) => combineLatest(lines.map((line) => line.$))))\n\t\t.subscribe((lines) => {\n\t\t\tconst total = sumBy(lines, (item) => +(item.total ?? 0));\n\t\t\tconst totalTax = sumBy(lines, (item) => +(item.totalTax ?? 0));\n\t\t\tconst totalWithTax = total + totalTax;\n\t\t\tconst totalTaxString = String(totalTax);\n\t\t\tconst totalWithTaxString = String(totalWithTax);\n\t\t\tconst itemizedTaxes = sumItemizedTaxes(lines.map((line) => line.taxes ?? []));\n\t\t\tconst taxLines = itemizedTaxes.map((tax) => ({\n\t\t\t\tid: tax.id,\n\t\t\t\ttaxTotal: String(tax.total),\n\t\t\t}));\n\n\t\t\tif (totalWithTaxString !== order.total || totalTaxString !== order.totalTax) {\n\t\t\t\t// @ts-ignore\n\t\t\t\torder.atomicPatch({ total: totalWithTaxString, totalTax: totalTaxString, taxLines });\n\t\t\t}\n\t\t});\n\n\tObject.assign(order, { populatedLineItems$, cart$ });\n}\n\nexport default postCreate;\n","import { from, combineLatest, Observable } from 'rxjs';\nimport { switchMap, map, tap } from 'rxjs/operators';\nimport _map from 'lodash/map';\nimport { calcTaxes, sumTaxes, sumItemizedTaxes } from '../utils';\n\ntype LineItemCollection = import('./line-items').LineItemCollection;\ntype LineItemDocument = import('./line-items').LineItemDocument;\n\nconst rates: any[] = [\n\t{\n\t\tid: 2,\n\t\tcountry: 'GB',\n\t\trate: '20.0000',\n\t\tname: 'VAT',\n\t\tpriority: 1,\n\t\tcompound: true,\n\t\tshipping: true,\n\t\torder: 1,\n\t\tclass: 'standard',\n\t},\n];\n\n/**\n *\n */\nexport function postCreate(\n\tthis: LineItemCollection,\n\tplainData: Record<string, unknown>,\n\tlineItem: LineItemDocument\n) {\n\t/**\n\t * add changes for taxes\n\t */\n\tcombineLatest([lineItem.quantity$, lineItem.price$]).subscribe((array) => {\n\t\tconst [quantity = 0, price = 0] = array;\n\t\tconst discounts = 0;\n\t\tconst subtotal = quantity * price;\n\t\tconst subtotalTaxes = calcTaxes(subtotal, rates);\n\t\tconst itemizedSubTotalTaxes = sumItemizedTaxes(subtotalTaxes);\n\t\tconst total = subtotal - discounts;\n\t\tconst totalTaxes = calcTaxes(subtotal, rates);\n\t\tconst itemizedTotalTaxes = sumItemizedTaxes(totalTaxes);\n\t\t// itemizedSubTotalTaxes & itemizedTotalTaxes should be same size\n\t\t// is there a case where they are not?\n\t\tconst taxes = _map(itemizedSubTotalTaxes, (obj) => {\n\t\t\tconst index = itemizedTotalTaxes.findIndex((el) => el.id === obj.id);\n\t\t\tconst totalTax = index !== -1 ? itemizedTotalTaxes[index] : { total: 0 };\n\t\t\treturn {\n\t\t\t\tid: obj.id,\n\t\t\t\tsubtotal: String(obj.total ?? 0),\n\t\t\t\ttotal: String(totalTax.total ?? 0),\n\t\t\t};\n\t\t});\n\n\t\tlineItem.atomicPatch({\n\t\t\tsubtotal: String(subtotal),\n\t\t\tsubtotalTax: String(sumTaxes(subtotalTaxes)),\n\t\t\ttotal: String(total),\n\t\t\ttotalTax: String(sumTaxes(totalTaxes)),\n\t\t\ttaxes,\n\t\t});\n\t});\n}\n","import schema from './schema.json';\nimport statics from './statics';\n// import methods from './methods';\nimport { postCreate } from './postCreate';\n\nexport type LineItemSchema = import('./interface').WooCommerceOrderLineItemSchema;\nexport type LineItemDocument = import('rxdb').RxDocument<LineItemSchema, LineItemMethods>;\nexport type LineItemCollection = import('rxdb').RxCollection<\n\tLineItemDocument,\n\tLineItemMethods,\n\tLineItemStatics\n>;\ntype LineItemMethods = typeof import('./methods');\ntype LineItemStatics = typeof import('./statics');\n\nfunction preInsert(this: LineItemDocument, plainData: Record<string, unknown>) {\n\tif (!plainData.parentName) {\n\t\tplainData.parentName = '';\n\t}\n\n\treturn plainData;\n}\n\nexport const lineItems = {\n\tschema,\n\t// pouchSettings: {},\n\tstatics,\n\t// methods,\n\t// attachments: {},\n\toptions: {\n\t\tmiddlewares: {\n\t\t\tpreInsert: {\n\t\t\t\thandle: preInsert,\n\t\t\t\tparallel: false,\n\t\t\t},\n\t\t\tpreSave: {\n\t\t\t\thandle: preInsert,\n\t\t\t\tparallel: false,\n\t\t\t},\n\t\t\tpostCreate: {\n\t\t\t\thandle: postCreate,\n\t\t\t\tparallel: false,\n\t\t\t},\n\t\t},\n\t},\n\t// migrationStrategies: {},\n\t// autoMigrate: true,\n\t// cacheReplacementPolicy() {},\n};\n","import forEach from 'lodash/forEach';\nimport get from 'lodash/get';\nimport find from 'lodash/find';\n\ntype LineItemCollection = import('.').LineItemCollection;\ntype LineItemDocument = import('.').LineItemDocument;\n\n/**\n * WooCommerce Order Line Item statics\n */\nexport default {\n\t/**\n\t * Take plainData from server\n\t */\n\tasync bulkUpsert(this: LineItemCollection, items: Record<string, unknown>[]) {\n\t\tconst promises: Promise<LineItemDocument>[] = [];\n\n\t\t// @TODO - data is coming in straight from REST API, need to parse first?\n\t\tforEach(items, (item) => {\n\t\t\t// @ts-ignore\n\t\t\tconst localId = get(find(item.meta_data, { key: '_pos' }), 'value');\n\t\t\t// @ts-ignore\n\t\t\tconst upsertedItem = this.collections().line_items.upsert({\n\t\t\t\tlocalId,\n\t\t\t\t...(item as Record<string, unknown>),\n\t\t\t});\n\n\t\t\tpromises.push(upsertedItem);\n\t\t});\n\n\t\treturn Promise.all(promises).catch((err: any) => {\n\t\t\tconsole.log(err);\n\t\t});\n\t},\n};\n","import { combineLatest } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport schema from './schema.json';\nimport { calcTaxes, sumTaxes, sumItemizedTaxes } from '../utils';\nimport statics from './statics';\n\nexport type FeeLineSchema = import('./interface').WooCommerceOrderFeeLineSchema;\nexport type FeeLineDocument = import('rxdb').RxDocument<FeeLineSchema, FeeLineMethods>;\nexport type FeeLineCollection = import('rxdb').RxCollection<\n\tFeeLineDocument,\n\tFeeLineMethods,\n\tFeeLineStatics\n>;\ntype FeeLineMethods = Record<string, never>;\ntype FeeLineStatics = Record<string, never>;\n\nconst rates: any[] = [\n\t{\n\t\tid: 2,\n\t\tcountry: 'GB',\n\t\trate: '20.0000',\n\t\tname: 'VAT',\n\t\tpriority: 1,\n\t\tcompound: true,\n\t\tshipping: true,\n\t\torder: 1,\n\t\tclass: 'standard',\n\t},\n];\n\n/**\n *\n */\nexport function postCreate(\n\tthis: FeeLineCollection,\n\tplainData: Record<string, unknown>,\n\tfeeLine: FeeLineDocument\n) {\n\t/**\n\t * add changes for taxes\n\t */\n\tcombineLatest([feeLine.total$]).subscribe((array) => {\n\t\tconst [total = 0] = array;\n\t\tconst discounts = 0;\n\t\t// const total = subtotal - discounts;\n\t\t// @ts-ignore note: total is a string\n\t\tconst totalTaxes = calcTaxes(+total, rates);\n\t\tconst taxes = sumItemizedTaxes(totalTaxes);\n\n\t\t// fee has a subtotal?\n\t\tfeeLine.atomicPatch({\n\t\t\ttotalTax: String(sumTaxes(totalTaxes)),\n\t\t\ttaxes,\n\t\t});\n\t});\n}\n\nexport const feeLines = {\n\tschema,\n\t// pouchSettings: {},\n\tstatics,\n\t// methods: {},\n\t// attachments: {},\n\toptions: {\n\t\tmiddlewares: {\n\t\t\tpostCreate: {\n\t\t\t\thandle: postCreate,\n\t\t\t\tparallel: false,\n\t\t\t},\n\t\t},\n\t},\n\t// migrationStrategies: {},\n\t// autoMigrate: true,\n\t// cacheReplacementPolicy() {},\n};\n","import forEach from 'lodash/forEach';\nimport get from 'lodash/get';\nimport find from 'lodash/find';\n\ntype FeeLineCollection = import('.').FeeLineCollection;\ntype FeeLineDocument = import('.').FeeLineDocument;\n\n/**\n * WooCommerce Order Fee Line statics\n */\nexport default {\n\t/**\n\t * Take plainData from server\n\t */\n\tasync bulkUpsert(this: FeeLineCollection, items: Record<string, unknown>[]) {\n\t\tconst promises: Promise<FeeLineDocument>[] = [];\n\n\t\t// @TODO - data is coming in straight from REST API, need to parse first?\n\t\tforEach(items, (item) => {\n\t\t\t// @ts-ignore\n\t\t\tconst localId = get(find(item.meta_data, { key: '_pos' }), 'value');\n\t\t\t// @ts-ignore\n\t\t\tconst upsertedItem = this.collections().fee_lines.upsert({\n\t\t\t\tlocalId,\n\t\t\t\t...(item as Record<string, unknown>),\n\t\t\t});\n\n\t\t\tpromises.push(upsertedItem);\n\t\t});\n\n\t\treturn Promise.all(promises).catch((err: any) => {\n\t\t\tconsole.log(err);\n\t\t});\n\t},\n};\n","import { from, combineLatest, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport _filter from 'lodash/filter';\nimport schema from './schema.json';\nimport { calcTaxes, sumTaxes, sumItemizedTaxes } from '../utils';\nimport statics from './statics';\n\nexport type ShippingLineSchema = import('./interface').WooCommerceOrderShippingLineSchema;\nexport type ShippingLineDocument = import('rxdb').RxDocument<\n\tShippingLineSchema,\n\tShippingLineMethods\n>;\nexport type ShippingLineCollection = import('rxdb').RxCollection<\n\tShippingLineDocument,\n\tShippingLineMethods,\n\tShippingLineStatics\n>;\ntype ShippingLineMethods = Record<string, never>;\ntype ShippingLineStatics = Record<string, never>;\n\nconst rates: any[] = [\n\t{\n\t\tid: 2,\n\t\tcountry: 'GB',\n\t\trate: '20.0000',\n\t\tname: 'VAT',\n\t\tpriority: 1,\n\t\tcompound: true,\n\t\tshipping: true,\n\t\torder: 1,\n\t\tclass: 'standard',\n\t},\n];\n\n/**\n *\n */\nexport function postCreate(\n\tthis: ShippingLineCollection,\n\tplainData: Record<string, unknown>,\n\tshippingLine: ShippingLineDocument\n) {\n\t/**\n\t * add changes for taxes\n\t */\n\tcombineLatest([shippingLine.total$]).subscribe((array) => {\n\t\tconst [total = 0] = array;\n\t\tconst discounts = 0;\n\t\t// const total = subtotal - discounts;\n\t\tconst shippingTaxRates = _filter(rates, { shipping: true });\n\t\t// @ts-ignore note: total is a string\n\t\tconst totalTaxes = calcTaxes(+total, shippingTaxRates);\n\t\tconst taxes = sumItemizedTaxes(totalTaxes);\n\n\t\tshippingLine.atomicPatch({\n\t\t\ttotalTax: String(sumTaxes(totalTaxes)),\n\t\t\ttaxes,\n\t\t});\n\t});\n}\n\nexport const shippingLines = {\n\tschema,\n\t// pouchSettings: {},\n\tstatics,\n\t// methods: {},\n\t// attachments: {},\n\toptions: {\n\t\tmiddlewares: {\n\t\t\tpostCreate: {\n\t\t\t\thandle: postCreate,\n\t\t\t\tparallel: false,\n\t\t\t},\n\t\t},\n\t},\n\t// migrationStrategies: {},\n\t// autoMigrate: true,\n\t// cacheReplacementPolicy() {},\n};\n","import forEach from 'lodash/forEach';\nimport get from 'lodash/get';\nimport find from 'lodash/find';\n\ntype ShippingLineCollection = import('.').ShippingLineCollection;\ntype ShippingLineDocument = import('.').ShippingLineDocument;\n\n/**\n * WooCommerce Order Shipping Line statics\n */\nexport default {\n\t/**\n\t * Take plainData from server\n\t */\n\tasync bulkUpsert(this: ShippingLineCollection, items: Record<string, unknown>[]) {\n\t\tconst promises: Promise<ShippingLineDocument>[] = [];\n\n\t\t// @TODO - data is coming in straight from REST API, need to parse first?\n\t\tforEach(items, (item) => {\n\t\t\t// @ts-ignore\n\t\t\tconst localId = get(find(item.meta_data, { key: '_pos' }), 'value');\n\t\t\t// @ts-ignore\n\t\t\tconst upsertedItem = this.collections().shipping_lines.upsert({\n\t\t\t\tlocalId,\n\t\t\t\t...(item as Record<string, unknown>),\n\t\t\t});\n\n\t\t\tpromises.push(upsertedItem);\n\t\t});\n\n\t\treturn Promise.all(promises).catch((err: any) => {\n\t\t\tconsole.log(err);\n\t\t});\n\t},\n};\n","import _filter from 'lodash/filter';\nimport _sortBy from 'lodash/sortBy';\nimport _map from 'lodash/map';\n\ntype CustomerCollection = import('.').CustomerCollection;\ntype QueryState =\n\timport('@wcpos/common/src/hooks/use-data-observable/use-data-observable').QueryState;\n\nconst escape = (text: string) => text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n\n/**\n * WooCommerce Order Collection statics\n */\nexport default {\n\t/**\n\t *\n\t */\n\tquery(this: CustomerCollection, query: QueryState) {\n\t\tconst regexp = new RegExp(escape(query.search), 'i');\n\t\treturn this.find({\n\t\t\tselector: {\n\t\t\t\t$or: [\n\t\t\t\t\t{ username: { $regex: regexp } },\n\t\t\t\t\t{ firstName: { $regex: regexp } },\n\t\t\t\t\t{ lastName: { $regex: regexp } },\n\t\t\t\t],\n\t\t\t\t// $and: [{ [q.sortBy]: { $exists: false } }],\n\t\t\t},\n\t\t});\n\t\t// }).sort({ [query.sortBy]: query.sortDirection });\n\t},\n\n\t/**\n\t *\n\t */\n\tasync restApiQuery(this: CustomerCollection, query: QueryState) {\n\t\ttry {\n\t\t\tconst result = await this.storageInstance.internals.pouch.find({\n\t\t\t\tselector: {},\n\t\t\t\t// @ts-ignore\n\t\t\t\tfields: ['localId', 'id', 'dateCreatedGmt'],\n\t\t\t});\n\t\t\t// get array of sorted records with dateCreatedGmt\n\t\t\tconst filtered = _filter(result.docs, 'dateCreatedGmt');\n\t\t\tconst sorted = _sortBy(filtered, 'dateCreatedGmt');\n\t\t\tconst exclude = _map(sorted, 'id').join(',');\n\n\t\t\t// @ts-ignore\n\t\t\tconst replicationState = this.syncRestApi({\n\t\t\t\tlive: false,\n\t\t\t\tautoStart: false,\n\t\t\t\tpull: {\n\t\t\t\t\tqueryBuilder: (lastModified_1: any) => {\n\t\t\t\t\t\tconst orderbyMap = {\n\t\t\t\t\t\t\tlastName: 'meta_value',\n\t\t\t\t\t\t\tfirstName: 'meta_value',\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tconst metaKeyMap = {\n\t\t\t\t\t\t\tlastName: 'last_name',\n\t\t\t\t\t\t\tfirstName: 'first_name',\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tconst orderby = orderbyMap[query.sortBy] ? orderbyMap[query.sortBy] : query.sortBy;\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tconst meta_key = metaKeyMap[query.sortBy] ? metaKeyMap[query.sortBy] : undefined;\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tsearch: escape(query.search),\n\t\t\t\t\t\t\torder: query.sortDirection,\n\t\t\t\t\t\t\torderby,\n\t\t\t\t\t\t\texclude,\n\t\t\t\t\t\t\tmeta_key,\n\t\t\t\t\t\t};\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\treplicationState.run(false);\n\t\t\treturn replicationState;\n\t\t} catch (err) {\n\t\t\tconsole.log(err);\n\t\t\treturn err;\n\t\t}\n\t},\n\n\t/**\n\t *\n\t */\n\taudit(this: CustomerCollection) {\n\t\treturn this.database.httpClient\n\t\t\t.get('customers', {\n\t\t\t\tparams: { fields: ['id', 'firstName', 'lastName'], posts_per_page: -1 },\n\t\t\t})\n\t\t\t.then(({ data }: any) => {\n\t\t\t\t// @ts-ignore\n\t\t\t\treturn this.auditIdsFromServer(data);\n\t\t\t});\n\t},\n};\n","import schema from './schema.json';\nimport statics from './statics';\n\nexport type CustomerSchema = import('./interface').WooCommerceCustomerSchema;\nexport type CustomerDocument = import('rxdb').RxDocument<CustomerSchema, CustomerMethods>;\nexport type CustomerCollection = import('rxdb').RxCollection<\n\tCustomerDocument,\n\tCustomerMethods,\n\tCustomerStatics\n>;\n\n// interface CustomerMethods {}\n\ntype CustomerStatics = Record<string, never>;\ntype CustomerMethods = Record<string, never>;\n\n// /**\n//  *\n//  */\n// export const methods: CustomerMethods = {};\n\nexport const customers = {\n\tschema,\n\t// pouchSettings: {},\n\tstatics,\n\t// methods: {},\n\t// attachments: {},\n\t// options: {},\n\t// migrationStrategies: {},\n\t// autoMigrate: true,\n\t// cacheReplacementPolicy() {},\n};\n","import logs from './logs';\nimport users from './users';\nimport sites from './sites';\nimport wp_credentials from './wp-credentials';\nimport stores from './stores';\nimport products from './products';\nimport product_variations from './product-variations';\nimport orders from './orders';\nimport line_items from './line-items';\nimport fee_lines from './fee-lines';\nimport shipping_lines from './shipping-lines';\nimport customers from './customers';\nimport taxes from './taxes';\n\nexport const userCollections = { logs, users, sites, wp_credentials, stores };\nexport const storeCollections = {\n\tproducts,\n\tproduct_variations,\n\torders,\n\tline_items,\n\tfee_lines,\n\tshipping_lines,\n\tcustomers,\n\ttaxes,\n};\n","import schema from './schema.json';\n\nexport type TaxRateSchema = import('./interface').WooCommerceTaxRateSchema;\nexport type TaxRateDocument = import('rxdb').RxDocument<TaxRateSchema, TaxRateMethods>;\nexport type TaxRateCollection = import('rxdb').RxCollection<\n\tTaxRateDocument,\n\tTaxRateMethods,\n\tTaxRateStatics\n>;\n\n// @ts-ignore\ninterface TaxRateMethods {}\n\ntype TaxRateStatics = Record<string, never>;\n\n/**\n *\n */\nexport const methods: TaxRateMethods = {};\n\nexport const taxes = {\n\tschema,\n\t// pouchSettings: {},\n\t// statics: {},\n\tmethods,\n\t// attachments: {},\n\t// options: {},\n\t// migrationStrategies: {},\n\t// autoMigrate: true,\n\t// cacheReplacementPolicy() {},\n};\n","import {\n\tcreateRxDatabase,\n\taddRxPlugin,\n\tisRxDatabase,\n\trandomCouchString,\n\t// PouchDB,\n} from 'rxdb/plugins/core';\nimport {\n\tcheckAdapter,\n\taddPouchPlugin,\n\tgetRxStoragePouch\n} from 'rxdb/plugins/pouchdb';\nimport { RxDBDevModePlugin } from 'rxdb/plugins/dev-mode';\nimport { RxDBValidatePlugin } from 'rxdb/plugins/validate';\nimport { RxDBLocalDocumentsPlugin } from 'rxdb/plugins/local-documents';\n// import { RxDBNoValidatePlugin } from 'rxdb/plugins/no-validate';\nimport { RxDBQueryBuilderPlugin } from 'rxdb/plugins/query-builder';\nimport { RxDBUpdatePlugin } from 'rxdb/plugins/update';\nimport { RxDBLeaderElectionPlugin } from 'rxdb/plugins/leader-election';\nimport forEach from 'lodash/forEach';\nimport isFunction from 'lodash/isFunction';\nimport camelCase from 'lodash/camelCase';\nimport set from 'lodash/set';\nimport get from 'lodash/get';\nimport unset from 'lodash/unset';\nimport Platform from '@wcpos/common/src/lib/platform';\nimport axios from 'axios';\nimport difference from 'lodash/difference';\nimport collectionsHelper from './plugins/utils/collections';\nimport removeChildren from './plugins/remove-children';\nimport { RxDBGenerateIdPlugin } from './plugins/utils/generate-id'\nimport RxDBWooCommerceRestApiSyncPlugin from './plugins/woocommerce-rest-api';\nimport { userCollections, storeCollections } from './collections';\n// import { config } from './adapter';\n\naddPouchPlugin(require('pouchdb-adapter-idb'));\n\nif (process.env.NODE_ENV === 'development') {\n\t// in dev-mode we add the dev-mode plugin\n\t// which does many checks and adds full error messages\n\t// also, only add on first render, seems to be conflict with HMR\n\tif (!module?.hot?.data) {\n\t\taddRxPlugin(RxDBDevModePlugin);\n\t}\n\n\t// add debugging\n\t// @ts-ignore\n\t// import('pouchdb-debug').then((pouchdbDebug) => {\n\t// \tPouchDB.plugin(pouchdbDebug.default);\n\t// \tPouchDB.debug.enable('*');\n\t// });\n}\n\n// @ts-ignore\naddRxPlugin(collectionsHelper);\n// @ts-ignore\naddRxPlugin(removeChildren);\naddRxPlugin(RxDBGenerateIdPlugin);\naddRxPlugin(RxDBLocalDocumentsPlugin);\n// addRxPlugin(RxDBNoValidatePlugin);\naddRxPlugin(RxDBValidatePlugin);\naddRxPlugin(RxDBQueryBuilderPlugin);\naddRxPlugin(RxDBUpdatePlugin);\naddRxPlugin(RxDBLeaderElectionPlugin);\naddRxPlugin(RxDBWooCommerceRestApiSyncPlugin);\n\n/**\n * creates the generic database\n */\nexport async function _createDB<T>(name: string) {\n\tconst db = await createRxDatabase<T>({\n\t\tname,\n\t\tignoreDuplicate: process.env.NODE_ENV === 'development',\n\t\t// ...config,\n\t\t// pouchSettings: { revs_limit: 1, auto_compaction: true },\n\t\tstorage: getRxStoragePouch('idb', { revs_limit: 1, auto_compaction: true })\n\t});\n\n\t// add to window for debugging\n\tif (Platform.OS === 'web') {\n\t\tif (!(window as any).dbs) {\n\t\t\tset(window, 'dbs', {});\n\t\t}\n\t\t(window as any).dbs[name] = db;\n\t}\n\n\treturn db;\n}\n\n/**\n * types for the Users database\n */\nexport type UserDatabaseCollections = {\n\tlogs: import('./collections/logs').LogCollection;\n\tusers: import('./collections/users').UserCollection;\n\tsites: import('./collections/sites').SiteCollection;\n\twp_credentials: import('./collections/wp-credentials').WPCredentialsCollection;\n\tstores: import('./collections/sites').SiteCollection;\n};\nexport type UserDatabase = import('rxdb').RxDatabase<UserDatabaseCollections>;\n\n/**\n * creates the Users database\n */\nexport async function _createUsersDB() {\n\tconst db = await _createDB<UserDatabaseCollections>('wcposusers');\n\t// @ts-ignore\n\tconst collections = await db.addCollections(userCollections);\n\n\treturn db;\n}\n\n/**\n * types for the Store database\n */\nexport type StoreDatabaseCollections = {\n\tproducts: import('./collections/products').ProductCollection;\n\torders: import('./collections/orders').OrderCollection;\n\tline_items: import('./collections/line-items').LineItemCollection;\n\tfee_lines: import('./collections/fee-lines').FeeLineCollection;\n\tshipping_lines: import('./collections/shipping-lines').ShippingLineCollection;\n\tcustomers: import('./collections/customers').CustomerCollection;\n\ttaxes: import('./collections/taxes').TaxRateCollection;\n};\nexport type StoreDatabase = import('rxdb').RxDatabase<StoreDatabaseCollections>;\n\n/**\n * creates the Store database\n */\nexport async function _createStoresDB(name: string, baseURL: string, jwt: string) {\n\tconst db = await _createDB<StoreDatabaseCollections>(name);\n\tconst httpClient = axios.create({\n\t\tbaseURL,\n\t\theaders: { 'X-WCPOS': '1', Authorization: `Bearer ${jwt}` },\n\t});\n\tObject.assign(db, { httpClient });\n\n\t// @ts-ignore\n\tconst collections = await db.addCollections(storeCollections);\n\n\t/**\n\t * Attach hooks for each collection\n\t */\n\t// forEach(collections, (collection) => {\n\t// \tforEach(collection.options.hooks, (hook, key) => {\n\t// \t\tconst { handle, parallel } = hook;\n\t// \t\tcollection[key](handle, parallel);\n\t// \t});\n\n\t// \tcollection.preInsert((plainData: Record<string, unknown>) => {\n\t// \t\tconst promises: Promise<any>[] = [];\n\t// \t\tparsePlainData(plainData, collection);\n\n\t// \t\t/**\n\t// \t\t * This allows each collection to manage plainData coming from the WC REST API\n\t// \t\t * It loops through each property and calls collection.preInsert{Property}\n\t// \t\t * if it exists\n\t// \t\t */\n\t// \t\tforEach(plainData, (data, key) => {\n\t// \t\t\tconst preInsertKey = camelCase(`preInsert-${key}`);\n\t// \t\t\tif (isFunction(collection[preInsertKey])) {\n\t// \t\t\t\tpromises.push(collection[preInsertKey](plainData, collection, db));\n\t// \t\t\t}\n\t// \t\t});\n\n\t// \t\treturn Promise.all(promises).then(() => plainData);\n\t// \t}, false);\n\n\t// \tcollection.preSave((plainData: Record<string, unknown>, rxDocument) => {\n\t// \t\tparsePlainData(plainData, collection);\n\t// \t}, false);\n\t// });\n\n\treturn db;\n}\n\n/**\n * Database Service Interface\n */\nexport interface IDatabaseService {\n\tUSER_DB_CREATE_PROMISE: Promise<UserDatabase>;\n\tSTORE_DB_CREATE_PROMISE: Promise<StoreDatabase | undefined>;\n\tgetUserDB: () => Promise<UserDatabase>;\n\tgetStoreDB: (name: string, baseURL: string, jwt: string) => Promise<StoreDatabase | undefined>;\n}\n\n/**\n * Database Service\n */\nconst DatabaseService: IDatabaseService = {\n\tUSER_DB_CREATE_PROMISE: _createUsersDB(),\n\tSTORE_DB_CREATE_PROMISE: Promise.resolve(undefined),\n\n\tasync getUserDB() {\n\t\treturn this.USER_DB_CREATE_PROMISE;\n\t},\n\n\tasync getStoreDB(name, baseURL, jwt) {\n\t\tconst db = await this.STORE_DB_CREATE_PROMISE;\n\t\tif (!db) {\n\t\t\tthis.STORE_DB_CREATE_PROMISE = _createStoresDB(name, baseURL, jwt);\n\t\t} else if (db?.name !== name) {\n\t\t\tawait db?.destroy();\n\t\t\tthis.STORE_DB_CREATE_PROMISE = _createStoresDB(name, baseURL, jwt);\n\t\t}\n\t\treturn this.STORE_DB_CREATE_PROMISE;\n\t},\n};\n\nexport { checkAdapter, DatabaseService, isRxDatabase };\n","import * as React from 'react';\n// import PortalManager from './manager';\n\ninterface PortalContext {\n\tcomponents: { [key: string]: React.ReactNode };\n\tsetComponent: (key: string, component: null | React.ReactNode) => void;\n}\n\nexport const PortalContext = React.createContext<PortalContext>({\n\tcomponents: {},\n\tsetComponent: () => {},\n});\n\ninterface Props {\n\tchildren: React.ReactNode;\n}\n\nconst Provider = ({ children }: Props) => {\n\tconst [components, setComponents] = React.useState<{ [key: string]: React.ReactNode }>({});\n\n\tconst setComponent = React.useCallback<PortalContext['setComponent']>(\n\t\t(key, component) => {\n\t\t\tsetComponents((prev) => ({ ...prev, [key]: component || null }));\n\t\t},\n\t\t[setComponents]\n\t);\n\n\treturn (\n\t\t<PortalContext.Provider value={{ components, setComponent }}>\n\t\t\t{children}\n\t\t\t{/* <PortalManager /> */}\n\t\t</PortalContext.Provider>\n\t);\n};\n\nexport default Provider;\n","import * as React from 'react';\nimport uniqueId from 'lodash/uniqueId';\nimport { PortalContext } from './provider';\n\ninterface Props {\n\tchildren: React.ReactNode;\n\tkeyPrefix: string;\n}\n\nconst Portal = ({ children, keyPrefix = '' }: Props) => {\n\tconst key = React.useMemo(() => uniqueId(keyPrefix), [keyPrefix]);\n\tconst { setComponent } = React.useContext(PortalContext);\n\n\t// When content of Component is updated, update it in the Context too\n\tReact.useEffect(() => setComponent(key, children), [children, setComponent, key]);\n\n\t// Removes the Component from the DOM once it is unmounted\n\tReact.useEffect(\n\t\t() => () => {\n\t\t\tsetComponent(key, null);\n\t\t},\n\t\t[]\n\t);\n\n\treturn null;\n};\n\nexport default Portal;\n","import * as React from 'react';\nimport values from 'lodash/values';\nimport { PortalContext } from './provider';\n\nconst Manager = () => {\n\tconst { components } = React.useContext(PortalContext);\n\treturn <>{values(components)}</>;\n};\n\nexport default Manager;\n","import Portal from './portal';\nimport Provider from './provider';\nimport Manager from './manager';\n\nexport default Object.assign(Portal, { Provider, Manager });\n","import styled from 'styled-components/native';\n\ntype TextProps = import('./text').TextProps;\n\nexport const Text = styled.Text<TextProps>`\n\tcolor: ${({ type, theme }) => {\n\t\tswitch (type) {\n\t\t\tcase 'secondary':\n\t\t\t\treturn theme.TEXT_COLOR_SECONDARY;\n\t\t\tcase 'attention':\n\t\t\t\treturn theme.TEXT_COLOR_ATTENTION;\n\t\t\tcase 'critical':\n\t\t\t\treturn theme.TEXT_COLOR_CRITICAL;\n\t\t\tcase 'info':\n\t\t\t\treturn theme.TEXT_COLOR_INFO;\n\t\t\tcase 'success':\n\t\t\t\treturn theme.TEXT_COLOR_SUCCESS;\n\t\t\tcase 'warning':\n\t\t\t\treturn theme.TEXT_COLOR_WARNING;\n\t\t\tcase 'inverse':\n\t\t\t\treturn theme.TEXT_COLOR_INVERSE;\n\t\t\tdefault:\n\t\t\t\treturn theme.TEXT_COLOR;\n\t\t}\n\t}};\n\tfont-family: ${({ theme }) => theme.FONT_FAMILY};\n\tfont-style: ${({ italic }) => (italic ? 'italic' : 'normal')};\n\tfont-weight: ${({ weight, theme }) => {\n\t\tswitch (weight) {\n\t\t\tcase 'bold':\n\t\t\t\treturn theme.FONT_WEIGHT_BOLD;\n\t\t\tcase 'light':\n\t\t\t\treturn theme.FONT_WEIGHT_LIGHT;\n\t\t\tdefault:\n\t\t\t\treturn theme.FONT_WEIGHT;\n\t\t}\n\t}};\n\tfont-size: ${({ size, theme }) => {\n\t\tswitch (size) {\n\t\t\tcase 'large':\n\t\t\t\treturn theme.FONT_SIZE_LARGE;\n\t\t\tcase 'small':\n\t\t\t\treturn theme.FONT_SIZE_SMALL;\n\t\t\tdefault:\n\t\t\t\treturn theme.FONT_SIZE;\n\t\t}\n\t}};\n\ttext-align: ${({ align }) => align || 'left'};\n\ttext-transform: ${({ uppercase }) => (uppercase ? 'uppercase' : 'none')};\n`;\n","import axios from 'axios';\nimport { encode as btoa } from 'base-64';\n\nexport const noConfigAxios = axios;\n\nconst user = {\n\tkey: 'ck_3a5b30b5570a020fa613a7be5cdfc516c21e8371',\n\tsecret: 'cs_a57adc1116df21dac39a0483cd635f2d3becfb6b',\n};\n\n/**\n * React Native does not have global btoa\n */\n\n/**\n * Create axios instance with default config\n */\nconst http = axios.create({\n\t// baseURL: 'https://wcposdev.wpengine.com/wp-json/wc/v3/',\n\t// timeout: 1000,\n\t// headers: { 'X-WCPOS': '1' },\n});\n\nhttp.interceptors.request.use(\n\tfunction (config) {\n\t\tif (config.method !== 'head') {\n\t\t\tconfig.headers['X-WCPOS'] = 1;\n\t\t}\n\t\tif (config.auth) {\n\t\t\tconfig.headers.Authorization = `Basic ${btoa(\n\t\t\t\t`${config.auth.username}:${config.auth.password}`\n\t\t\t)}`;\n\t\t\tconfig.auth = undefined;\n\t\t}\n\t\treturn config;\n\t},\n\tfunction (error) {\n\t\tdebugger;\n\t\treturn Promise.reject(error);\n\t}\n);\n\nObject.assign(http, { CancelToken: axios.CancelToken, isCancel: axios.isCancel });\n\nexport default http;\n","export { Pressable as default } from './pressable';\n","import styled, { css } from 'styled-components/native';\nimport Platform from '@wcpos/common/src/lib/platform';\n\ntype SegmentProps = import('./segment').SegmentProps;\ntype StyledSegmentProps = Pick<SegmentProps, 'raised' | 'group' | 'grow' | 'type'>;\n\nexport const Segment = styled.View<StyledSegmentProps>`\n\tbackground: ${({ theme }) => theme.SEGMENT_BACKGROUND_COLOR};\n\tborder-width: ${({ theme }) => theme.SEGMENT_BORDER_WIDTH};\n\tborder-color: ${({ theme }) => theme.SEGMENT_BORDER_COLOR};\n\tborder-style: solid;\n\tborder-radius: ${({ group, theme }) => (group === 'middle' ? '0' : theme.SEGMENT_BORDER_RADIUS)};\n\tpadding: ${({ theme, grow }) => (grow ? 0 : theme.SEGMENT_PADDING)};\n\tmargin-bottom: ${({ group, theme }) => (group ? '0' : theme.SEGMENT_MARGIN_BOTTOM)};\n\tflex: ${({ grow }) => (grow ? '1' : '0 1 auto')};\n\n\t${({ group }) =>\n\t\tgroup === 'first' &&\n\t\tcss`\n\t\t\tborder-bottom-left-radius: 0;\n\t\t\tborder-bottom-right-radius: 0;\n\t\t`}\n\n\t${({ group }) =>\n\t\tgroup === 'last' &&\n\t\tcss`\n\t\t\tborder-top-left-radius: 0;\n\t\t\tborder-top-right-radius: 0;\n\t\t\tborder-top-width: 0;\n\t\t`}\n    \n  ${({ group }) =>\n\t\tgroup === 'middle' &&\n\t\tcss`\n\t\t\tborder-top-width: 0;\n\t\t`}\n\n\t${({ raised }) =>\n\t\traised &&\n\t\tPlatform.select({\n\t\t\tandroid: css`\n\t\t\t\televation: 2;\n\t\t\t`,\n\t\t\tdefault: css`\n\t\t\t\tbox-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);\n\t\t\t`,\n\t\t})}\n`;\n\ntype SegmentGroupProps = import('./group').SegmentGroupProps;\ntype StyledGroupProps = Pick<SegmentGroupProps, 'raised' | 'flexDirection' | 'group' | 'grow'>;\n\n// height: inherit;\n/**\n * Note: height 'inherit' caused app to crash on mobile\n */\nexport const Group = styled.View<StyledGroupProps>`\n\tflex-direction: ${({ flexDirection }) => flexDirection};\n\tflex: ${({ grow }) => (grow ? '1' : '0 1 auto')};\n\theight: 100%;\n\tmax-height: 100%;\n\twidth: 100%;\n\n\t${({ raised }) =>\n\t\traised &&\n\t\tPlatform.select({\n\t\t\tandroid: css`\n\t\t\t\televation: 2;\n\t\t\t`,\n\t\t\tdefault: css`\n\t\t\t\tbox-shadow: 2px 2px 8px rgba(0, 0, 0, 0.2);\n\t\t\t`,\n\t\t})};\n`;\n","import * as React from 'react';\nimport { ViewStyle } from 'react-native';\nimport Text from '../text';\nimport ErrorBoundary from '../error-boundary';\nimport * as Styled from './styles';\nimport { SegmentGroup } from './group';\n\n/**\n *\n */\nexport interface SegmentProps {\n\t/**\n\t *\n\t */\n\tchildren?: React.ReactNode;\n\tcontent?: React.ReactNode;\n\ttype?: 'body' | 'footer' | 'header';\n\tdisabled?: boolean;\n\tloading?: boolean;\n\traised?: boolean;\n\tgroup?: 'first' | 'middle' | 'last';\n\tstyle?: ViewStyle;\n\tgrow?: boolean;\n}\n\n/**\n *\n */\nexport const Segment = ({\n\tchildren,\n\tcontent,\n\tgroup,\n\tgrow,\n\ttype,\n\traised = true,\n\tstyle,\n}: SegmentProps) => {\n\tlet segment = content || children || '';\n\tif (typeof segment === 'string' || typeof segment === 'number') {\n\t\tsegment = <Text>{segment}</Text>;\n\t}\n\n\treturn (\n\t\t<Styled.Segment style={[style]} group={group} type={type} raised={raised} grow={grow}>\n\t\t\t<ErrorBoundary>{segment}</ErrorBoundary>\n\t\t</Styled.Segment>\n\t);\n};\n\nSegment.Group = SegmentGroup;\n","// @TODO - fix typescript\nimport * as React from 'react';\nimport * as Styled from './styles';\n\ntype Segment = typeof import('./segment').Segment;\n\nexport interface SegmentGroupProps {\n\tchildren: React.ReactElement<Segment>[] | React.ReactElement<Segment>;\n\tstyle?: import('react-native').ViewStyle;\n\traised?: boolean;\n\tflexDirection?: 'row' | 'column';\n\tgroup?: 'first' | 'middle' | 'last';\n\tgrow?: boolean;\n}\n\nexport const SegmentGroup = ({\n\tchildren,\n\tflexDirection = 'column',\n\tstyle,\n\traised = true,\n\tgroup,\n\tgrow,\n}: SegmentGroupProps): JSX.Element => {\n\tconst count = React.Children.count(children);\n\n\tif (count === 1) {\n\t\t// @ts-ignore\n\t\treturn <Styled.Group style={style}>{children}</Styled.Group>;\n\t}\n\n\treturn (\n\t\t<Styled.Group style={style} raised={raised} flexDirection={flexDirection} grow={grow}>\n\t\t\t{React.Children.map(children, (child, index) => {\n\t\t\t\tif (React.isValidElement(child)) {\n\t\t\t\t\tconst props: { group?: 'first' | 'middle' | 'last'; raised?: boolean } = {\n\t\t\t\t\t\tgroup: 'middle',\n\t\t\t\t\t\traised: false,\n\t\t\t\t\t};\n\t\t\t\t\tif (index === 0 && group !== 'middle') {\n\t\t\t\t\t\tprops.group = 'first';\n\t\t\t\t\t}\n\t\t\t\t\tif (index === count - 1 && group !== 'middle') {\n\t\t\t\t\t\tprops.group = 'last';\n\t\t\t\t\t}\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\treturn React.cloneElement(child as React.ReactElement<Segment>, props);\n\t\t\t\t}\n\t\t\t\treturn [];\n\t\t\t})}\n\t\t</Styled.Group>\n\t);\n};\n","import * as React from 'react';\nimport Animated, {\n\tuseSharedValue,\n\tuseAnimatedStyle,\n\twithRepeat,\n\twithTiming,\n\twithSequence,\n} from 'react-native-reanimated';\nimport { StyleSheet, ViewStyle } from 'react-native';\nimport * as Styled from './styles';\n\n/**\n *\n */\nexport type Borders = 'square' | 'rounded' | 'circular';\n\n/**\n *\n */\nexport interface SkeletonProps {\n\t/**\n\t *\n\t */\n\twidth?: number | string;\n\t/**\n\t *\n\t */\n\theight?: number | string;\n\t/**\n\t *\n\t */\n\tborder?: Borders;\n\t/**\n\t *\n\t */\n\tstyle?: ViewStyle;\n}\n\nconst timingConfig: Animated.WithTimingConfig = {\n\tduration: 1600,\n};\n\n/**\n *\n */\nexport const Skeleton = ({ width, height, border = 'rounded', style }: SkeletonProps) => {\n\tconst pulseColor = useSharedValue('#e1e9ee');\n\tconst animatedBackground = useAnimatedStyle(() => ({\n\t\tbackgroundColor: pulseColor.value,\n\t}));\n\n\tReact.useEffect(() => {\n\t\tpulseColor.value = withRepeat(\n\t\t\twithSequence(withTiming('#edf2f5', timingConfig), withTiming('#e1e9ee', timingConfig)),\n\t\t\t-1\n\t\t) as unknown as string; // typings are wrong for withTiming\n\t}, []);\n\n\treturn (\n\t\t<Styled.Container\n\t\t\tas={Animated.View}\n\t\t\tstyle={[{ width, height }, style, animatedBackground]}\n\t\t\tborder={border}\n\t\t/>\n\t);\n};\n","import * as React from 'react';\nimport {\n\tLayoutRectangle,\n\tView,\n\tViewProps,\n\tStyleSheet,\n\tfindNodeHandle,\n\tMeasureLayoutOnSuccessCallback,\n\tDimensions,\n} from 'react-native';\n\ninterface SizeProvider {\n\t/**\n\t * Get the layout of `AppProvider`.\n\t *\n\t * X and Y positions are relative to Window.\n\t *\n\t * Width and Height are dimensions of `AppProvider`.\n\t */\n\tlayout: LayoutRectangle;\n\t/**\n\t * Measure a View relative to its `AppProvider`.\n\t *\n\t * **Note:** Prefer using `View.onLayout` if you don't need X and Y\n\t * coordinates of View relative to `AppProvider`.\n\t *\n\t * @param ref Reference to the View to measure.\n\t * @param callback Function called once the View has been measured\n\t * (not returned directly because of limitations of React Native).\n\t */\n\tmeasure: (ref: View, callback: MeasureLayoutOnSuccessCallback) => void;\n}\n\nexport interface AppProviderSizeProviderProps {\n\tchildren: React.ReactNode;\n}\n\n// Default layout, use window size by default...\nconst LAYOUT_DEFAULT: LayoutRectangle = { ...Dimensions.get('window'), x: 0, y: 0 };\n\nconst SizeContext = React.createContext<SizeProvider>({\n\tlayout: LAYOUT_DEFAULT,\n\t// @ts-ignore\n\tmeasure: () => {},\n});\n\n/**\n * Supply size of AppProvider and ability to get view position relative to AppProvider.\n */\nexport const AppProviderSizeProvider: React.FC<AppProviderSizeProviderProps> = ({ children }) => {\n\tconst ref = React.useRef<View>(null);\n\tconst [layout, setLayout] = React.useState(LAYOUT_DEFAULT);\n\tconst onLayout = React.useCallback<Required<ViewProps>['onLayout']>(\n\t\t({ nativeEvent }) => setLayout(nativeEvent.layout),\n\t\t[]\n\t);\n\n\tconst measure = React.useCallback<SizeProvider['measure']>(\n\t\t(otherRef, callback) => {\n\t\t\tif (ref.current) {\n\t\t\t\totherRef.measureLayout(\n\t\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n\t\t\t\t\tfindNodeHandle(ref.current)!,\n\t\t\t\t\tcallback,\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t() => {} // We don't do anything when failure occurs\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t[ref.current]\n\t);\n\n\treturn (\n\t\t<View ref={ref} style={{ flex: 1 }} onLayout={onLayout}>\n\t\t\t<SizeContext.Provider value={{ layout, measure }}>{children}</SizeContext.Provider>\n\t\t</View>\n\t);\n};\n\n/**\n * Provide dimensions of `AppProvider`. X and Y positions are relative to Window.\n */\nexport const useAppProviderDimensions = (): LayoutRectangle => React.useContext(SizeContext).layout;\n\n/**\n * Provides position of a View in `AppProvider`. First render will return `null` and correct\n * layout will be returned after Native layout pass has been performed.\n *\n * Prefer usage of `View.onLayout` prop, which is more performant. Use only if necessary to\n * obtain View position relative to `AppProvider`.\n *\n * @param ref Reference to the View to measure.\n */\nexport const usePositionInAppProvider = (ref: View | null): LayoutRectangle | null => {\n\tconst [layout, setLayout] = React.useState<LayoutRectangle | null>(null);\n\tconst { measure, layout: providerLayout } = React.useContext(SizeContext);\n\n\tReact.useEffect(() => {\n\t\tif (ref) {\n\t\t\tmeasure(ref, (x, y, width, height) => setLayout({ x, y, width, height }));\n\t\t}\n\t}, [\n\t\tproviderLayout, // Retrigger measurement if AppProvider layout changes changes\n\t\tref,\n\t]);\n\n\treturn layout;\n};\n\nexport default usePositionInAppProvider;\n","import styled from 'styled-components/native';\nimport { StyleSheet } from 'react-native';\nimport { Text as StyledText } from '../text/styles';\n\nexport const View = styled.View`\n\t${{ ...StyleSheet.absoluteFillObject }}\n`;\n\nexport const Container = styled.View`\n\t${{ ...StyleSheet.absoluteFillObject }}\n\talign-items: flex-end;\n`;\n\nexport const Snackbar = styled.View`\n\tmargin-horizontal: 5px;\n\tmargin-vertical: 5px;\n\tbackground-color: ${({ theme }) => theme.SNACKBAR_BACKGROUND_COLOR};\n\tborder-radius: ${({ theme }) => theme.SNACKBAR_RADIUS};\n\tpadding: ${({ theme }) => `${theme.SNACKBAR_PADDING_Y} ${theme.SNACKBAR_PADDING_X}`};\n\twidth: ${({ theme }) => theme.SNACKBAR_WIDTH};\n\tflex-direction: row;\n\talign-items: center;\n`;\n\nexport const Text = styled(StyledText)`\n\tcolor: ${({ theme }) => theme.SNACKBAR_TEXT_COLOR};\n\tflex: 1;\n`;\n","import styled from 'styled-components/native';\nimport Pressable from '../pressable';\n\nexport const Container = styled.View`\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\talign-items: flex-start;\n\tz-index: ${({ theme }) => theme.POPOVER_Z_INDEX};\n`;\n\nexport const Popover = styled.View`\n\tbackground-color: ${({ theme }) => theme.POPOVER_BACKGROUND_COLOR};\n\tshadow-offset: { width: 0, height: 1 };\n\tshadow-opacity: 0.22;\n\tshadow-radius: 7.5px;\n\tshadow-color: #000;\n\tpadding: 5px;\n\tborder-radius: 3px;\n`;\n\nexport const PressableItem = styled(Pressable)`\n\tpadding: 5px;\n\tflex-direction: row;\n\talign-items: center;\n`;\n","import * as React from 'react';\n\nfunction useWhyDidYouUpdate(name: string, props: any) {\n\t// Get a mutable ref object where we can store props ...\n\t// ... for comparison next time this hook runs.\n\tconst previousProps = React.useRef();\n\tReact.useEffect(() => {\n\t\tif (previousProps.current) {\n\t\t\t// Get all keys from previous and current props\n\t\t\t// @ts-ignore\n\t\t\tconst allKeys = Object.keys({ ...previousProps.current, ...props });\n\t\t\t// Use this object to keep track of changed props\n\t\t\tconst changesObj = {};\n\t\t\t// Iterate through keys\n\t\t\tallKeys.forEach((key) => {\n\t\t\t\t// If previous is different from current\n\t\t\t\t// @ts-ignore\n\t\t\t\tif (previousProps.current[key] !== props[key]) {\n\t\t\t\t\t// Add to changesObj\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tchangesObj[key] = {\n\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\tfrom: previousProps.current[key],\n\t\t\t\t\t\tto: props[key],\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t\t// If changesObj not empty then output to console\n\t\t\tif (Object.keys(changesObj).length) {\n\t\t\t\tconsole.log('[why-did-you-update]', name, changesObj);\n\t\t\t}\n\t\t}\n\t\t// Finally update previousProps with current props for next hook call\n\t\tpreviousProps.current = props;\n\t});\n}\n\nexport default useWhyDidYouUpdate;\n","import * as React from 'react';\nimport { StyleProp, ViewStyle } from 'react-native';\nimport { decode } from 'html-entities';\nimport * as Styled from './styles';\n\nexport interface TextProps {\n\t/**\n\t *\n\t */\n\talign?: 'left' | 'right' | 'center' | 'justify';\n\t/**\n\t *\n\t */\n\tchildren: React.ReactNode;\n\t/**\n\t *\n\t */\n\titalic?: boolean;\n\t/**\n\t *\n\t */\n\tonPress?: () => void;\n\t/**\n\t *\n\t */\n\tsize?: 'normal' | 'large' | 'small';\n\t/**\n\t *\n\t */\n\tstyle?: StyleProp<ViewStyle>;\n\t/**\n\t *\n\t */\n\ttype?: import('@wcpos/common/src/themes').ColorTypes;\n\t/**\n\t *\n\t */\n\tuppercase?: boolean;\n\t/**\n\t *\n\t */\n\tweight?: 'normal' | 'bold' | 'light';\n}\n\nexport const Text = ({\n\talign = 'left',\n\tchildren,\n\titalic,\n\tonPress,\n\tsize = 'normal',\n\tstyle = {},\n\ttype = 'primary',\n\tuppercase,\n\tweight = 'normal',\n}: TextProps) => {\n\treturn (\n\t\t<Styled.Text\n\t\t\talign={align}\n\t\t\titalic={italic}\n\t\t\tonPress={onPress}\n\t\t\tsize={size}\n\t\t\t// @ts-ignore\n\t\t\tstyle={style}\n\t\t\ttype={type}\n\t\t\tuppercase={uppercase}\n\t\t\tweight={weight}\n\t\t>\n\t\t\t{typeof children === 'string' ? decode(children) : children}\n\t\t</Styled.Text>\n\t);\n};\n","import * as React from 'react';\nimport { View, Text } from 'react-native';\nimport Icon from '../icon';\nimport Button from '../button';\n\ninterface Props {\n\tcomponentStack: string;\n\terror: Error;\n\tresetErrorBoundary: () => void;\n}\n\n/**\n *\n */\nconst Fallback: React.FC<Props> = ({ componentStack, error, resetErrorBoundary }) => (\n\t<View>\n\t\t<Icon name=\"error\" />\n\t\t<Text>Error Boundary Fallback</Text>\n\t\t{/* <p>We're sorry — something's gone wrong.</p>\n\t\t<p>Our team has been notified, but click here fill out a report.</p> */}\n\t\t{/* {error && (\n\t\t\t<pre>\n\t\t\t\t{error.toString()}\n\t\t\t\t<br />\n\t\t\t\t<br />\n\t\t\t\tThis is located at: {componentStack}\n\t\t\t</pre>\n\t\t)} */}\n\t\t<Text>Something went wrong:</Text>\n\t\t<Text>{error.message}</Text>\n\t\t{/* <Text>{componentStack}</Text> */}\n\t\t<Button onPress={resetErrorBoundary} title=\"Try again\" />\n\t</View>\n);\n\nexport default Fallback;\n","import * as React from 'react';\nimport DefaultFallbackComponent from './fallback';\n\nconst changedArray = (a: Array<unknown> = [], b: Array<unknown> = []) =>\n\ta.length !== b.length || a.some((item, index) => !Object.is(item, b[index]));\n\ninterface FallbackProps {\n\terror: Error;\n\tresetErrorBoundary: (...args: Array<unknown>) => void;\n}\n\ninterface ErrorBoundaryPropsWithComponent {\n\tonResetKeysChange?: (\n\t\tprevResetKeys: Array<unknown> | undefined,\n\t\tresetKeys: Array<unknown> | undefined\n\t) => void;\n\tonReset?: (...args: Array<unknown>) => void;\n\tonError?: (error: Error, info: { componentStack: string }) => void;\n\tresetKeys?: Array<unknown>;\n\tFallbackComponent: React.ComponentType<FallbackProps>;\n}\n\ndeclare function FallbackRender(\n\tprops: FallbackProps\n): React.ReactElement<unknown, string | React.FunctionComponent | typeof React.Component> | null;\n\ninterface ErrorBoundaryPropsWithRender {\n\tonResetKeysChange?: (\n\t\tprevResetKeys: Array<unknown> | undefined,\n\t\tresetKeys: Array<unknown> | undefined\n\t) => void;\n\tonReset?: (...args: Array<unknown>) => void;\n\tonError?: (error: Error, info: { componentStack: string }) => void;\n\tresetKeys?: Array<unknown>;\n\tfallbackRender: typeof FallbackRender;\n}\n\ninterface ErrorBoundaryPropsWithFallback {\n\tonResetKeysChange?: (\n\t\tprevResetKeys: Array<unknown> | undefined,\n\t\tresetKeys: Array<unknown> | undefined\n\t) => void;\n\tonReset?: (...args: Array<unknown>) => void;\n\tonError?: (error: Error, info: { componentStack: string }) => void;\n\tresetKeys?: Array<unknown>;\n\tfallback: React.ReactElement<\n\t\tunknown,\n\t\tstring | React.FunctionComponent | typeof React.Component\n\t> | null;\n}\n\ntype ErrorBoundaryProps =\n\t| ErrorBoundaryPropsWithFallback\n\t| ErrorBoundaryPropsWithComponent\n\t| ErrorBoundaryPropsWithRender;\n\ntype ErrorBoundaryState = { error: Error | null };\n\nconst initialState: ErrorBoundaryState = { error: null };\n\nclass ErrorBoundary extends React.Component<\n\tReact.PropsWithRef<React.PropsWithChildren<ErrorBoundaryProps>>,\n\tErrorBoundaryState\n> {\n\tstatic defaultProps = {\n\t\tFallbackComponent: DefaultFallbackComponent,\n\t};\n\n\tstatic getDerivedStateFromError(error: Error) {\n\t\treturn { error };\n\t}\n\n\tstate = initialState;\n\tupdatedWithError = false;\n\tresetErrorBoundary = (...args: Array<unknown>) => {\n\t\tthis.props.onReset?.(...args);\n\t\tthis.reset();\n\t};\n\n\treset() {\n\t\tthis.updatedWithError = false;\n\t\tthis.setState(initialState);\n\t}\n\n\t// eslint-disable-next-line react/sort-comp\n\tcomponentDidCatch(error: Error, info: React.ErrorInfo) {\n\t\tthis.props.onError?.(error, info);\n\t}\n\n\tcomponentDidUpdate(prevProps: ErrorBoundaryProps) {\n\t\tconst { error } = this.state;\n\t\tconst { resetKeys } = this.props;\n\n\t\t// There's an edge case where if the thing that triggered the error\n\t\t// happens to *also* be in the resetKeys array, we'd end up resetting\n\t\t// the error boundary immediately. This would likely trigger a second\n\t\t// error to be thrown.\n\t\t// So we make sure that we don't check the resetKeys on the first call\n\t\t// of cDU after the error is set\n\t\tif (error !== null && !this.updatedWithError) {\n\t\t\tthis.updatedWithError = true;\n\t\t\treturn;\n\t\t}\n\n\t\tif (error !== null && changedArray(prevProps.resetKeys, resetKeys)) {\n\t\t\tthis.props.onResetKeysChange?.(prevProps.resetKeys, resetKeys);\n\t\t\tthis.reset();\n\t\t}\n\t}\n\n\trender() {\n\t\tconst { error } = this.state;\n\t\t// @ts-expect-error ts(2339) (at least one of these will be defined though, and we check for their existance)\n\t\tconst { fallbackRender, FallbackComponent, fallback } = this.props;\n\n\t\tif (error !== null) {\n\t\t\tconst props = {\n\t\t\t\terror,\n\t\t\t\tresetErrorBoundary: this.resetErrorBoundary,\n\t\t\t};\n\t\t\tif (React.isValidElement(fallback)) {\n\t\t\t\treturn fallback;\n\t\t\t}\n\t\t\tif (typeof fallbackRender === 'function') {\n\t\t\t\treturn fallbackRender(props);\n\t\t\t}\n\t\t\tif (typeof FallbackComponent === 'function') {\n\t\t\t\treturn <FallbackComponent {...props} />;\n\t\t\t}\n\t\t\tthrow new Error(\n\t\t\t\t'react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop'\n\t\t\t);\n\t\t}\n\n\t\treturn this.props.children;\n\t}\n}\n\nexport default ErrorBoundary;\n","import Boundary from './boundary';\nimport FallbackComponent from './fallback';\n\nexport { FallbackComponent };\nexport default Boundary;\n","import styled from 'styled-components/native';\nimport { Pressable as RNPressable } from 'react-native';\n\nexport const Pressable = styled(RNPressable)`\n\tflex-direction: row;\n`;\n","import * as React from 'react';\n// @ts-ignore\nimport { PressableProps } from 'react-native-web';\nimport * as Styled from './styles';\n\n/**\n *\n */\nexport const Pressable = (props: PressableProps) => {\n\treturn <Styled.Pressable {...props} />;\n};\n","export { Skeleton as default } from './skeleton';\n","export { Backdrop as default } from './backdrop';\n","// https://github.com/thlorenz/parse-link-header\nimport assignIn from 'lodash/assignIn';\nimport url from 'url';\n\nfunction hasRel(x: { [key: string]: string }) {\n\treturn x && x.rel;\n}\n\nfunction intoRels(acc: { [key: string]: { [key: string]: string } }, x: { [key: string]: string }) {\n\tfunction splitRel(rel: string) {\n\t\tacc[rel] = assignIn({}, x, { rel });\n\t}\n\n\tx.rel.split(/\\s+/).forEach(splitRel);\n\n\treturn acc;\n}\n\nfunction createObjects(acc: { [key: string]: string }, p: string) {\n\t// rel=\"next\" => 1: rel 2: next\n\tconst m = p.match(/\\s*(.+)\\s*=\\s*\"?([^\"]+)\"?/);\n\tif (m) {\n\t\tacc[m[1]] = m[2];\n\t}\n\treturn acc;\n}\n\nfunction parseLink(link: string) {\n\tlet info = {};\n\tconst m = link.match(/<?([^>]*)>(.*)/);\n\tif (m) {\n\t\tconst linkUrl = m[1];\n\t\tconst parts = m[2].split(';');\n\t\tconst parsedUrl = url.parse(linkUrl, true);\n\t\tparts.shift();\n\t\tinfo = parts.reduce(createObjects, {});\n\t\tinfo = assignIn({}, parsedUrl.query, info, { url: linkUrl });\n\t}\n\treturn info;\n}\n\nexport default function (linkHeader = '') {\n\tconst p = linkHeader.split(/,\\s*</).map(parseLink).filter(hasRel);\n\n\treturn p.reduce(intoRels, {});\n}\n","import Url from 'url-parse';\nimport parseLinkHeader from './parse-link-header';\n\nObject.assign(Url, { parseLinkHeader });\nexport default Url;\n","import * as React from 'react';\n\nexport interface PopoverContext {\n\trequestClose: () => void;\n}\n\n/**\n * Context providing ability to Popover Items to dismiss the Popover.\n */\n// @ts-ignore\nexport const PopoverContext = React.createContext<PopoverContext>({ requestClose: () => {} });\n","import * as React from 'react';\nimport { useTheme } from 'styled-components/native';\nimport Text from '../text';\nimport Icon from '../icon';\nimport { PopoverContext } from './context';\nimport * as Styled from './styles';\n\nexport interface ItemProps {\n\t/**\n\t * Label of the Item.\n\t */\n\tlabel: string;\n\t/**\n\t * Optional Icon.\n\t */\n\ticon?: any;\n\t/**\n\t * Color of the Icon.\n\t */\n\ticonColor?: any;\n\t/**\n\t * Action to execute on click.\n\t */\n\tonSelect?: () => void;\n\t/**\n\t * Set to `true` to disable the option.\n\t */\n\tdisabled?: boolean;\n}\n\n/**\n * Action to display in a `Popover`.\n */\nexport const Item = ({\n\tlabel,\n\ticon,\n\ticonColor,\n\tonSelect: onSelectRaw = () => {},\n\tdisabled = false,\n}: ItemProps) => {\n\tconst theme = useTheme();\n\n\tconst { requestClose } = React.useContext(PopoverContext);\n\n\t// Make sure to close the Popover after calling onSelect\n\tconst onSelect = React.useCallback(() => {\n\t\tonSelectRaw();\n\t\trequestClose();\n\t}, [requestClose, onSelectRaw]);\n\n\tconst styles = React.useCallback(\n\t\t({ hovered, focused }) => {\n\t\t\treturn hovered || focused\n\t\t\t\t? { backgroundColor: theme.MENU_ITEM_HOVER_BACKGROUND_COLOR }\n\t\t\t\t: undefined;\n\t\t},\n\t\t[theme.MENU_ITEM_HOVER_BACKGROUND_COLOR]\n\t);\n\n\treturn (\n\t\t<Styled.PressableItem onPress={onSelect} disabled={disabled} style={styles}>\n\t\t\t{icon ? <Icon name={icon} color={iconColor} /> : null}\n\t\t\t<Text>{label}</Text>\n\t\t</Styled.PressableItem>\n\t);\n};\n","import * as React from 'react';\nimport { View, LayoutRectangle, StyleProp, ViewStyle } from 'react-native';\nimport usePositionInAppProvider from '@wcpos/common/src/hooks/use-position-in-app';\nimport { Item, ItemProps } from './item';\nimport { PopoverPlacement } from './placements';\nimport { PopoverView } from './view';\nimport { PopoverContext } from './context';\nimport Portal from '../portal';\nimport Backdrop from '../backdrop';\n\n// const PopoverPortals = portals.create('Popover');\n\ntype TextWithOptionalIconAction = any;\n\nexport interface PopoverWithActions {\n\t/**\n\t * Actions to display in the Popover.\n\t */\n\tactions: TextWithOptionalIconAction[];\n\tchildren?: never;\n}\n\nexport interface PopoverWithChildren {\n\t/**\n\t * The content to display inside the Popover.\n\t */\n\tchildren: React.ReactNode;\n\tactions?: never;\n}\n\nexport type PopoverProps = {\n\t/**\n\t * Determines if Popover is visible or not.\n\t */\n\topen: boolean;\n\t/**\n\t * The content which will trigger the Popover. The Popover will be anchored to this component.\n\t */\n\tactivator: React.ReactNode;\n\t/**\n\t * Preferred placement of the Popover. The Popover will try to place itself according to this\n\t * property. However, if there is not enough space left there to show up, it will show itself\n\t * in opposite direction.\n\t *\n\t * For example, if we set `preferredPlacement=\"top\"`, and there is not enough space for the Popover\n\t * to show itself above the triggering view, it will show at the bottom of it.\n\t */\n\tplacement?: PopoverPlacement;\n\t/**\n\t * If true, backdrop will be hidden.\n\t */\n\thideBackdrop?: boolean;\n\t/**\n\t * If true, the popover width will match the width of the activator View.\n\t *\n\t * **IMPORTANT:** Must only be used with `top` or `bottom` placements.\n\t */\n\tmatchWidth?: boolean;\n\t/**\n\t * If true, the popover will appear above the activator view instead of next to it.\n\t */\n\taboveActivator?: boolean;\n\t/**\n\t * Called when the Popover needs to be discarded. This should update `open` property accordingly.\n\t */\n\tonRequestClose: () => void;\n\t/**\n\t * If true, the popover and its backdrop won't be clickable and won't receive mouse events.\n\t *\n\t * For example, this is used by the `Tooltip` component. Prefer using the `Tooltip` component instead\n\t * of this property.\n\t */\n\tclickThrough?: boolean;\n\t/**\n\t * Optional custom style for the Popover View (overlay view).\n\t */\n\tpopoverStyle?: StyleProp<ViewStyle>;\n} & (PopoverWithActions | PopoverWithChildren);\n\nconst LAYOUT_ZERO: LayoutRectangle = { x: 0, y: 0, width: 0, height: 0 };\n\n/**\n * Get the Popover content (either through `children` or `actions`).\n */\nconst useContent = (\n\tactions: TextWithOptionalIconAction[] | undefined,\n\tchildren: React.ReactNode | undefined\n): React.ReactNode =>\n\tReact.useMemo(() => {\n\t\tif (actions && children) {\n\t\t\tconsole.warn(\n\t\t\t\t'Both actions and children are both supplied to Popover. Only actions will be used.'\n\t\t\t);\n\t\t}\n\n\t\tlet content: React.ReactNode = children;\n\n\t\tif (actions) {\n\t\t\tcontent = actions.map(({ label, icon, color, action }, i) => (\n\t\t\t\t// @ts-ignore\n\t\t\t\t<Item key={i} label={label} icon={icon} iconColor={color} onSelect={action} />\n\t\t\t));\n\t\t}\n\t\treturn content;\n\t}, [actions, children]);\n\n/**\n * Popover Implementation Details (for developers usage)\n * ---\n * The Popover is actually rendered near the AppProvider using `PopoverPortal`.\n *\n * Popover view tree can be summarized like this:\n * - AppProvider\n *   - PopoverPortal\n *     - Popover Backdrop View, which shows the backdrop + provides dismissal of Popover on touch.\n *     - PopoverView\n *       - Absolutely positioned container, where height = AppProvider.height and width = AppProvider.width.\n *         Position origin is equal to position of Activator View.\n *         - Actual Popover View displayed to the user. Positioned relatively to its parent.\n *           - Popover children\n *   - ...Views, that can be nested X times\n *     - Popover\n *       - Activator\n */\n\n/**\n * Popovers are small overlays that open on demand. They are meant to access additional content without cluttering the screen.\n */\nexport const Popover: React.FC<PopoverProps> & { Item: typeof Item } = ({\n\topen,\n\tactivator,\n\tactions,\n\tchildren,\n\tplacement = 'bottom',\n\tonRequestClose,\n\thideBackdrop = false,\n\tmatchWidth = false,\n\taboveActivator = false,\n\tclickThrough = false,\n\tpopoverStyle,\n}) => {\n\tconst content = useContent(actions, children);\n\n\tconst ref = React.useRef<View>(null);\n\tconst activatorLayout = usePositionInAppProvider(ref.current); // Get position relative to AppProvider\n\n\treturn (\n\t\t<View ref={ref}>\n\t\t\t{activator}\n\t\t\t{open && (\n\t\t\t\t<Portal keyPrefix=\"Popover\">\n\t\t\t\t\t<PopoverContext.Provider value={{ requestClose: onRequestClose }}>\n\t\t\t\t\t\t<Backdrop\n\t\t\t\t\t\t\topen\n\t\t\t\t\t\t\tinvisible={hideBackdrop}\n\t\t\t\t\t\t\tclickThrough={clickThrough}\n\t\t\t\t\t\t\tonPress={onRequestClose}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<PopoverView\n\t\t\t\t\t\t\tstyle={popoverStyle}\n\t\t\t\t\t\t\topen\n\t\t\t\t\t\t\tplacement={placement}\n\t\t\t\t\t\t\tmatchWidth={matchWidth}\n\t\t\t\t\t\t\tactivatorLayout={activatorLayout ?? LAYOUT_ZERO}\n\t\t\t\t\t\t\taboveActivator={aboveActivator}\n\t\t\t\t\t\t\tclickThrough={clickThrough}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{content}\n\t\t\t\t\t\t</PopoverView>\n\t\t\t\t\t</PopoverContext.Provider>\n\t\t\t\t</Portal>\n\t\t\t)}\n\t\t</View>\n\t);\n};\n\nexport type PopoverItemProps = ItemProps;\nPopover.Item = Item;\n","import styled from 'styled-components/native';\nimport { Text } from '../text/text';\nimport { Skeleton } from '../skeleton/skeleton';\n\nexport const Tag = styled.View<{ disabled?: boolean }>`\n\tflex-direction: row;\n\talign-items: center;\n\tpadding: ${({ theme }) => `${theme.TAG_PADDING_Y} ${theme.TAG_PADDING_X}`};\n\tborder-radius: ${({ theme }) => theme.TAG_BORDER_RADIUS}\n\tbackground-color: ${({ theme, disabled }) =>\n\t\tdisabled ? theme.TAG_BACKGROUND_DISABLED : theme.TAG_BACKGROUND_COLOR};\n`;\n\nexport const Label = styled(Text)`\n\tcolor: ${({ theme }) => theme.TAG_TEXT_COLOR};\n`;\n\nexport const Group = styled.View`\n\tflex-direction: row;\n\tflex-flow: wrap;\n\tmargin-bottom: 2px;\n`;\n\nexport const TagSkeleton = styled(Skeleton)`\n\tborder-radius: ${({ theme }) => theme.TAG_BORDER_RADIUS};\n`;\n","import * as React from 'react';\nimport * as Styled from './styles';\nimport Icon from '../icon';\nimport Pressable from '../pressable';\nimport Skeleton from '../skeleton';\n\nexport interface TagProps {\n\t/**\n\t * Tag label\n\t */\n\tchildren: string;\n\t/**\n\t * Set to `true` add remove icon.\n\t */\n\tremovable?: boolean;\n\t/**\n\t * Set to `true` to disable.\n\t */\n\tdisabled?: boolean;\n\t/**\n\t * Called if remove icon is pressed\n\t */\n\tonRemove?: () => void;\n\t/**\n\t * Called if tag is pressed\n\t */\n\tonPress?: () => void;\n}\n\n/**\n *\n */\nexport const Tag = ({ children, removable, disabled, onRemove, onPress }: TagProps) => {\n\tconst tag = (\n\t\t<Styled.Tag disabled={disabled} style={removable ? { paddingRight: 1 } : {}}>\n\t\t\t<Styled.Label size=\"small\">{children}</Styled.Label>\n\t\t\t{removable && (\n\t\t\t\t<Icon\n\t\t\t\t\tname=\"clear\"\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tonPress={onRemove}\n\t\t\t\t\tbackgroundStyle={{ marginLeft: 2, padding: 0, backgroundColor: 'transparent' }}\n\t\t\t\t\tcolor=\"rgba(255, 255, 255, 0.5)\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</Styled.Tag>\n\t);\n\n\treturn <Pressable onPress={disabled ? undefined : onPress}>{tag}</Pressable>;\n};\n\n/**\n *\n */\nexport interface TagSkeletonProps {\n\t/**\n\t *\n\t */\n\twidth?: number;\n\t/**\n\t *\n\t */\n\theight?: number;\n}\n\n/**\n *\n */\nconst TagSkeleton = ({ width = 50, height = 20 }: TagSkeletonProps) => (\n\t<Styled.TagSkeleton width={width} height={height} />\n);\n\nTag.Skeleton = TagSkeleton;\n","import * as React from 'react';\nimport { Tag } from './tag';\nimport * as Styled from './styles';\n\n/**\n * Action with a Label.\n */\nexport interface TextAction {\n\t/**\n\t * Unique key identifier\n\t */\n\tkey?: string | number;\n\t/**\n\t * Label to display.\n\t */\n\tlabel: string;\n\t/**\n\t * Action to execute on click.\n\t */\n\taction?: () => void;\n}\n\n/**\n *\n */\nexport interface TagGroupProps {\n\t/**\n\t *\n\t */\n\ttags: (TextAction | string)[];\n}\n\n/**\n *\n */\nexport const TagGroup = ({ tags }: TagGroupProps) => {\n\treturn (\n\t\t<Styled.Group>\n\t\t\t{tags.map((tag, i) =>\n\t\t\t\ttypeof tag === 'string' ? (\n\t\t\t\t\t<Tag key={i}>tag</Tag>\n\t\t\t\t) : (\n\t\t\t\t\t<Tag key={tag.key || i} onPress={tag.action}>\n\t\t\t\t\t\t{tag.label}\n\t\t\t\t\t</Tag>\n\t\t\t\t)\n\t\t\t)}\n\t\t</Styled.Group>\n\t);\n};\n\n/**\n *\n */\nexport interface TagGroupSkeletonProps {\n\t/**\n\t *\n\t */\n\tnumberOfTags?: number;\n}\n\n/**\n *\n */\nconst TagGroupSkeleton = ({ numberOfTags = 3 }: TagGroupSkeletonProps) => {\n\treturn (\n\t\t<Styled.Group>\n\t\t\t{Array.from({ length: numberOfTags }, (v, i) => (\n\t\t\t\t<Tag.Skeleton key={i} />\n\t\t\t))}\n\t\t</Styled.Group>\n\t);\n};\n\nTagGroup.Skeleton = TagGroupSkeleton;\n","import { Tag } from './tag';\nimport { TagGroup } from './group';\n\nexport default Object.assign(Tag, { Group: TagGroup });\n","import { useState, useCallback } from 'react';\n\nexport type StateCallback<State> = (newState: State) => void;\n\n/**\n * Let us have an \"Uncontrolled state\" for a React Component.\n * This means that component can optionally receive a \"callback\" prop\n * which should update the main component state. If this \"callback\" prop\n * is not passed, component should itself handle its main state update.\n *\n * @see https://reactjs.org/docs/uncontrolled-components.html\n *\n * @param stateProp The state property passed by the component's user.\n * @param callback Callback passed by the component's user to update the component.\n *\n * @returns The state (controlled or uncontrolled) and the callback function used\n * to update the component (as provided by the component's user).\n */\nexport const useUncontrolledState = <State>(\n\tstateProp: State,\n\tcallback: undefined | StateCallback<State>\n): [State, StateCallback<State>] => {\n\tconst [state, setState] = useState(stateProp);\n\tconst setStateWrapper = useCallback<StateCallback<State>>(\n\t\t(newState) => {\n\t\t\tsetState(newState);\n\t\t\tcallback?.(newState);\n\t\t},\n\t\t[callback, setState]\n\t);\n\n\treturn [\n\t\t// If we have a controlled component, take user's stateProp as is.\n\t\t// Otherwise, use the uncontrolled one.\n\t\tcallback ? stateProp : state,\n\t\tsetStateWrapper,\n\t];\n};\n\nexport default useUncontrolledState;\n","import styled, { css } from 'styled-components/native';\nimport { Skeleton } from '../skeleton/skeleton';\n\ntype Props = Pick<import('./image').ImageProps, 'border'>;\n\nexport const Container = styled.View`\n\tposition: relative;\n\toverflow: hidden;\n`;\n\nexport const Image = styled.Image<Props>`\n\twidth: 100%;\n\theight: 100%;\n\n\t/** Border */\n\t${({ border, theme }) => {\n\t\tswitch (border) {\n\t\t\tcase 'rounded':\n\t\t\t\treturn css`\n\t\t\t\t\tborder-radius: ${theme.IMAGE_BORDER_RADIUS};\n\t\t\t\t`;\n\t\t\tcase 'circular':\n\t\t\t\treturn css`\n\t\t\t\t\tborder-radius: 500px;\n\t\t\t\t`;\n\t\t\tdefault:\n\t\t\t\treturn css`\n\t\t\t\t\tborder-radius: 0px;\n\t\t\t\t`;\n\t\t}\n\t}}\n`;\n\nexport const ImageSkeleton = styled(Skeleton)`\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n`;\n","import * as React from 'react';\nimport { ImageSourcePropType } from 'react-native';\nimport * as Styled from './styles';\nimport Skeleton from '../skeleton';\nimport Text from '../text';\n\nexport interface ImageProps {\n\t/**\n\t * Image source (simple)\n\t */\n\tsrc?: string;\n\t/**\n\t * Image source (which is the same as React Native `Image` component).\n\t */\n\tsource?: ImageSourcePropType;\n\t/**\n\t * Image border shape\n\t */\n\tborder?: 'square' | 'rounded' | 'circular';\n\t/**\n\t * Placeholder to show if image not available / fallback?\n\t */\n\tplaceholder?: string | React.ReactNode;\n\t/**\n\t * Style\n\t */\n\tstyle?: any;\n\t/**\n\t * Width\n\t */\n\twidth?: number | string;\n\t/**\n\t * Height\n\t */\n\theight?: number | string;\n}\n\n/**\n * @TODO - error: Can't perform a React state update on an unmounted component\n * Need to add pre-fetch and caching\n */\nexport const Image = ({\n\tsrc,\n\tsource,\n\tborder = 'rounded',\n\twidth = '100%',\n\theight = '100%',\n\tstyle,\n}: ImageProps) => {\n\tconst [loaded, setLoaded] = React.useState(false);\n\n\tconst handleLoad = () => {\n\t\tsetLoaded(true);\n\t};\n\n\treturn (\n\t\t<Styled.Container style={[style, { width, height }]}>\n\t\t\t<Styled.Image source={source || { uri: src }} onLoad={handleLoad} border={border} />\n\t\t\t{!loaded && <Styled.ImageSkeleton />}\n\t\t</Styled.Container>\n\t);\n};\n","import styled from 'styled-components/native';\nimport StyledText from '../text';\n\nexport const Container = styled.View`\n\tbackground-color: ${({ theme }) => theme.TOAST_BACKGROUND_COLOR};\n\tborder-radius: ${({ theme }) => theme.TOAST_BORDER_RADIUS};\n\tpadding: ${({ theme }) => `${theme.TOAST_PADDING_Y} ${theme.TOAST_PADDING_X}`};\n`;\n\nexport const Text = styled(StyledText)`\n\tcolor: ${({ theme }) => theme.TOAST_TEXT_COLOR};\n`;\n","import * as React from 'react';\nimport {\n\tView,\n\tTouchableWithoutFeedback,\n\tTouchableHighlight,\n\tTouchableNativeFeedback,\n\tTouchableOpacity,\n\tTouchableWithoutFeedbackProps,\n\tNativeSyntheticEvent,\n\tNativeTouchEvent,\n\tPlatform,\n} from 'react-native';\nimport _ from 'lodash';\nimport { impactAsync, ImpactFeedbackStyle } from 'expo-haptics';\nimport Popover from '../popover';\nimport Text from '../text';\n// import { useStyles } from '../../../theme';\n// import { IconButton, IconButtonProps } from '../../actions/IconButton/IconButton';\n// import { Button, ButtonProps } from '../../actions/Button/Button';\n// import { Touchable, TouchableProps } from '../../base/Touchable/Touchable';\n// import { shameStyles } from '../../../theme/shame-styles';\nimport * as Styled from './styles';\n\nexport interface TooltipProps {\n\t/**\n\t * Toggle tooltip visibility. Should be used mainly for debugging purpose, as visibility should be automatically handled.\n\t */\n\tactive?: boolean;\n\t/**\n\t * Content displayed in the Tooltip.\n\t */\n\tcontent: string;\n\t/**\n\t * The element that will activate the tooltip and to which the Tooltip will be anchored to.\n\t */\n\tchildren: React.ReactNode;\n\t/**\n\t * Preferred placement of the tooltip.\n\t */\n\tpreferredPlacement?: 'above' | 'below';\n}\n\nconst hideAfterDelay = 2500;\n\nconst isNative = Platform.OS === 'android' || Platform.OS === 'ios';\n\n/**\n * Floating label that briefly explain the function of a user interface element. If wrapping a \"Touchable\" element,\n * clicking the \"Touchable\" element will display the Toast.\n *\n * Behavior is slightly different on one platform to another:\n * - On Web, when using a Mouse, it will open when mouse hovers the `children` and will dismiss when\n * the mouse leaves the `children`.\n * - On Web, when using touches, it will open on click and dismiss itself when clicking somewhere else on screen.\n * - On Android and iOS, it will open on long click of Touchable elements and will appear on click of non-Touchable\n * elements. It will dismiss itself after a short delay.\n */\nexport const Tooltip: React.FC<TooltipProps> = ({\n\tactive = false,\n\tcontent,\n\tchildren: childrenRaw,\n\tpreferredPlacement = 'above',\n}) => {\n\t// const styles = useStyles((theme) => ({\n\t// \ttooltip: {\n\t// \t\tbackgroundColor: theme.colors.fill.background.inverse,\n\t// \t\tborderRadius: theme.radius.medium,\n\t// \t\tpaddingVertical: theme.spacing.small,\n\t// \t\tpaddingHorizontal: theme.spacing.medium,\n\t// \t},\n\t// }));\n\n\tconst [open, setOpen] = React.useState(active);\n\n\tconst show = React.useCallback((hapticFeedback = false) => {\n\t\tif (hapticFeedback) {\n\t\t\timpactAsync(ImpactFeedbackStyle.Light).catch(() => {}); // Ignore errors\n\t\t}\n\t\tsetOpen(true);\n\t}, []);\n\tconst hide = React.useCallback(() => setOpen(false), []);\n\n\t// Forward `active` property changes to open state\n\tReact.useEffect(() => setOpen(active), [active]);\n\n\tuseHideAfterDelayOnNative(open, hide);\n\n\tconst children = React.useMemo(\n\t\t() =>\n\t\t\tReact.Children.map(childrenRaw, (child) => {\n\t\t\t\tif (React.isValidElement(child)) {\n\t\t\t\t\t// if (child.type === IconButton || child.type === Button || child.type === Touchable) {\n\t\t\t\t\t// \tconst { props } = child;\n\t\t\t\t\t// \tconst clickProp: keyof typeof props = isNative ? 'onLongClick' : 'onClick';\n\n\t\t\t\t\t// \treturn React.cloneElement(child, {\n\t\t\t\t\t// \t\t[clickProp]: _.wrap(\n\t\t\t\t\t// \t\t\tprops[clickProp],\n\t\t\t\t\t// \t\t\t(origOnClick, event: NativeSyntheticEvent<NativeTouchEvent>) => {\n\t\t\t\t\t// \t\t\t\tevent.persist();\n\t\t\t\t\t// \t\t\t\torigOnClick?.(event);\n\t\t\t\t\t// \t\t\t\tshow(isNative);\n\t\t\t\t\t// \t\t\t}\n\t\t\t\t\t// \t\t),\n\t\t\t\t\t// \t});\n\t\t\t\t\t// }\n\t\t\t\t\tif (\n\t\t\t\t\t\tchild.type === TouchableWithoutFeedback ||\n\t\t\t\t\t\tchild.type === TouchableNativeFeedback ||\n\t\t\t\t\t\tchild.type === TouchableOpacity ||\n\t\t\t\t\t\tchild.type === TouchableHighlight\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst { props } = child;\n\t\t\t\t\t\tconst clickProp: keyof typeof props = isNative ? 'onLongPress' : 'onPress';\n\n\t\t\t\t\t\treturn React.cloneElement(child, {\n\t\t\t\t\t\t\t[clickProp]: _.wrap(\n\t\t\t\t\t\t\t\tprops[clickProp],\n\t\t\t\t\t\t\t\t(origOnPress, event: NativeSyntheticEvent<NativeTouchEvent>) => {\n\t\t\t\t\t\t\t\t\tevent.persist();\n\t\t\t\t\t\t\t\t\torigOnPress?.(event);\n\t\t\t\t\t\t\t\t\tshow(isNative);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Touchable present for Native Apps and Touch Screens without any mouse pointer on Web\n\t\t\t\treturn (\n\t\t\t\t\t<TouchableWithoutFeedback onPress={show}>\n\t\t\t\t\t\t<View>{child}</View>\n\t\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t\t);\n\t\t\t}),\n\t\t[show, childrenRaw]\n\t);\n\n\treturn (\n\t\t<Popover\n\t\t\topen={open}\n\t\t\tactivator={\n\t\t\t\t// View needed for handling tooltip visibility on mouse hover\n\t\t\t\t// @ts-ignore\n\t\t\t\t<View onMouseEnter={show} onMouseLeave={hide}>\n\t\t\t\t\t{children}\n\t\t\t\t</View>\n\t\t\t}\n\t\t\tonRequestClose={hide}\n\t\t\tplacement={preferredPlacement === 'above' ? 'top' : 'bottom'}\n\t\t\thideBackdrop\n\t\t\tclickThrough\n\t\t\tpopoverStyle={{ backgroundColor: 'black' }}\n\t\t>\n\t\t\t<Styled.Text type=\"inverse\">{content}</Styled.Text>\n\t\t</Popover>\n\t);\n};\n\n/**\n * Hide the tooltip after a certain delay on Native (Android and iOS).\n */\nconst useHideAfterDelayOnNative = (open: boolean, hide: () => void): void => {\n\tReact.useEffect(() => {\n\t\tif (open && isNative) {\n\t\t\tconst timeoutRef = setTimeout(hide, hideAfterDelay);\n\n\t\t\treturn () => clearTimeout(timeoutRef);\n\t\t}\n\n\t\t// Return necessary for ESLint\n\t}, [open]);\n};\n","import * as React from 'react';\nimport { TouchableWithoutFeedback, NativeSyntheticEvent, NativeTouchEvent } from 'react-native';\nimport isFunction from 'lodash/isFunction';\nimport Animated, { useAnimatedStyle, useSharedValue, withTiming } from 'react-native-reanimated';\nimport * as Styled from './styles';\n\nexport interface BackdropProps {\n\t/**\n\t * Determines if Backdrop is visible or not.\n\t */\n\topen: boolean;\n\t/**\n\t * Determines if Popover is transparent or not.\n\t */\n\tinvisible?: boolean;\n\t/**\n\t * If true, the popover and its backdrop won't be clickable and won't receive mouse events.\n\t *\n\t * For example, this is used by the `Tooltip` component. Prefer using the `Tooltip` component instead\n\t * of this property.\n\t */\n\tclickThrough?: boolean;\n\t/**\n\t * Called when the Backdrop is pressed\n\t */\n\tonPress?: (event: NativeSyntheticEvent<NativeTouchEvent>) => void;\n\t/**\n\t * Backdrop children\n\t */\n\tchildren?: React.ReactNode;\n}\n\n/**\n *\n */\nexport const Backdrop = ({\n\topen,\n\tinvisible = false,\n\tclickThrough = false,\n\tonPress,\n\tchildren,\n}: BackdropProps) => {\n\t// Fade in and out\n\tconst opacity = useSharedValue(0);\n\tconst animatedStyle = useAnimatedStyle(() => ({\n\t\topacity: withTiming(opacity.value, { duration: 150 }),\n\t}));\n\tReact.useEffect(() => {\n\t\topacity.value = open ? 1 : 0;\n\t}, [open]);\n\n\tconst handlePress = (event: NativeSyntheticEvent<NativeTouchEvent>) => {\n\t\tif (isFunction(onPress)) onPress(event);\n\t};\n\n\tconst contentView = (\n\t\t<Styled.Backdrop\n\t\t\tas={Animated.View}\n\t\t\tstyle={[!invisible && animatedStyle]}\n\t\t\tpointerEvents={open && !clickThrough ? 'auto' : 'none'}\n\t\t>\n\t\t\t{children}\n\t\t</Styled.Backdrop>\n\t);\n\n\treturn clickThrough ? (\n\t\tcontentView\n\t) : (\n\t\t<TouchableWithoutFeedback onPress={handlePress}>{contentView}</TouchableWithoutFeedback>\n\t);\n};\n","import * as React from 'react';\nimport Skeleton from '../skeleton';\n\nexport interface TextSkeletonProps {\n\tlength?: 'default' | 'short' | 'long';\n}\n\nconst lengthMap = {\n\tdefault: 120,\n\tshort: 60,\n\tlong: 240,\n};\n\nexport const TextSkeleton = ({ length = 'default' }: TextSkeletonProps) => {\n\treturn <Skeleton width={lengthMap[length]} height={20} />;\n};\n","import { Text } from './text';\nimport { TextSkeleton } from './skeleton';\n\nexport default Object.assign(Text, { Skeleton: TextSkeleton });\n","import * as React from 'react';\nimport wrap from 'lodash/wrap';\nimport { View } from 'react-native';\nimport { SnackbarProps, Snackbar } from './snackbar';\nimport * as Styled from './styles';\n\nexport type SnackbarOptions = SnackbarProps;\n\nexport interface SnackbarContext {\n\tshow: (options: SnackbarOptions) => void;\n}\n\nexport const SnackbarContext = React.createContext<SnackbarContext>(\n\t(undefined as unknown) as SnackbarContext\n);\n\nexport interface SnackbarProviderProps {\n\tchildren: React.ReactNode;\n}\n\nexport const SnackbarProvider = ({ children }: SnackbarProviderProps) => {\n\tconst [snackbarOptions, setSnackbarOptions] = React.useState<SnackbarOptions>();\n\n\tconst show = React.useCallback<SnackbarContext['show']>(\n\t\t(options) => {\n\t\t\t// Wrap the onDismiss callback to unmount the component on dismiss\n\t\t\toptions.onDismiss = wrap(options.onDismiss, (origOnDismiss) => {\n\t\t\t\torigOnDismiss?.();\n\t\t\t\tsetSnackbarOptions(undefined); // Unmount the Snackbar\n\t\t\t}) as () => void;\n\n\t\t\tsetSnackbarOptions(options);\n\t\t},\n\t\t[setSnackbarOptions]\n\t);\n\n\treturn (\n\t\t<SnackbarContext.Provider value={{ show }}>\n\t\t\t{/* Wrapper for Snackbar which is necessary to make sure the Snackbar is displayed within AppProvider bounds */}\n\t\t\t<Styled.View pointerEvents=\"auto\">\n\t\t\t\t{children}\n\t\t\t\t{snackbarOptions ? <Snackbar key={snackbarOptions.message} {...snackbarOptions} /> : null}\n\t\t\t</Styled.View>\n\t\t</SnackbarContext.Provider>\n\t);\n};\n","import styled, { css } from 'styled-components/native';\nimport Platform from '@wcpos/common/src/lib/platform';\nimport Pressable from '../pressable';\nimport { Text } from '../text/styles';\n\nexport const Box = styled(Pressable)`\n\tflex-direction: row;\n\talign-items: center;\n\tbackground: ${({ theme }) => theme.SEGMENT_BACKGROUND_COLOR};\n\tborder-width: ${({ theme }) => theme.SEGMENT_BORDER_WIDTH};\n\tborder-color: ${({ theme }) => theme.SEGMENT_BORDER_COLOR};\n\tborder-style: solid;\n\tborder-radius: ${({ theme }) => theme.SEGMENT_BORDER_RADIUS};\n\tpadding: ${({ theme }) => theme.SEGMENT_PADDING};\n\n\t${Platform.OS === 'ios' &&\n\tcss`\n\t\theight: 30px;\n\t`}\n`;\n\nexport const InputText = styled(Text)`\n\tflex: 1;\n`;\n\nexport const Container = styled.View`\n\talign-items: flex-start;\n`;\n\nexport const MessageContainer = styled.View``;\n\nexport const LabelContainer = styled.View``;\n","import React from 'react';\nimport { StyleProp, ViewStyle } from 'react-native';\nimport * as Styled from './styles';\n\nexport interface BaseInputProps {\n\tvalue: string;\n\tplaceholder?: string;\n\tonPress: () => void;\n\tfocused: boolean;\n\tdisabled: boolean;\n\t/**\n\t * Adds functionality to the TextInput, eg: buttons, tags\n\t */\n\tleftAccessory?: React.ReactNode;\n\t/**\n\t * Adds functionality to the TextInput, eg: buttons, tags\n\t */\n\trightAccessory?: React.ReactNode;\n\t/**\n\t * Styles for the textinput container\n\t */\n\tstyle?: StyleProp<ViewStyle>;\n}\n\n/**\n * Gives the look of a basic Input component. Use for components that look like a `TextField` but are not.\n */\nexport const BaseInput = ({\n\tvalue,\n\tplaceholder,\n\tonPress,\n\tfocused,\n\tdisabled,\n\tleftAccessory,\n\trightAccessory,\n\tstyle,\n}: BaseInputProps) => {\n\tconst showPlaceholder = !value || value.length === 0;\n\n\t// const renderLeftAccessory = leftAccessory && \n\n\treturn (\n\t\t<Styled.Box\n\t\t\t// viewStyle={[\n\t\t\t// \tstyles.inputContainer,\n\t\t\t// \tfocused && styles.inputContainerFocused,\n\t\t\t// \tdisabled && styles.inputContainerDisabled,\n\t\t\t// ]}\n\t\t\tonPress={onPress}\n\t\t\tdisabled={disabled}\n\t\t\tstyle={style}\n\t\t>\n\t\t\t{leftAccessory}\n\t\t\t<Styled.InputText\n\t\t\t\t// maxLines={1}\n\t\t\t\ttype={showPlaceholder ? 'secondary' : undefined}\n\t\t\t>\n\t\t\t\t{showPlaceholder ? placeholder : value}\n\t\t\t</Styled.InputText>\n\t\t\t{rightAccessory}\n\t\t</Styled.Box>\n\t);\n};\n","import styled from 'styled-components/native';\n\nexport const Container = styled.View`\n\tflex-direction: row;\n\talign-items: center;\n`;\n","import React from 'react';\nimport Text from '../text';\nimport Icon from '../icon';\nimport * as Styled from './styles';\n\nexport interface InlineErrorProps {\n\t/**\n\t * Error message.\n\t */\n\tmessage: string;\n}\n\n/**\n * Brief, in-context messages telling the user that something went wrong\n * with a single or group of inputs in a form.\n *\n * Use to let users know why a form input is invalid and how to fix it.\n *\n * > Used in `TextField` component to display error message.\n */\nexport const InlineError = ({ message }: InlineErrorProps) => (\n\t<Styled.Container>\n\t\t<Icon name=\"error\" color=\"critical\" size=\"small\" />\n\t\t<Text type=\"critical\" size=\"small\">\n\t\t\t{message}\n\t\t</Text>\n\t</Styled.Container>\n);\n","import React from 'react';\nimport { View, TouchableWithoutFeedback } from 'react-native';\nimport InlineError from '../inline-error';\nimport Text from '../text';\nimport * as Styled from './styles';\n\nexport interface BaseInputContainerProps {\n\t/**\n\t * Label shown above the input.\n\t */\n\tlabel: string;\n\t/**\n\t * Callback called on click of the label.\n\t */\n\tonLabelClick: () => void;\n\t/**\n\t * Additional text to help the user.\n\t */\n\thelpText: React.ReactNode;\n\t/**\n\t * Display an error state.\n\t */\n\terror: boolean | string;\n\t/**\n\t * Disable the input.\n\t */\n\tdisabled: boolean;\n\t/**\n\t * TextInput component.\n\t */\n\tchildren: React.ReactNode;\n\t/**\n\t * Hides the label.\n\t */\n\thideLabel?: boolean;\n}\n\n/**\n * Wraps a basic Input field with label, helpText and error features.\n */\nexport const BaseInputContainer = ({\n\tlabel,\n\terror,\n\thelpText,\n\tdisabled,\n\tchildren,\n\tonLabelClick,\n\thideLabel = false,\n}: BaseInputContainerProps) => (\n\t<Styled.Container>\n\t\t{!hideLabel && (\n\t\t\t<TouchableWithoutFeedback onPress={onLabelClick} disabled={disabled}>\n\t\t\t\t<View>\n\t\t\t\t\t<Styled.LabelContainer>\n\t\t\t\t\t\t<Text>{label}</Text>\n\t\t\t\t\t</Styled.LabelContainer>\n\t\t\t\t</View>\n\t\t\t</TouchableWithoutFeedback>\n\t\t)}\n\n\t\t{/* Actual Input goes here */}\n\t\t{children}\n\n\t\t{error ? (\n\t\t\t<Styled.MessageContainer>\n\t\t\t\t<InlineError message={typeof error === 'string' ? error : ''} />\n\t\t\t</Styled.MessageContainer>\n\t\t) : null}\n\t\t{helpText ? (\n\t\t\t<Styled.MessageContainer>\n\t\t\t\t<Text type=\"secondary\" size=\"small\">\n\t\t\t\t\t{helpText}\n\t\t\t\t</Text>\n\t\t\t</Styled.MessageContainer>\n\t\t) : null}\n\t</Styled.Container>\n);\n","import * as React from 'react';\nimport Dialog from '@wcpos/common/src/components/dialog';\nimport TextInput from '@wcpos/common/src/components/textinput';\nimport http from '@wcpos/common/src/lib/http';\nimport useAppState from '../use-app-state';\n\ninterface LoginFormProps {\n\tonClose: () => void;\n}\n\nconst LoginForm = ({ onClose }: LoginFormProps) => {\n\tconst [username, setUsername] = React.useState('');\n\tconst [password, setPassword] = React.useState('');\n\tconst { site, wpUser } = useAppState();\n\n\tconst handleLogin = async () => {\n\t\tif (site && site.wpApiUrl) {\n\t\t\tconst result = await http.post(`${site.wpApiUrl}wcpos/v1/jwt/authorize`, {\n\t\t\t\tusername,\n\t\t\t\tpassword,\n\t\t\t});\n\t\t\t// set wp credientials\n\t\t\tconst success = await wpUser?.atomicPatch(result.data);\n\t\t\tif (success) {\n\t\t\t\tonClose();\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<Dialog\n\t\t\ttitle=\"Login\"\n\t\t\topen\n\t\t\tonClose={onClose}\n\t\t\tprimaryAction={{ label: 'Login', action: handleLogin }}\n\t\t>\n\t\t\t<Dialog.Section>\n\t\t\t\t<TextInput\n\t\t\t\t\tlabel=\"Username\"\n\t\t\t\t\tplaceholder=\"username\"\n\t\t\t\t\tvalue={username}\n\t\t\t\t\tonChange={setUsername}\n\t\t\t\t/>\n\t\t\t\t<TextInput\n\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\tplaceholder=\"password\"\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={setPassword}\n\t\t\t\t/>\n\t\t\t</Dialog.Section>\n\t\t</Dialog>\n\t);\n};\n\nexport default LoginForm;\n","import * as React from 'react';\nimport LoginForm from './login-form';\n\n// @ts-ignore\nexport const AuthLoginContext = React.createContext(() => {});\n/**\n *\n */\nexport const AuthLoginProvider: React.FC = ({ children }) => {\n\tconst [visible, setVisible] = React.useState(false);\n\n\tconst show = () => {\n\t\tsetVisible(true);\n\t};\n\n\treturn (\n\t\t<AuthLoginContext.Provider value={show}>\n\t\t\t{children}\n\t\t\t{visible && <LoginForm onClose={() => setVisible(false)} />}\n\t\t</AuthLoginContext.Provider>\n\t);\n};\n","import * as React from 'react';\nimport { AuthLoginContext } from './auth-login-provider';\n\nexport const useAuthLogin = () => {\n\treturn React.useContext(AuthLoginContext);\n};\n","import * as React from 'react';\nimport { StyleProp, ViewStyle } from 'react-native';\nimport Image from '../image';\n\n/**\n * Avatar properties\n */\nexport interface AvatarProps {\n\t/** src description */\n\tsrc: string;\n\t/** size description */\n\tsize?: 'default' | 'small' | 'large';\n\t/** placeholder description */\n\tplaceholder?: string | React.ReactNode;\n\t/**\n\t *\n\t */\n\tstyle?: StyleProp<ViewStyle>;\n}\n\n/**\n * Size map\n */\nconst map = {\n\tdefault: { width: 50, height: 50 },\n\tsmall: { width: 20, height: 20 },\n\tlarge: { width: 100, height: 100 },\n};\n\n/**\n * Avatar\n */\nexport const Avatar = ({ src, size = 'default', placeholder, style }: AvatarProps) => {\n\tconst { width, height } = map[size];\n\n\treturn (\n\t\t<Image\n\t\t\tborder=\"circular\"\n\t\t\tsrc={src}\n\t\t\tplaceholder={placeholder} // style={[map[size], style]}\n\t\t\twidth={width}\n\t\t\theight={height}\n\t\t/>\n\t);\n};\n","import styled, { css } from 'styled-components/native';\n\nexport const Container = styled.View<{ border: import('./skeleton').Borders }>`\n\tbackground-color: #e1e9ee;\n\toverflow: hidden;\n\n\t${({ border, theme }) => {\n\t\tswitch (border) {\n\t\t\tcase 'rounded':\n\t\t\t\treturn css`\n\t\t\t\t\tborder-radius: ${theme.IMAGE_BORDER_RADIUS};\n\t\t\t\t`;\n\t\t\tcase 'circular':\n\t\t\t\treturn css`\n\t\t\t\t\tborder-radius: 500px;\n\t\t\t\t`;\n\t\t\tdefault:\n\t\t\t\treturn css`\n\t\t\t\t\tborder-radius: 0px;\n\t\t\t\t`;\n\t\t}\n\t}}\n`;\n","import _ from 'lodash';\nimport * as React from 'react';\nimport { LayoutRectangle, ViewProps, StyleProp, ViewStyle } from 'react-native';\nimport { useSafeAreaInsets } from 'react-native-safe-area-context';\nimport { useAppProviderDimensions } from '@wcpos/common/src/hooks/use-position-in-app';\nimport Animated, { useAnimatedStyle, useSharedValue, withTiming } from 'react-native-reanimated';\nimport { PopoverPlacement, isLeft, isRight, isStart, isEnd, isTop, isBottom } from './placements';\nimport * as Styled from './styles';\n\n// const { zIndex } = shameStyles.popover;\n\nexport interface PopoverViewProps {\n\topen: boolean;\n\tchildren: React.ReactNode;\n\tplacement: PopoverPlacement;\n\tactivatorLayout: LayoutRectangle;\n\tmatchWidth: boolean;\n\taboveActivator: boolean;\n\tclickThrough: boolean;\n\tstyle?: StyleProp<ViewStyle>;\n}\n\n/**\n * Actual Popover View which is displayed.\n */\nexport const PopoverView: React.FC<PopoverViewProps> = ({\n\topen,\n\tchildren,\n\tplacement,\n\tactivatorLayout,\n\tmatchWidth,\n\taboveActivator,\n\tclickThrough,\n\tstyle,\n}) => {\n\tconst { width: windowWidth, height: windowHeight } = useAppProviderDimensions();\n\tconst [layout, setLayout] = React.useState<LayoutRectangle | null>(null);\n\tconst onLayout = React.useCallback<Required<ViewProps>['onLayout']>(\n\t\t({ nativeEvent }) => setLayout(nativeEvent.layout),\n\t\t[setLayout]\n\t);\n\n\t// Calculate the offset of the Popover relative to parent according to placement\n\tconst placementOffset = usePlacementOffset(placement, aboveActivator, layout, activatorLayout);\n\n\t// Corrects the placement to be inside window bounds\n\tconst correctedPlacementOffset = useOffsetsCorrectionToBeInWindow(\n\t\tplacementOffset,\n\t\tlayout,\n\t\twindowWidth,\n\t\twindowHeight\n\t);\n\n\t// Fade in and out\n\tconst opacity = useSharedValue(0);\n\tconst animatedStyle = useAnimatedStyle(() => ({\n\t\topacity: withTiming(opacity.value, { duration: 150 }),\n\t}));\n\tReact.useEffect(() => {\n\t\topacity.value = open ? 1 : 0;\n\t}, [open]);\n\n\treturn (\n\t\t<Styled.Container\n\t\t\tas={Animated.View}\n\t\t\tstyle={[{ width: windowWidth, height: windowHeight }, animatedStyle]}\n\t\t\tpointerEvents=\"box-none\" // Children views can receive touches but not this View\n\t\t>\n\t\t\t<Styled.Popover\n\t\t\t\tstyle={[\n\t\t\t\t\tlayout === null\n\t\t\t\t\t\t? { opacity: 0 } // Hide Popover as long as we don't have its correct layout\n\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t// Offset Popover to display correctly according to activator position and window bounds\n\t\t\t\t\t\t\t\ttransform: [\n\t\t\t\t\t\t\t\t\t{ translateY: correctedPlacementOffset.y },\n\t\t\t\t\t\t\t\t\t{ translateX: correctedPlacementOffset.x },\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t  },\n\t\t\t\t\t{ maxWidth: windowWidth, maxHeight: windowHeight }, // Set max dimensions to prevent going out of Window\n\t\t\t\t\tmatchWidth ? { width: activatorLayout.width } : null,\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tstyle,\n\t\t\t\t]}\n\t\t\t\tonLayout={onLayout}\n\t\t\t\tpointerEvents={open && !clickThrough ? 'auto' : 'none'} // Make sure we can't click items if popover is closed or if clickthrough === true\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</Styled.Popover>\n\t\t</Styled.Container>\n\t);\n};\n\n/**\n * Get the offset of the Popover View according to its placement.\n *\n * Ignores Window bounds, this is the ideal position calculation.\n */\nconst usePlacementOffset = (\n\tplacement: PopoverPlacement,\n\taboveActivator: boolean,\n\tpopoverLayout: LayoutRectangle | null,\n\tactivatorLayout: LayoutRectangle\n): Offset =>\n\tReact.useMemo(() => {\n\t\tconst offset = {\n\t\t\tx:\n\t\t\t\tactivatorLayout.x +\n\t\t\t\t(isLeft(placement)\n\t\t\t\t\t? -(popoverLayout?.width ?? 0)\n\t\t\t\t\t: isRight(placement)\n\t\t\t\t\t? activatorLayout.width\n\t\t\t\t\t: isStart(placement)\n\t\t\t\t\t? 0\n\t\t\t\t\t: isEnd(placement)\n\t\t\t\t\t? -(popoverLayout?.width ?? 0) + activatorLayout.width\n\t\t\t\t\t: (activatorLayout.width - (popoverLayout?.width ?? 0)) / 2), // Top or bottom centered\n\t\t\ty:\n\t\t\t\tactivatorLayout.y +\n\t\t\t\t(isTop(placement)\n\t\t\t\t\t? -(popoverLayout?.height ?? 0)\n\t\t\t\t\t: isBottom(placement)\n\t\t\t\t\t? activatorLayout?.height ?? 0\n\t\t\t\t\t: isStart(placement)\n\t\t\t\t\t? 0\n\t\t\t\t\t: isEnd(placement)\n\t\t\t\t\t? -(popoverLayout?.height ?? 0) + activatorLayout.height\n\t\t\t\t\t: (activatorLayout.height - (popoverLayout?.height ?? 0)) / 2), // Left or right centered\n\t\t};\n\n\t\tif (aboveActivator) {\n\t\t\t// Offset to be above activator\n\t\t\tif (isTop(placement)) {\n\t\t\t\toffset.y += activatorLayout.height;\n\t\t\t} else if (isBottom(placement)) {\n\t\t\t\toffset.y -= activatorLayout.height;\n\t\t\t} else if (isLeft(placement)) {\n\t\t\t\toffset.x += activatorLayout.width;\n\t\t\t} else {\n\t\t\t\toffset.x -= activatorLayout.width;\n\t\t\t}\n\t\t}\n\n\t\treturn offset;\n\t}, [placement, aboveActivator, popoverLayout, activatorLayout]);\n\n/**\n * Corrects the ideal Popover offset to prevent crossing View bounds.\n */\nconst useOffsetsCorrectionToBeInWindow = (\n\toffset: Offset,\n\tpopoverLayout: LayoutRectangle | null,\n\twindowWidth: number,\n\twindowHeight: number\n): Offset => {\n\tconst insets = useSafeAreaInsets();\n\n\treturn React.useMemo(() => {\n\t\tif (popoverLayout === null) {\n\t\t\treturn offset;\n\t\t}\n\n\t\treturn {\n\t\t\tx: _.clamp(\n\t\t\t\toffset.x,\n\t\t\t\tinsets.left,\n\t\t\t\twindowWidth - popoverLayout.width - insets.left - insets.right\n\t\t\t),\n\t\t\ty: _.clamp(\n\t\t\t\toffset.y,\n\t\t\t\tinsets.top,\n\t\t\t\twindowHeight - popoverLayout.height - insets.top - insets.bottom\n\t\t\t),\n\t\t};\n\t}, [popoverLayout, offset, windowWidth, windowHeight, insets]);\n};\n\ninterface Offset {\n\tx: number;\n\ty: number;\n}\n","import styled from 'styled-components/native';\nimport { StyleSheet } from 'react-native';\n\nexport const Backdrop = styled.View`\n\tbackground-color: ${({ theme }) => theme.BACKDROP_COLOR};\n\t${{ ...StyleSheet.absoluteFillObject }}\n\topacity: 0;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: ${({ theme }) => theme.BACKDROP_Z_INDEX};\n`;\n","import React, { useCallback } from 'react';\nimport Animated, { useAnimatedStyle, useSharedValue, withTiming } from 'react-native-reanimated';\nimport useTimeout from '@wcpos/common/src/hooks/use-timeout';\nimport Button from '../button';\nimport Icon from '../icon';\nimport * as Styled from './styles';\n\nexport interface SnackbarProps {\n\t/**\n\t * Message to display on the Snackbar.\n\t */\n\tmessage: string;\n\t/**\n\t * Optional action. Clicking it will dismiss the Snackbar.\n\t */\n\taction?: { label: string; action?: () => void };\n\t/**\n\t * Duration the Snackbar is displayed.\n\t */\n\tduration?: 'default' | 'longer';\n\t/**\n\t * Function to call when the Snackbar is dismissed.\n\t */\n\tonDismiss?: () => void;\n\t/**\n\t * Function to call when the Snackbar is dismissed.\n\t */\n\tdismissable?: boolean;\n}\n\nconst durationValues = {\n\tdefault: 2500,\n\tlonger: 4000,\n};\n\n/**\n * Confirm a User's action by displaying a small text at the bottom of the screen.\n * Can also provide the user a quick action.\n */\nexport const Snackbar = ({\n\tmessage,\n\taction,\n\tduration = 'default',\n\tonDismiss = () => {},\n\tdismissable,\n}: SnackbarProps) => {\n\tconst showDuration = 150;\n\n\t// Fade in\n\tconst opacity = useSharedValue(0);\n\tconst animatedStyle = useAnimatedStyle(() => ({\n\t\topacity: withTiming(opacity.value, { duration: showDuration }),\n\t}));\n\tReact.useEffect(() => {\n\t\topacity.value = 1;\n\t}, []);\n\n\tconst durationValue = durationValues[duration];\n\n\tconst dismiss = useCallback(() => {\n\t\t// fade out\n\t\tonDismiss();\n\t}, [onDismiss, showDuration]);\n\n\tconst onActionClick = useCallback(() => {\n\t\tif (action && action.action) {\n\t\t\taction.action();\n\t\t}\n\t\tdismiss(); // Dismiss when user clicks action\n\t}, [action?.action, dismiss]);\n\n\tuseTimeout(dismiss, durationValue + showDuration);\n\n\treturn (\n\t\t<Styled.Container>\n\t\t\t<Styled.Snackbar as={Animated.View} style={animatedStyle}>\n\t\t\t\t<Styled.Text>{message}</Styled.Text>\n\t\t\t\t{action ? <Button onPress={onActionClick}>{action.label}</Button> : null}\n\t\t\t\t{dismissable ? <Icon name=\"remove\" onPress={dismiss} /> : null}\n\t\t\t</Styled.Snackbar>\n\t\t</Styled.Container>\n\t);\n};\n","import * as React from 'react';\n\n/**\n * Hook calling a function after a certain delay. Resets automatically if `delay`\n * changes.\n */\nexport const useTimeout = (callback: () => void, delay: number): void => {\n\tReact.useEffect(() => {\n\t\tconst timeoutRef = setTimeout(callback, delay);\n\n\t\treturn () => clearTimeout(timeoutRef);\n\t}, [delay]);\n};\n\nexport default useTimeout;\n","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgAdd(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18 13h-5v5c0 .55-.45 1-1 1s-1-.45-1-1v-5H6c-.55 0-1-.45-1-1s.45-1 1-1h5V6c0-.55.45-1 1-1s1 .45 1 1v5h5c.55 0 1 .45 1 1s-.45 1-1 1z\"\n  })));\n}\n\nexport default SvgAdd;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgAddCircle(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"\n  })));\n}\n\nexport default SvgAddCircle;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgArrow(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13 19V7.83l4.88 4.88c.39.39 1.03.39 1.42 0a.996.996 0 000-1.41l-6.59-6.59a.996.996 0 00-1.41 0l-6.6 6.58a.996.996 0 101.41 1.41L11 7.83V19c0 .55.45 1 1 1s1-.45 1-1z\"\n  })));\n}\n\nexport default SvgArrow;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgArrowDown(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\",\n    transform: \"rotate(180)\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13 19V7.83l4.88 4.88c.39.39 1.03.39 1.42 0a.996.996 0 000-1.41l-6.59-6.59a.996.996 0 00-1.41 0l-6.6 6.58a.996.996 0 101.41 1.41L11 7.83V19c0 .55.45 1 1 1s1-.45 1-1z\"\n  })));\n}\n\nexport default SvgArrowDown;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgBackspace(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M22 3H7c-.69 0-1.23.35-1.59.88L0 12l5.41 8.11c.36.53.9.89 1.59.89h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-3 12.59L17.59 17 14 13.41 10.41 17 9 15.59 12.59 12 9 8.41 10.41 7 14 10.59 17.59 7 19 8.41 15.41 12 19 15.59z\"\n  })));\n}\n\nexport default SvgBackspace;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgCheck(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9 16.17L5.53 12.7a.996.996 0 00-1.41 0 .996.996 0 000 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71a.996.996 0 000-1.41.996.996 0 00-1.41 0L9 16.17z\"\n  })));\n}\n\nexport default SvgCheck;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgCog(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.488.488 0 00-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z\"\n  })));\n}\n\nexport default SvgCog;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgComment(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z\"\n  })));\n}\n\nexport default SvgComment;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgError(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 11c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z\"\n  })));\n}\n\nexport default SvgError;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgMoreHoriz(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"\n  })));\n}\n\nexport default SvgMoreHoriz;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgMoreVert(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"\n  })));\n}\n\nexport default SvgMoreVert;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgRemove(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm4.3 14.3a.996.996 0 01-1.41 0L12 13.41 9.11 16.3a.996.996 0 01-1.41 0 .996.996 0 010-1.41L10.59 12 7.7 9.11a.996.996 0 010-1.41.996.996 0 011.41 0L12 10.59l2.89-2.89a.996.996 0 111.41 1.41L13.41 12l2.89 2.89c.38.38.38 1.02 0 1.41z\"\n  })));\n}\n\nexport default SvgRemove;","var _path, _path2, _path3;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgWcposIcon(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 1260 1260\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 360c45 45 135 45 180 0 45 45 135 45 180 0 45 45 135 45 180 0 45 45 135 45 180 0 45 45 135 45 180 0 45 45 135 45 180 0 45 45 135 45 180 0v540q0 90-90 90H360L0 1260zM90 0h1080v90H90z\"\n  })), _path2 || (_path2 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M0 90Q0 0 90 0h90v270a90 90 0 11-180 0zM360 0h180v270a90 90 0 11-180 0zM720 0h180v270a90 90 0 11-180 0zM1080 0h90q90 0 90 90v180a90 90 0 11-180 0z\"\n  })), /*#__PURE__*/React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 1200 400\",\n    width: 1060,\n    x: 100,\n    y: 50,\n    stroke: \"#FFF\",\n    strokeWidth: 60,\n    strokeLinecap: \"round\",\n    fill: \"#FFF\",\n    fillOpacity: 0\n  }, props), _path3 || (_path3 = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M30 480V30m0 150a150 150 0 10300 0 150 150 0 10-300 0M450 180a150 150 0 10300 0 150 150 0 10-300 0M1170 70c-25-15-75-40-150-40q-150 0-150 75t150 75 150 75-150 75c-75 0-125-25-150-40\",\n    fill: \"none\"\n  }))));\n}\n\nexport default SvgWcposIcon;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgVisibility(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z\"\n  })));\n}\n\nexport default SvgVisibility;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgVisibilityOff(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46A11.804 11.804 0 001 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z\"\n  })));\n}\n\nexport default SvgVisibilityOff;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgResize(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19 12h-2v3h-3v2h5v-5zM7 9h3V7H5v5h2V9zm14-6H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16.01H3V4.99h18v14.02z\"\n  })));\n}\n\nexport default SvgResize;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgDrag(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11 18c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2zm-2-8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0-6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6 4c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\"\n  })));\n}\n\nexport default SvgDrag;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgNotifications(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 22c1.1 0 2-.9 2-2h-4a2 2 0 002 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z\"\n  })));\n}\n\nexport default SvgNotifications;","var _circle;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgCircle(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _circle || (_circle = /*#__PURE__*/React.createElement(\"circle\", {\n    cx: 12,\n    cy: 12,\n    r: 11\n  })));\n}\n\nexport default SvgCircle;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgChevronRight(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9.29 6.71a.996.996 0 000 1.41L13.17 12l-3.88 3.88a.996.996 0 101.41 1.41l4.59-4.59a.996.996 0 000-1.41L10.7 6.7c-.38-.38-1.02-.38-1.41.01z\"\n  })));\n}\n\nexport default SvgChevronRight;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgPending(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm-.22-13h-.06c-.4 0-.72.32-.72.72v4.72c0 .35.18.68.49.86l4.15 2.49c.34.2.78.1.98-.24a.71.71 0 00-.25-.99l-3.87-2.3V7.72c0-.4-.32-.72-.72-.72z\"\n  })));\n}\n\nexport default SvgPending;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgProcessing(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"\n  })));\n}\n\nexport default SvgProcessing;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgOnHold(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 7c.55 0 1 .45 1 1v4c0 .55-.45 1-1 1s-1-.45-1-1V8c0-.55.45-1 1-1zm-.01-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm1-3h-2v-2h2v2z\"\n  })));\n}\n\nexport default SvgOnHold;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgCompleted(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm3.88-11.71L10 14.17l-1.88-1.88a.996.996 0 00-1.41 0 .996.996 0 000 1.41l2.59 2.59c.39.39 1.02.39 1.41 0L17.3 9.7a.996.996 0 000-1.41c-.39-.39-1.03-.39-1.42 0z\"\n  })));\n}\n\nexport default SvgCompleted;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgCancelled(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM4 12c0-4.42 3.58-8 8-8 1.85 0 3.55.63 4.9 1.69L5.69 16.9A7.902 7.902 0 014 12zm8 8c-1.85 0-3.55-.63-4.9-1.69L18.31 7.1A7.902 7.902 0 0120 12c0 4.42-3.58 8-8 8z\"\n  })));\n}\n\nexport default SvgCancelled;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgRefunded(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 12c0 .55.45 1 1 1h8c.55 0 1-.45 1-1s-.45-1-1-1H8c-.55 0-1 .45-1 1zm5-10C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"\n  })));\n}\n\nexport default SvgRefunded;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgFailed(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.89 8.7L12 10.59 10.11 8.7a.996.996 0 00-1.41 0 .996.996 0 000 1.41L10.59 12 8.7 13.89a.996.996 0 101.41 1.41L12 13.41l1.89 1.89a.996.996 0 101.41-1.41L13.41 12l1.89-1.89a.996.996 0 000-1.41c-.39-.38-1.03-.38-1.41 0zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"\n  })));\n}\n\nexport default SvgFailed;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgAddCustomer(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z\"\n  })));\n}\n\nexport default SvgAddCustomer;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgAddCircleOutline(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"\n  })));\n}\n\nexport default SvgAddCircleOutline;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgCreditCard(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z\"\n  })));\n}\n\nexport default SvgCreditCard;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgReceipt(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18 17H6v-2h12v2zm0-4H6v-2h12v2zm0-4H6V7h12v2zM3 22l1.5-1.5L6 22l1.5-1.5L9 22l1.5-1.5L12 22l1.5-1.5L15 22l1.5-1.5L18 22l1.5-1.5L21 22V2l-1.5 1.5L18 2l-1.5 1.5L15 2l-1.5 1.5L12 2l-1.5 1.5L9 2 7.5 3.5 6 2 4.5 3.5 3 2v20z\"\n  })));\n}\n\nexport default SvgReceipt;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgShoppingCart(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 24 24\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49A1.003 1.003 0 0020 4H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z\"\n  })));\n}\n\nexport default SvgShoppingCart;","import add from './add.svg';\nimport addCircle from './add-circle.svg';\nimport arrow from './arrow.svg';\nimport arrowDown from './arrow-down.svg';\nimport backspace from './backspace.svg';\nimport check from './check.svg';\nimport cog from './cog.svg';\nimport comment from './comment.svg';\nimport error from './error.svg';\nimport moreHoriz from './more-horiz.svg';\nimport moreVert from './more-vert.svg';\nimport remove from './remove.svg';\nimport wcpos from './wcpos-icon.svg';\nimport visibility from './visibility.svg';\nimport visibilityOff from './visibility-off.svg';\nimport resize from './resize.svg';\nimport drag from './drag.svg';\nimport notifications from './notifications.svg';\nimport circle from './circle.svg';\nimport chevronRight from './chevron-right.svg';\nimport pending from './pending.svg';\nimport processing from './processing.svg';\nimport onHold from './on-hold.svg';\nimport completed from './completed.svg';\nimport cancelled from './cancelled.svg';\nimport refunded from './refunded.svg';\nimport failed from './failed.svg';\nimport addCustomer from './add-customer.svg';\nimport addCircleOutline from './add-circle-outline.svg';\nimport creditCard from './credit-card.svg';\nimport receipt from './receipt.svg';\nimport shoppingCart from './shopping-cart.svg';\n\nexport default {\n\tadd,\n\taddCircle,\n\tarrow,\n\t'arrow-up': arrow,\n\t'arrow-down': arrowDown,\n\tbackspace,\n\tcheck,\n\tcomment,\n\tcog,\n\tclear: remove,\n\tclose: remove,\n\tdelete: remove,\n\terror,\n\tmore: moreVert,\n\t'more-horiz': moreHoriz,\n\t'more-vert': moreVert,\n\tnote: comment,\n\tremove,\n\twcpos,\n\tsettings: cog,\n\tvisibility,\n\t'visibility-off': visibilityOff,\n\tresize,\n\tdrag,\n\tnotifications,\n\tcircle,\n\tchevronRight,\n\tpending,\n\tprocessing,\n\t'on-hold': onHold,\n\tcompleted,\n\tcancelled,\n\trefunded,\n\tfailed,\n\taddCustomer,\n\taddCircleOutline,\n\tcreditCard,\n\treceipt,\n\t'pos-checkout': receipt,\n\tshoppingCart,\n\t'pos-open': shoppingCart,\n};\n","import styled from 'styled-components/native';\nimport { Pressable } from '../pressable/pressable';\n\nexport const PressableIcon = styled(Pressable)`\n\tpadding: 2px;\n\tborder-radius: ${({ theme }) => theme.BUTTON_BORDER_RADIUS};\n\ttransition: background-color 0.3s ease-in-out;\n`;\n","import * as React from 'react';\nimport { ViewStyle } from 'react-native';\nimport get from 'lodash/get';\nimport { useTheme } from 'styled-components/native';\nimport Svgs from './svg';\nimport Tooltip from '../tooltip';\nimport Skeleton from '../skeleton';\nimport * as Styled from './styles';\n\n/**\n *\n */\nconst sizeMap = {\n\tdefault: 20,\n\tsmall: 16,\n\t'x-small': 12,\n\tlarge: 24,\n\t'x-large': 30,\n};\n\n/**\n *\n */\nexport interface IconProps {\n\t/**\n\t * Icon colour\n\t */\n\tcolor?: string;\n\t/**\n\t * Set to `true` to disable.\n\t */\n\tdisabled?: boolean;\n\t/**\n\t * Set icon height.\n\t */\n\theight?: number;\n\t/**\n\t * Icon key.\n\t */\n\tname: Extract<keyof typeof Svgs, string>;\n\t/**\n\t * Set icon size.\n\t */\n\tsize?: Extract<keyof typeof sizeMap, string>;\n\t/**\n\t * Set icon width.\n\t */\n\twidth?: number;\n\t/**\n\t * Turns icon into a button. Called when icon is pressed.\n\t */\n\tonPress?: null | ((event: import('react-native').GestureResponderEvent) => void);\n\t/**\n\t * Wraps the icon in a Tooltip component\n\t */\n\ttooltip?: string;\n\t/**\n\t * Styling for Pressable icons\n\t */\n\tbackgroundStyle?: 'none' | ViewStyle;\n\t/**\n\t * Icon colour\n\t */\n\ttype?: import('@wcpos/common/src/themes').ColorTypes;\n}\n\n/**\n * Icon component\n */\nexport const Icon = ({\n\tcolor,\n\tdisabled,\n\tname,\n\tsize = 'default',\n\twidth,\n\theight,\n\tonPress,\n\ttooltip,\n\tbackgroundStyle,\n\ttype = 'primary',\n}: IconProps) => {\n\tconst theme = useTheme();\n\n\tconst SvgIcon = get(Svgs, name, Svgs.error);\n\tlet IconComponent = (\n\t\t<SvgIcon\n\t\t\t// @TODO - clean up this component\n\t\t\t// @ts-ignore\n\t\t\twidth={width || sizeMap[size]}\n\t\t\t// @ts-ignore\n\t\t\theight={height || sizeMap[size]}\n\t\t\t// @ts-ignore\n\t\t\tfill={color || theme[`COLOR_${type.toUpperCase()}`]}\n\t\t/>\n\t);\n\n\tconst pressableStyle = React.useCallback(\n\t\t({ hovered }) =>\n\t\t\tbackgroundStyle !== 'none'\n\t\t\t\t? [\n\t\t\t\t\t\t{ backgroundColor: hovered ? theme.ICON_BACKGROUND_COLOR : 'transparent' },\n\t\t\t\t\t\tbackgroundStyle,\n\t\t\t\t  ]\n\t\t\t\t: { padding: 0 },\n\t\t[backgroundStyle, theme.ICON_BACKGROUND_COLOR]\n\t);\n\n\tif (onPress) {\n\t\tIconComponent = (\n\t\t\t<Styled.PressableIcon onPress={onPress} style={pressableStyle}>\n\t\t\t\t{IconComponent}\n\t\t\t</Styled.PressableIcon>\n\t\t);\n\t}\n\n\tif (tooltip) {\n\t\tIconComponent = <Tooltip content={tooltip}>{IconComponent}</Tooltip>;\n\t}\n\n\treturn IconComponent;\n};\n\n/**\n *\n */\nexport interface IconSkeletonProps {\n\t/**\n\t *\n\t */\n\tsize?: Extract<keyof typeof sizeMap, string>;\n}\n\n/**\n *\n */\nexport const IconSkeleton = ({ size = 'default' }: IconSkeletonProps) => {\n\treturn <Skeleton border=\"circular\" width={sizeMap[size]} height={sizeMap[size]} />;\n};\n\nIcon.Skeleton = IconSkeleton;\n","import styled from 'styled-components/native';\nimport { StyleSheet } from 'react-native';\nimport { math } from 'polished';\n\ntype ButtonProps = import('./button').Props;\ntype BackgroundProps = Pick<ButtonProps, 'background' | 'type' | 'disabled' | 'size'> & {\n\tpressed: boolean;\n};\n\nexport const Background = styled.View<BackgroundProps>`\n\tbackground-color: ${({ background, type, theme, pressed }) => {\n\t\tif (background === 'clear' || background === 'outline') {\n\t\t\treturn 'transparent';\n\t\t}\n\t\tswitch (type) {\n\t\t\t// case 'secondary':\n\t\t\t// \treturn hovered ? 'black' : theme.BUTTON_COLOR_SECONDARY;\n\t\t\t// case 'attention':\n\t\t\t// \treturn focused ? 'black' : theme.BUTTON_COLOR_ATTENTION;\n\t\t\tcase 'critical':\n\t\t\t\treturn pressed ? 'black' : theme.BUTTON_COLOR_CRITICAL;\n\t\t\tcase 'info':\n\t\t\t\treturn theme.BUTTON_COLOR_INFO;\n\t\t\tcase 'success':\n\t\t\t\treturn theme.BUTTON_COLOR_SUCCESS;\n\t\t\tcase 'warning':\n\t\t\t\treturn theme.BUTTON_COLOR_WARNING;\n\t\t\tcase 'inverse':\n\t\t\t\treturn theme.BUTTON_COLOR_INVERSE;\n\t\t\tdefault:\n\t\t\t\treturn theme.BUTTON_COLOR;\n\t\t}\n\t}};\n\n\tborder-color: ${({ type, theme }) => {\n\t\tswitch (type) {\n\t\t\tcase 'secondary':\n\t\t\t\treturn theme.BUTTON_COLOR_SECONDARY;\n\t\t\tcase 'attention':\n\t\t\t\treturn theme.BUTTON_COLOR_ATTENTION;\n\t\t\tcase 'critical':\n\t\t\t\treturn theme.BUTTON_COLOR_CRITICAL;\n\t\t\tcase 'info':\n\t\t\t\treturn theme.BUTTON_COLOR_INFO;\n\t\t\tcase 'success':\n\t\t\t\treturn theme.BUTTON_COLOR_SUCCESS;\n\t\t\tcase 'warning':\n\t\t\t\treturn theme.BUTTON_COLOR_WARNING;\n\t\t\tcase 'inverse':\n\t\t\t\treturn theme.BUTTON_COLOR_INVERSE;\n\t\t\tdefault:\n\t\t\t\treturn theme.BUTTON_COLOR;\n\t\t}\n\t}};\n\n\topacity: ${({ disabled }) => (disabled ? 0.5 : 1)}\n\tborder-radius: ${({ theme }) => theme.BUTTON_BORDER_RADIUS};\n\tborder-width: ${({ background }) => (background === 'outline' ? StyleSheet.hairlineWidth : 0)};\n\tpadding: ${({ theme, size }) => {\n\t\tswitch (size) {\n\t\t\tcase 'small':\n\t\t\t\treturn `${math(`${theme.BUTTON_PADDING_Y} / 2`)} ${math(`${theme.BUTTON_PADDING_X} /2`)}`;\n\t\t\tdefault:\n\t\t\t\treturn `${theme.BUTTON_PADDING_Y} ${theme.BUTTON_PADDING_X}`;\n\t\t}\n\t}}\n\tflex-direction: row;\n\talign-items: center;\n`;\n\ntype ButtonGroupProps = import('./group').ButtonGroupProps;\n\nexport const Group = styled.View<ButtonGroupProps>`\n\tflex-direction: row;\n\tjustify-content: ${({ alignment }) => {\n\t\tswitch (alignment) {\n\t\t\tcase 'start':\n\t\t\t\treturn 'flex-start';\n\t\t\tcase 'end':\n\t\t\t\treturn 'flex-end';\n\t\t\tdefault:\n\t\t\t\treturn 'center';\n\t\t}\n\t}};\n`;\n\nexport const GroupChild = styled.View<ButtonGroupProps & { last: boolean }>`\n\tmargin-end: ${({ last, theme }) => (last ? '0' : theme.BUTTONGROUP_SPACING)};\n\tflex: ${({ alignment }) => (alignment === 'fill' ? '1 1 auto' : 0)};\n`;\n","import * as React from 'react';\nimport { Pressable, GestureResponderEvent } from 'react-native';\nimport Text from '../text';\nimport * as Styled from './styles';\n\nexport type Props = {\n\taccessoryLeft?: React.ReactElement;\n\taccessoryRight?: React.ReactElement;\n\tbackground?: 'solid' | 'clear' | 'outline';\n\tchildren?: React.ReactChild;\n\tdisabled?: boolean;\n\tloading?: boolean;\n\tonPress?: (event: GestureResponderEvent) => void;\n\tonPressIn?: (event: GestureResponderEvent) => void;\n\tonPressOut?: (event: GestureResponderEvent) => void;\n\tonLongPress?: (event: GestureResponderEvent) => void;\n\traised?: boolean;\n\tsize?: 'normal' | 'large' | 'small';\n\tstyle?: import('react-native').ViewStyle;\n\ttitle?: string | React.ReactElement;\n\ttype?: import('@wcpos/common/src/themes').ColorTypes;\n};\n\nconst Button = ({\n\taccessoryLeft,\n\taccessoryRight,\n\tbackground = 'solid',\n\tchildren,\n\tdisabled,\n\tloading,\n\tonPress,\n\tonPressIn,\n\tonPressOut,\n\tonLongPress,\n\traised,\n\tsize = 'normal',\n\tstyle,\n\ttype = 'primary',\n\t...props\n}: Props) => {\n\tconst title = props.title || children;\n\tlet textType = type;\n\tif (background === 'solid') {\n\t\ttextType = type === 'inverse' ? 'primary' : 'inverse';\n\t}\n\n\tconst renderTitle = () => {\n\t\tif (typeof title === 'string') {\n\t\t\treturn (\n\t\t\t\t<Text type={textType} size={size}>\n\t\t\t\t\t{title}\n\t\t\t\t</Text>\n\t\t\t);\n\t\t}\n\t\t// if (React.isValidElement(title) && title?.type?.name === 'Icon') {\n\t\tif (React.isValidElement(title)) {\n\t\t\treturn React.cloneElement(title, { color: '#FFF' });\n\t\t}\n\t\treturn title;\n\t};\n\n\treturn (\n\t\t<Pressable\n\t\t\tonPress={onPress}\n\t\t\tonPressIn={onPressIn}\n\t\t\tonPressOut={onPressOut}\n\t\t\tdelayLongPress={800}\n\t\t\tonLongPress={onLongPress}\n\t\t>\n\t\t\t{({ pressed }) => (\n\t\t\t\t<Styled.Background\n\t\t\t\t\tbackground={background}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tpressed={pressed}\n\t\t\t\t\t// @ts-ignore\n\t\t\t\t\tstyle={style}\n\t\t\t\t\ttype={type}\n\t\t\t\t\tsize={size}\n\t\t\t\t>\n\t\t\t\t\t{/* {accessoryLeft && React.cloneElement(accessoryLeft, { color: '#FFF' })} */}\n\t\t\t\t\t{accessoryLeft && React.cloneElement(accessoryLeft)}\n\t\t\t\t\t{renderTitle()}\n\t\t\t\t\t{accessoryRight && React.cloneElement(accessoryRight, { color: '#FFF' })}\n\t\t\t\t</Styled.Background>\n\t\t\t)}\n\t\t</Pressable>\n\t);\n};\n\nexport default Button;\n","import Button from './button';\nimport { Group } from './group';\n\nexport default Object.assign(Button, { Group });\n","import * as React from 'react';\nimport { ViewStyle } from 'react-native';\nimport * as Styled from './styles';\n\nexport interface ButtonGroupProps {\n\t/**\n\t * Children components (should be `Button` components).\n\t */\n\tchildren: React.ReactNode;\n\t/**\n\t * Alignment of the children.\n\t *\n\t * - `fill` will make all buttons have the same width.\n\t * - `start` will align the buttons at the start.\n\t * - `end` will align the buttons at the end.\n\t */\n\talignment?: 'start' | 'end' | 'fill';\n\t/**\n\t * Style for button group container\n\t */\n\tstyle?: ViewStyle;\n}\n\n/**\n * Arrange `Button` components with consistent spacing.\n */\nexport const Group = ({ children, alignment = 'fill', style }: ButtonGroupProps) => {\n\tconst childrenLength = React.Children.count(children);\n\tconst items = React.Children.map(children, (child, index) => (\n\t\t<Styled.GroupChild alignment={alignment} last={index === childrenLength - 1}>\n\t\t\t{child}\n\t\t</Styled.GroupChild>\n\t));\n\n\treturn (\n\t\t<Styled.Group alignment={alignment} style={style}>\n\t\t\t{items}\n\t\t</Styled.Group>\n\t);\n};\n","import i18n from 'i18next';\nimport { initReactI18next } from 'react-i18next';\nimport en from './en.json';\n\n/**\n * @TODO store i18n json in database\n * @TODO fetch i18n from wcpos plugin\n */\nclass i18nService {\n\tconstructor() {\n\t\ti18n.use(initReactI18next).init({\n\t\t\tlng: 'en',\n\t\t\tfallbackLng: 'en',\n\t\t\tdebug: true,\n\n\t\t\t// have a common namespace used around the full app\n\t\t\tns: ['common'],\n\t\t\tdefaultNS: 'common',\n\n\t\t\tinterpolation: {\n\t\t\t\tescapeValue: false, // not needed for react as it escapes by default\n\t\t\t},\n\n\t\t\t// bootstrap translations\n\t\t\tresources: {\n\t\t\t\ten,\n\t\t\t},\n\t\t});\n\t}\n}\n\nexport default i18nService;\n","import styled from 'styled-components/native';\n\n// eslint-disable-next-line import/prefer-default-export\nexport const Dimmer = styled.View`\n\tposition: absolute;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: rgba(0, 0, 0, 0.85);\n\topacity: 1;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tz-index: 1000;\n`;\n","import Dimmer from './dimmer';\nexport default Dimmer;\n","import * as React from 'react';\nimport { TouchableWithoutFeedback } from 'react-native';\nimport * as Styled from './styles';\n\ntype IDimmerProps = {\n\tchildren?: React.ReactNode;\n\tonPress?: () => void;\n};\n\nconst Dimmer = ({ children, onPress }: IDimmerProps) => {\n\treturn (\n\t\t<TouchableWithoutFeedback onPress={onPress}>\n\t\t\t<Styled.Dimmer>{children}</Styled.Dimmer>\n\t\t</TouchableWithoutFeedback>\n\t);\n};\n\nexport default Dimmer;\n","import * as React from 'react';\nimport {\n\tAnimated,\n\tDimensions,\n\tEasing,\n\tStyleProp,\n\tStyleSheet,\n\tTouchableWithoutFeedback,\n\tView,\n\tViewStyle,\n} from 'react-native';\nimport Portal from '../portal';\nimport Dimmer from '../dimmer';\n\nconst styles = StyleSheet.create({\n\tcontent: {\n\t\tbackgroundColor: 'white',\n\t\tzIndex: 1001,\n\t\theight: '100%',\n\t} as ViewStyle,\n});\n\nconst screen = Dimensions.get('window');\n\nexport interface IModalPropTypes {\n\tstyle?: {};\n\tanimationType: 'none' | 'fade' | 'slide-up' | 'slide-down';\n\tanimationDuration?: number;\n\tvisible: boolean;\n\tmaskClosable?: boolean;\n\tanimateAppear?: boolean;\n\tonClose?: () => void;\n\tonAnimationEnd?: (visible: boolean) => void;\n}\n\nexport default class RCModal extends React.Component<IModalPropTypes, any> {\n\tstatic defaultProps = {\n\t\tanimationType: 'slide-up',\n\t\tanimateAppear: false,\n\t\tanimationDuration: 300,\n\t\tvisible: false,\n\t\tmaskClosable: true,\n\t\tonClose() {},\n\t\tonAnimationEnd(_visible: boolean) {},\n\t} as IModalPropTypes;\n\n\tanimMask: any;\n\tanimDialog: any;\n\n\tconstructor(props: IModalPropTypes) {\n\t\tsuper(props);\n\t\tconst { visible } = props;\n\t\tthis.state = {\n\t\t\tposition: new Animated.Value(this.getPosition(visible)),\n\t\t\tscale: new Animated.Value(this.getScale(visible)),\n\t\t\topacity: new Animated.Value(this.getOpacity(visible)),\n\t\t\tmodalVisible: visible,\n\t\t};\n\t}\n\n\tcomponentWillReceiveProps(nextProps: IModalPropTypes) {\n\t\tif (this.shouldComponentUpdate(nextProps, null)) {\n\t\t\tthis.setState({\n\t\t\t\tmodalVisible: true,\n\t\t\t});\n\t\t}\n\t}\n\n\tshouldComponentUpdate(nextProps: IModalPropTypes, nextState: any) {\n\t\tif (this.props.visible || this.props.visible !== nextProps.visible) {\n\t\t\treturn true;\n\t\t}\n\t\tif (nextState) {\n\t\t\tif (nextState.modalVisible !== this.state.modalVisible) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tcomponentDidMount() {\n\t\tif (this.props.animateAppear && this.props.animationType !== 'none') {\n\t\t\tthis.componentDidUpdate({} as IModalPropTypes);\n\t\t}\n\t}\n\n\tcomponentDidUpdate(prevProps: IModalPropTypes) {\n\t\tconst { props } = this;\n\t\tif (prevProps.visible !== props.visible) {\n\t\t\tthis.animateDialog(props.visible);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tthis.stopDialogAnim();\n\t}\n\n\tanimateMask = (visible: boolean) => {\n\t\tthis.stopMaskAnim();\n\t\tthis.state.opacity.setValue(this.getOpacity(!visible));\n\t\tthis.animMask = Animated.timing(this.state.opacity, {\n\t\t\ttoValue: this.getOpacity(visible),\n\t\t\tduration: this.props.animationDuration,\n\t\t\tuseNativeDriver: true,\n\t\t});\n\t\tthis.animMask.start(() => {\n\t\t\tthis.animMask = null;\n\t\t});\n\t};\n\n\tstopMaskAnim = () => {\n\t\tif (this.animMask) {\n\t\t\tthis.animMask.stop();\n\t\t\tthis.animMask = null;\n\t\t}\n\t};\n\n\tstopDialogAnim = () => {\n\t\tif (this.animDialog) {\n\t\t\tthis.animDialog.stop();\n\t\t\tthis.animDialog = null;\n\t\t}\n\t};\n\n\tanimateDialog = (visible: boolean) => {\n\t\tthis.stopDialogAnim();\n\t\tthis.animateMask(visible);\n\n\t\tlet { animationType, animationDuration } = this.props;\n\t\tanimationDuration = animationDuration!;\n\t\tif (animationType !== 'none') {\n\t\t\tif (animationType === 'slide-up' || animationType === 'slide-down') {\n\t\t\t\tthis.state.position.setValue(this.getPosition(!visible));\n\t\t\t\tthis.animDialog = Animated.timing(this.state.position, {\n\t\t\t\t\ttoValue: this.getPosition(visible),\n\t\t\t\t\tduration: animationDuration,\n\t\t\t\t\teasing: (visible ? Easing.elastic(0.8) : undefined) as any,\n\t\t\t\t\tuseNativeDriver: true,\n\t\t\t\t});\n\t\t\t} else if (animationType === 'fade') {\n\t\t\t\tthis.animDialog = Animated.parallel([\n\t\t\t\t\tAnimated.timing(this.state.opacity, {\n\t\t\t\t\t\ttoValue: this.getOpacity(visible),\n\t\t\t\t\t\tduration: animationDuration,\n\t\t\t\t\t\teasing: (visible ? Easing.elastic(0.8) : undefined) as any,\n\t\t\t\t\t\tuseNativeDriver: true,\n\t\t\t\t\t}),\n\t\t\t\t\tAnimated.spring(this.state.scale, {\n\t\t\t\t\t\ttoValue: this.getScale(visible),\n\t\t\t\t\t\tuseNativeDriver: true,\n\t\t\t\t\t}),\n\t\t\t\t]);\n\t\t\t}\n\n\t\t\tthis.animDialog.start(() => {\n\t\t\t\tthis.animDialog = null;\n\t\t\t\tif (!visible) {\n\t\t\t\t\tthis.setState({\n\t\t\t\t\t\tmodalVisible: false,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (this.props.onAnimationEnd) {\n\t\t\t\t\tthis.props.onAnimationEnd(visible);\n\t\t\t\t}\n\t\t\t});\n\t\t} else if (!visible) {\n\t\t\tthis.setState({\n\t\t\t\tmodalVisible: false,\n\t\t\t});\n\t\t}\n\t};\n\n\tclose = () => {\n\t\tthis.animateDialog(false);\n\t};\n\n\tonMaskClose = () => {\n\t\tif (this.props.maskClosable && this.props.onClose) {\n\t\t\tthis.props.onClose();\n\t\t}\n\t};\n\n\tgetPosition = (visible: boolean) => {\n\t\tif (visible) {\n\t\t\treturn 0;\n\t\t}\n\t\treturn this.props.animationType === 'slide-down' ? -screen.height : screen.height;\n\t};\n\n\tgetScale = (visible: boolean) => {\n\t\treturn visible ? 1 : 1.05;\n\t};\n\n\tgetOpacity = (visible: boolean) => {\n\t\treturn visible ? 1 : 0;\n\t};\n\n\trender() {\n\t\tconst { props } = this;\n\n\t\tif (!this.state.modalVisible) {\n\t\t\treturn null as any;\n\t\t}\n\n\t\tconst animationStyleMap = {\n\t\t\tnone: {},\n\t\t\t'slide-up': { transform: [{ translateY: this.state.position }] },\n\t\t\t'slide-down': { transform: [{ translateY: this.state.position }] },\n\t\t\tfade: {\n\t\t\t\ttransform: [{ scale: this.state.scale }],\n\t\t\t\topacity: this.state.opacity,\n\t\t\t},\n\t\t};\n\n\t\treturn (\n\t\t\t<Portal keyPrefix=\"Modal\">\n\t\t\t\t<Dimmer onPress={this.onMaskClose} />\n\t\t\t\t<Animated.View\n\t\t\t\t\tstyle={[styles.content, props.style, animationStyleMap[props.animationType]]}\n\t\t\t\t>\n\t\t\t\t\t{this.props.children}\n\t\t\t\t</Animated.View>\n\t\t\t</Portal>\n\t\t);\n\t}\n}\n","import styled from 'styled-components/native';\n\nexport const ModalContainer = styled.View``;\n","import PropTypes from 'prop-types';\nimport * as React from 'react';\nimport {\n\tDimensions,\n\tLayoutChangeEvent,\n\tStyleProp,\n\tStyleSheet,\n\tText,\n\tTextStyle,\n\tTouchableHighlight,\n\tTouchableWithoutFeedback,\n\tView,\n\tViewStyle,\n} from 'react-native';\n// import alert from './alert';\nimport ModalView from './view';\n// import operation from './operation';\n// import prompt from './prompt';\nimport { ModalContainer } from './styles';\n\ninterface Action<T = TextStyle> {\n\ttext: string;\n\tonPress?: () => void | Promise<any>;\n\tstyle?: T | string;\n}\n\ninterface ModalPropsType<T> {\n\ttitle?: React.ReactNode;\n\tvisible: boolean;\n\tmaskClosable?: boolean;\n\tclosable?: boolean;\n\tfooter?: Action<T>[];\n\tonClose?: () => void;\n\ttransparent?: boolean;\n\tpopup?: boolean;\n\tanimated?: boolean;\n\tlocale?: object;\n\tanimationType?: any;\n\tonAnimationEnd?: (visible: boolean) => void;\n\tanimateAppear?: boolean;\n\toperation?: boolean;\n}\n\nconst { maxHeight } = StyleSheet.create({\n\tmaxHeight: {\n\t\tmaxHeight: Dimensions.get('window').height,\n\t},\n});\n\nexport interface ModalProps extends ModalPropsType<TextStyle> {\n\tstyle?: StyleProp<ViewStyle>;\n\tbodyStyle?: StyleProp<ViewStyle>;\n}\n\nclass Modal extends React.Component<ModalProps, any> {\n\tstatic defaultProps = {\n\t\tvisible: false,\n\t\tclosable: false,\n\t\tmaskClosable: false,\n\t\tstyle: {},\n\t\tbodyStyle: {},\n\t\tanimationType: 'fade',\n\t\tonClose() {},\n\t\tfooter: [],\n\t\ttransparent: false,\n\t\tpopup: false,\n\t\tanimateAppear: true,\n\t\toperation: false,\n\t};\n\t// static alert: typeof alert;\n\t// static operation: typeof operation;\n\t// static prompt: typeof prompt;\n\n\troot: View | null = null;\n\n\tonFooterLayout = (e: LayoutChangeEvent) => {\n\t\tif (this.root) {\n\t\t\tthis.root.setNativeProps({\n\t\t\t\tstyle: [{ paddingBottom: e.nativeEvent.layout.height }, maxHeight],\n\t\t\t});\n\t\t}\n\t};\n\n\tsaveRoot = (root: any) => {\n\t\tthis.root = root;\n\t};\n\n\trender() {\n\t\tconst {\n\t\t\ttitle,\n\t\t\tclosable,\n\t\t\tfooter,\n\t\t\tchildren,\n\t\t\tstyle,\n\t\t\tanimateAppear,\n\t\t\tmaskClosable,\n\t\t\tpopup,\n\t\t\ttransparent,\n\t\t\tvisible,\n\t\t\tonClose,\n\t\t\tbodyStyle,\n\t\t\tonAnimationEnd,\n\t\t} = this.props;\n\n\t\treturn (\n\t\t\t// <WithTheme styles={this.props.styles} themeStyles={modalStyles}>\n\t\t\t// \t{styles => {\n\t\t\t// \t\tlet btnGroupStyle = styles.buttonGroupV;\n\t\t\t// \t\tlet horizontalFlex = {};\n\t\t\t// \t\tif (footer && footer.length === 2 && !this.props.operation) {\n\t\t\t// \t\t\tbtnGroupStyle = styles.buttonGroupH;\n\t\t\t// \t\t\thorizontalFlex = { flex: 1 };\n\t\t\t// \t\t}\n\t\t\t// \t\tconst buttonWrapStyle =\n\t\t\t// \t\t\tfooter && footer.length === 2 ? styles.buttonWrapH : styles.buttonWrapV;\n\t\t\t// \t\tlet footerDom;\n\t\t\t// \t\tif (footer && footer.length) {\n\t\t\t// \t\t\tconst footerButtons = footer.map((button, i) => {\n\t\t\t// \t\t\t\tlet buttonStyle = {};\n\t\t\t// \t\t\t\tif (this.props.operation) {\n\t\t\t// \t\t\t\t\tbuttonStyle = styles.buttonTextOperation;\n\t\t\t// \t\t\t\t}\n\t\t\t// \t\t\t\tif (button.style) {\n\t\t\t// \t\t\t\t\tbuttonStyle = button.style;\n\t\t\t// \t\t\t\t\tif (typeof buttonStyle === 'string') {\n\t\t\t// \t\t\t\t\t\tconst styleMap: {\n\t\t\t// \t\t\t\t\t\t\t[key: string]: object;\n\t\t\t// \t\t\t\t\t\t} = {\n\t\t\t// \t\t\t\t\t\t\tcancel: {},\n\t\t\t// \t\t\t\t\t\t\tdefault: {},\n\t\t\t// \t\t\t\t\t\t\tdestructive: { color: 'red' },\n\t\t\t// \t\t\t\t\t\t};\n\t\t\t// \t\t\t\t\t\tbuttonStyle = styleMap[buttonStyle] || {};\n\t\t\t// \t\t\t\t\t}\n\t\t\t// \t\t\t\t}\n\t\t\t// \t\t\t\tconst noneBorder =\n\t\t\t// \t\t\t\t\tfooter && footer.length === 2 && i === 1 ? { borderRightWidth: 0 } : {};\n\t\t\t// \t\t\t\tconst onPressFn = () => {\n\t\t\t// \t\t\t\t\tif (button.onPress) {\n\t\t\t// \t\t\t\t\t\tbutton.onPress();\n\t\t\t// \t\t\t\t\t}\n\t\t\t// \t\t\t\t\tif (onClose) {\n\t\t\t// \t\t\t\t\t\tonClose();\n\t\t\t// \t\t\t\t\t}\n\t\t\t// \t\t\t\t};\n\t\t\t// \t\t\t\treturn (\n\t\t\t// \t\t\t\t\t<TouchableHighlight\n\t\t\t// \t\t\t\t\t\tkey={i}\n\t\t\t// \t\t\t\t\t\tstyle={horizontalFlex}\n\t\t\t// \t\t\t\t\t\tunderlayColor=\"#ddd\"\n\t\t\t// \t\t\t\t\t\tonPress={onPressFn}\n\t\t\t// \t\t\t\t\t>\n\t\t\t// \t\t\t\t\t\t<View style={[buttonWrapStyle, noneBorder]}>\n\t\t\t// \t\t\t\t\t\t\t<Text style={[styles.buttonText, buttonStyle]}>{button.text}</Text>\n\t\t\t// \t\t\t\t\t\t</View>\n\t\t\t// \t\t\t\t\t</TouchableHighlight>\n\t\t\t// \t\t\t\t);\n\t\t\t// \t\t\t});\n\t\t\t// \t\t\tfooterDom = (\n\t\t\t// \t\t\t\t<View style={[btnGroupStyle, styles.footer]} onLayout={this.onFooterLayout}>\n\t\t\t// \t\t\t\t\t{footerButtons}\n\t\t\t// \t\t\t\t</View>\n\t\t\t// \t\t\t);\n\t\t\t// \t\t}\n\n\t\t\t// \t\tlet animType = this.props.animationType;\n\t\t\t// \t\tif (transparent) {\n\t\t\t// \t\t\tif (animType === 'slide') {\n\t\t\t// \t\t\t\tanimType = 'slide-up';\n\t\t\t// \t\t\t}\n\t\t\t// \t\t\tconst closableDom = closable ? (\n\t\t\t// \t\t\t\t<View style={[styles.closeWrap]}>\n\t\t\t// \t\t\t\t\t<TouchableWithoutFeedback onPress={onClose}>\n\t\t\t// \t\t\t\t\t\t<View>\n\t\t\t// \t\t\t\t\t\t\t<Text style={[styles.close]}>×</Text>\n\t\t\t// \t\t\t\t\t\t</View>\n\t\t\t// \t\t\t\t\t</TouchableWithoutFeedback>\n\t\t\t// \t\t\t\t</View>\n\t\t\t// \t\t\t) : null;\n\t\t\t// \t\t\treturn (\n\t\t\t// \t\t\t\t<View style={styles.container}>\n\t\t\t// \t\t\t\t\t<ModalView\n\t\t\t// \t\t\t\t\t\tonClose={onClose}\n\t\t\t// \t\t\t\t\t\tanimationType={animType}\n\t\t\t// \t\t\t\t\t\twrapStyle={transparent ? styles.wrap : undefined}\n\t\t\t// \t\t\t\t\t\tstyle={[styles.innerContainer, style]}\n\t\t\t// \t\t\t\t\t\tvisible={visible}\n\t\t\t// \t\t\t\t\t\tonAnimationEnd={onAnimationEnd}\n\t\t\t// \t\t\t\t\t\tanimateAppear={animateAppear}\n\t\t\t// \t\t\t\t\t\tmaskClosable={maskClosable}\n\t\t\t// \t\t\t\t\t>\n\t\t\t// \t\t\t\t\t\t<View style={maxHeight} ref={this.saveRoot}>\n\t\t\t// \t\t\t\t\t\t\t{title ? <Text style={[styles.header]}>{title}</Text> : null}\n\t\t\t// \t\t\t\t\t\t\t<View style={[styles.body, bodyStyle]}>{children}</View>\n\t\t\t// \t\t\t\t\t\t\t{footerDom}\n\t\t\t// \t\t\t\t\t\t\t{closableDom}\n\t\t\t// \t\t\t\t\t\t</View>\n\t\t\t// \t\t\t\t\t</ModalView>\n\t\t\t// \t\t\t\t</View>\n\t\t\t// \t\t\t);\n\t\t\t// \t\t}\n\t\t\t// \t\tif (popup) {\n\t\t\t// \t\t\tlet aType = 'SlideDown';\n\t\t\t// \t\t\tif (animType === 'slide-up') {\n\t\t\t// \t\t\t\tanimType = 'slide-up';\n\t\t\t// \t\t\t\taType = 'SlideUp';\n\t\t\t// \t\t\t} else {\n\t\t\t// \t\t\t\tanimType = 'slide-down';\n\t\t\t// \t\t\t}\n\t\t\t// \t\t\treturn (\n\t\t\t// \t\t\t\t<View style={styles.container}>\n\t\t\t// \t\t\t\t\t<ModalView\n\t\t\t// \t\t\t\t\t\tonClose={onClose}\n\t\t\t// \t\t\t\t\t\tanimationType={animType}\n\t\t\t// \t\t\t\t\t\t// tslint:disable-next-line:jsx-no-multiline-js\n\t\t\t// \t\t\t\t\t\tstyle={[styles.popupContainer, (styles as any)[`popup${aType}`], style]}\n\t\t\t// \t\t\t\t\t\tvisible={visible}\n\t\t\t// \t\t\t\t\t\tonAnimationEnd={onAnimationEnd}\n\t\t\t// \t\t\t\t\t\tanimateAppear={animateAppear}\n\t\t\t// \t\t\t\t\t\tmaskClosable={maskClosable}\n\t\t\t// \t\t\t\t\t>\n\t\t\t// \t\t\t\t\t\t<View ref={this.saveRoot} style={bodyStyle}>\n\t\t\t// \t\t\t\t\t\t\t{children}\n\t\t\t// \t\t\t\t\t\t</View>\n\t\t\t// \t\t\t\t\t</ModalView>\n\t\t\t// \t\t\t\t</View>\n\t\t\t// \t\t\t);\n\t\t\t// \t\t}\n\t\t\t// \t\tif (animType === 'slide') {\n\t\t\t// \t\t\tanimType = undefined;\n\t\t\t// \t\t}\n\t\t\t// \t\treturn (\n\t\t\t<ModalContainer>\n\t\t\t\t<ModalView visible={visible} onClose={onClose}>\n\t\t\t\t\t<View style={{ height: '100%' }}>{children}</View>\n\t\t\t\t</ModalView>\n\t\t\t</ModalContainer>\n\t\t\t// \t\t);\n\t\t\t// \t}}\n\t\t\t// </WithTheme>\n\t\t);\n\t}\n}\n\nexport default Modal;\n","import Modal from './modal';\nexport default Modal;\n","import * as React from 'react';\nimport Modal from '@wcpos/common/src/components/modal';\nimport Button from '@wcpos/common/src/components/button';\nimport Segment from '@wcpos/common/src/components/segment';\nimport TextInput from '@wcpos/common/src/components/textinput';\nimport http from '@wcpos/common/src/lib/http';\n\ntype UserDocument = import('@wcpos/common/src/database').UserDocument;\ntype SiteDocument = import('@wcpos/common/src/database').SiteDocument;\n\ninterface ILoginModalProps {\n\tvisible: boolean;\n\tsetVisible: (visible: boolean) => void;\n\tsite: SiteDocument;\n\tuser: UserDocument;\n}\n\nconst LoginModal = ({ visible, setVisible, site, user }: ILoginModalProps) => {\n\tconst [username, setUsername] = React.useState('');\n\tconst [password, setPassword] = React.useState('');\n\n\tconst handleLogin = async () => {\n\t\tif (site && site.wpApiUrl) {\n\t\t\tconst result = await http.post(`${site.wpApiUrl}wcpos/v1/jwt/authorize`, {\n\t\t\t\tusername,\n\t\t\t\tpassword,\n\t\t\t});\n\t\t\t// set wp credientials\n\t\t\tconst wpUser = await site.addOrUpdateWpCredentials(result.data);\n\t\t\tif (wpUser.jwt) {\n\t\t\t\tsetVisible(false);\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<Modal visible={visible}>\n\t\t\t<Segment>\n\t\t\t\t<TextInput\n\t\t\t\t\tlabel=\"Username\"\n\t\t\t\t\tplaceholder=\"username\"\n\t\t\t\t\tvalue={username}\n\t\t\t\t\tonChange={setUsername}\n\t\t\t\t/>\n\t\t\t\t<TextInput\n\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\tplaceholder=\"password\"\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={setPassword}\n\t\t\t\t/>\n\t\t\t\t<Button title=\"Login\" onPress={handleLogin} />\n\t\t\t</Segment>\n\t\t\t<Button\n\t\t\t\ttitle=\"Close Modal\"\n\t\t\t\tonPress={() => {\n\t\t\t\t\tsetVisible(false);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</Modal>\n\t);\n};\n\nexport default LoginModal;\n","import * as React from 'react';\nimport { useObservableState } from 'observable-hooks';\nimport axios from 'axios';\nimport get from 'lodash/get';\nimport isEmpty from 'lodash/isEmpty';\nimport forEach from 'lodash/forEach';\nimport Tag from '@wcpos/common/src/components/tag';\nimport Text from '@wcpos/common/src/components/text';\nimport Button from '@wcpos/common/src/components/button';\nimport Dialog from '@wcpos/common/src/components/dialog';\n\nimport useAppState from '@wcpos/common/src/hooks/use-app-state';\nimport DatabaseService from '@wcpos/common/src/database';\nimport * as Styled from './styles';\n\ninterface Props {\n\tsite: import('@wcpos/common/src/database').SiteDocument;\n\twpUser: import('@wcpos/common/src/database').WPCredentialsDocument;\n}\n\nfunction sanitizeStoreName(id: string) {\n\treturn `store_${id.replace(':', '_')}`;\n}\n\nconst WpUser = ({ site, wpUser }: Props) => {\n\tconst { setLastUser } = useAppState();\n\tconst [showDialog, setShowDialog] = React.useState(false);\n\tconst [stores] = useObservableState(wpUser.getStores$, []);\n\n\t// \t/**\n\t//  * Populate stores on first render\n\t//  */\n\tReact.useEffect(() => {\n\t\taxios\n\t\t\t.get(`${site.getWcposApiUrl()}/stores`, {\n\t\t\t\theaders: { 'X-WCPOS': '1', Authorization: `Bearer ${wpUser.jwt}` },\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\twpUser.addOrUpdateStores(response.data);\n\t\t\t});\n\t}, []);\n\n\t/**\n\t *\n\t */\n\tconst handleStoreSelect = React.useCallback(async () => {\n\t\tif (stores.length === 1) {\n\t\t\tsetLastUser(stores[0].localId, site, wpUser);\n\t\t}\n\t}, [setLastUser, site, stores, wpUser]);\n\n\t/**\n\t *\n\t */\n\tconst handleStoreRemove = React.useCallback(async () => {\n\t\tforEach(wpUser.stores, async (id) => {\n\t\t\t// @ts-ignore\n\t\t\tconst db = await DatabaseService.getStoreDB(sanitizeStoreName(id));\n\t\t\tawait db?.remove();\n\t\t});\n\t\t// need to remove wpUser from site from site\n\t\tawait site.update({\n\t\t\t$pullAll: {\n\t\t\t\twpCredentials: [wpUser.localId],\n\t\t\t},\n\t\t});\n\t\tawait wpUser.remove();\n\n\t\tsetShowDialog(false);\n\t}, [site, wpUser]);\n\n\t/**\n\t *\n\t */\n\tconst handleWpUserRemove = React.useCallback(() => {\n\t\tsetShowDialog(true);\n\t}, [setShowDialog]);\n\n\treturn (\n\t\t<>\n\t\t\t<Tag\n\t\t\t\tremovable\n\t\t\t\tonPress={handleStoreSelect}\n\t\t\t\tonRemove={handleWpUserRemove}\n\t\t\t\tdisabled={stores.length === 0}\n\t\t\t>\n\t\t\t\t{wpUser.displayName ? wpUser.displayName : 'No name?'}\n\t\t\t</Tag>\n\t\t\t{showDialog && (\n\t\t\t\t<Dialog\n\t\t\t\t\ttitle=\"Delete User\"\n\t\t\t\t\topen\n\t\t\t\t\tonClose={() => {\n\t\t\t\t\t\tsetShowDialog(false);\n\t\t\t\t\t}}\n\t\t\t\t\tprimaryAction={{ label: 'Confirm', action: handleStoreRemove, type: 'critical' }}\n\t\t\t\t\tsecondaryActions={[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlabel: 'Cancel',\n\t\t\t\t\t\t\taction: () => {\n\t\t\t\t\t\t\t\tsetShowDialog(false);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t]}\n\t\t\t\t>\n\t\t\t\t\t<Dialog.Section>\n\t\t\t\t\t\t<Text>You are about to remove all stores associated with this user</Text>\n\t\t\t\t\t</Dialog.Section>\n\t\t\t\t</Dialog>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default WpUser;\n","import styled from 'styled-components/native';\n\nexport const Container = styled.View`\n\talign-items: center;\n\tjustify-content: center;\n\tflex: 1;\n\tpadding: ${({ theme }) => `${theme.PAGE_MAIN_PADDING_Y} ${theme.PAGE_MAIN_PADDING_X}`};\n`;\n\nexport const SiteWrapper = styled.View`\n\tflex-direction: row;\n\talign-items: center;\n\tpadding: 5px;\n`;\n\nexport const SiteTextWrapper = styled.View`\n\tflex: 1;\n\tflex-direction: column;\n\tpadding: 5px;\n`;\n\nexport const SiteStatusWrapper = styled.View`\n\tflex-direction: row;\n`;\n\nexport const WpUserWrapper = styled.View``;\n","import * as React from 'react';\nimport { View } from 'react-native';\nimport { tap, switchMap, map } from 'rxjs/operators';\nimport { useObservableState } from 'observable-hooks';\nimport { useNavigation } from '@react-navigation/native';\nimport Avatar from '@wcpos/common/src/components/avatar';\nimport Text from '@wcpos/common/src/components/text';\nimport Button from '@wcpos/common/src/components/button';\nimport Icon from '@wcpos/common/src/components/icon';\nimport Dialog from '@wcpos/common/src/components/dialog';\nimport Modal from './login-modal';\nimport WpUser from './wp-user';\nimport * as Styled from './styles';\n\ntype SiteDocument = import('@wcpos/common/src/database').SiteDocument;\ntype UserDocument = import('@wcpos/common/src/database').UserDocument;\ntype WPCredentialsDocument = import('@wcpos/common/src/database').WPCredentialsDocument;\n\ninterface ISiteProps {\n\tsite: SiteDocument;\n\tuser: UserDocument;\n}\n/**\n * Options for fetching favicons\n * - https://api.statvoo.com/favicon/?url=${url}\n * - https://www.google.com/s2/favicons?domain=${url}\n * - https://favicongrabber.com/api/grab/${url}\n    \n * - https://api.faviconkit.com/${url}/144\n */\nconst Site = ({ site, user }: ISiteProps) => {\n\tconst status = useObservableState(site.connection.status$);\n\tconst active = useObservableState(site.connection.active$);\n\tconst name = useObservableState(site.name$) as string;\n\tconst [visible, setVisible] = React.useState(false);\n\tconst [openConfirmDialog, setOpenConfirmDialog] = React.useState(false);\n\tconst showConfirmDialog = React.useCallback(() => setOpenConfirmDialog(true), []);\n\tconst hideConfirmDialog = React.useCallback(() => setOpenConfirmDialog(false), []);\n\tconst navigation = useNavigation();\n\n\t/**  */\n\tconst [wpUsers] = useObservableState(site.getWpCredentials$, []);\n\n\tconst handleRemoveSite = async () => {\n\t\tawait user.removeSite(site);\n\t};\n\n\t/**\n\t *\n\t */\n\tconst renderStatus = React.useMemo(() => {\n\t\tif (!status) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// @ts-ignore\n\t\treturn <Text size=\"small\">{status.message}</Text>;\n\t}, [status]);\n\n\t/**\n\t *\n\t */\n\tconst renderActiveIcon = React.useMemo(() => {\n\t\tlet type = 'secondary';\n\t\tif (active) {\n\t\t\ttype = 'success';\n\t\t}\n\t\tif (status && status.type === 'error') {\n\t\t\ttype = 'critical';\n\t\t}\n\n\t\t// @ts-ignore\n\t\treturn <Icon name=\"circle\" type={type} size=\"x-small\" />;\n\t}, [active, status]);\n\n\t/**\n\t *\n\t */\n\tconst renderWpUsers = React.useMemo(() => {\n\t\tif (!active) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<View style={{ flexDirection: 'row', alignItems: 'center' }}>\n\t\t\t\t\t<Text style={{ marginRight: 5 }}>Logged in users</Text>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\ttitle=\"Add new user\"\n\t\t\t\t\t\ttype=\"secondary\"\n\t\t\t\t\t\tbackground=\"outline\"\n\t\t\t\t\t\tonPress={() => {\n\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\tnavigation.navigate('Modal', { login: { site } });\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</View>\n\t\t\t\t{wpUsers.map((wpUser) => (\n\t\t\t\t\t<WpUser key={wpUser.localId} wpUser={wpUser} site={site} />\n\t\t\t\t))}\n\t\t\t</>\n\t\t);\n\t}, [active, navigation, site, wpUsers]);\n\n\treturn (\n\t\t<Styled.SiteWrapper>\n\t\t\t<Avatar src={`https://api.faviconkit.com/${site.url}/144`} />\n\t\t\t<Styled.SiteTextWrapper>\n\t\t\t\t<Text weight=\"bold\">{name || site.url}</Text>\n\t\t\t\t<Text size=\"small\" type=\"secondary\">\n\t\t\t\t\t{site.url}\n\t\t\t\t</Text>\n\t\t\t\t<Styled.SiteStatusWrapper>\n\t\t\t\t\t{renderActiveIcon}\n\t\t\t\t\t{renderStatus}\n\t\t\t\t</Styled.SiteStatusWrapper>\n\t\t\t\t{renderWpUsers}\n\t\t\t</Styled.SiteTextWrapper>\n\t\t\t<Icon\n\t\t\t\tname=\"remove\"\n\t\t\t\tsize=\"large\"\n\t\t\t\ttype=\"critical\"\n\t\t\t\tonPress={showConfirmDialog}\n\t\t\t\tbackgroundStyle=\"none\"\n\t\t\t/>\n\t\t\t{visible && <Modal site={site} user={user} visible={visible} setVisible={setVisible} />}\n\t\t\t{openConfirmDialog && (\n\t\t\t\t<Dialog\n\t\t\t\t\topen\n\t\t\t\t\ttitle=\"Remove site\"\n\t\t\t\t\tonClose={hideConfirmDialog}\n\t\t\t\t\tprimaryAction={{ label: 'Delete', action: handleRemoveSite, type: 'critical' }}\n\t\t\t\t\tsecondaryActions={[{ label: 'Cancel', action: hideConfirmDialog }]}\n\t\t\t\t>\n\t\t\t\t\t<Dialog.Section>\n\t\t\t\t\t\t<Text>Delete site</Text>\n\t\t\t\t\t</Dialog.Section>\n\t\t\t\t</Dialog>\n\t\t\t)}\n\t\t</Styled.SiteWrapper>\n\t);\n};\n\nexport default Site;\n","import * as React from 'react';\nimport { useObservable, useObservableState } from 'observable-hooks';\nimport useAppState from '@wcpos/common/src/hooks/use-app-state';\nimport Segment from '@wcpos/common/src/components/segment';\nimport TextInput from '@wcpos/common/src/components/textinput';\nimport Text from '@wcpos/common/src/components/text';\nimport useWhyDidYouUpdate from '@wcpos/common/src/hooks/use-why-did-you-update';\nimport Site from './site';\nimport * as Styled from './styles';\n\ntype UserDocument = import('@wcpos/common/src/database').UserDocument;\n\n/**\n *\n */\nconst Auth = () => {\n\tconst { user } = useAppState() as { user: UserDocument };\n\tconst [sites] = useObservableState(user.getSites$, []);\n\n\tconst onConnect = React.useCallback(\n\t\tasync (url: string): Promise<void> => {\n\t\t\tconst newSiteId = await user.addSiteByUrl(url);\n\t\t\t// if (newSiteId) {\n\t\t\t// \tuser.connectSite(newSiteId);\n\t\t\t// }\n\t\t\t// const trimUrl = url.replace(/^.*:\\/{2,}|\\s|\\/+$/g, '');\n\t\t\t// if (trimUrl) {\n\t\t\t// \tconst newSite = await appUser.database.action(async () =>\n\t\t\t// \t\tappUser.sites.collection.create((site) => {\n\t\t\t// \t\t\tsite.url = `https://${trimUrl}`;\n\t\t\t// \t\t\tsite.app_user.set(appUser);\n\t\t\t// \t\t})\n\t\t\t// \t);\n\t\t\t// \tnewSite?.connect();\n\t\t\t// }\n\t\t},\n\t\t[user]\n\t);\n\n\tuseWhyDidYouUpdate('Auth', { user, sites, onConnect });\n\n\treturn (\n\t\t<Styled.Container>\n\t\t\t<Segment style={{ width: '90%', maxWidth: 460 }}>\n\t\t\t\t<Text size=\"large\">Connect!</Text>\n\t\t\t\t<Text>Enter the URL of your WooCommerce store:</Text>\n\t\t\t\t<TextInput\n\t\t\t\t\tlabel=\"Connect\"\n\t\t\t\t\tprefix=\"https://\"\n\t\t\t\t\taction=\"Connect\"\n\t\t\t\t\tonAction={onConnect}\n\t\t\t\t\ttype=\"url\"\n\t\t\t\t\tclearable\n\t\t\t\t\thideLabel\n\t\t\t\t/>\n\t\t\t</Segment>\n\t\t\t{sites && sites.length > 0 && (\n\t\t\t\t<Segment.Group style={{ width: '90%', maxWidth: 460, height: 'auto' }}>\n\t\t\t\t\t{/* <Segment content=\"Sites\" /> */}\n\t\t\t\t\t{sites.map((site) => (\n\t\t\t\t\t\t<Segment key={site.localId}>\n\t\t\t\t\t\t\t<Site site={site} user={user} />\n\t\t\t\t\t\t</Segment>\n\t\t\t\t\t))}\n\t\t\t\t</Segment.Group>\n\t\t\t)}\n\t\t</Styled.Container>\n\t);\n};\n\nexport default Auth;\n","import * as React from 'react';\nimport Dialog from '@wcpos/common/src/components/dialog';\nimport TextInput from '@wcpos/common/src/components/textinput';\nimport http from '@wcpos/common/src/lib/http';\nimport useAppState from '@wcpos/common/src/hooks/use-app-state';\n\ninterface LoginFormProps {\n\tonClose: () => void;\n\tsite?: import('@wcpos/common/src/database').SiteDocument;\n}\n\nconst LoginForm = ({ onClose, site }: LoginFormProps) => {\n\tconst [username, setUsername] = React.useState('');\n\tconst [password, setPassword] = React.useState('');\n\tconst { site: currentSite } = useAppState();\n\n\tconst handleLogin = async () => {\n\t\tconst _site = site || currentSite;\n\t\tif (_site && _site.wpApiUrl) {\n\t\t\tconst result = await http.post(`${_site.wpApiUrl}wcpos/v1/jwt/authorize`, {\n\t\t\t\tusername,\n\t\t\t\tpassword,\n\t\t\t});\n\t\t\t// add or update wpUser\n\t\t\tconst success = await _site.addOrUpdateWpCredentials(result.data);\n\t\t\tif (success) {\n\t\t\t\tonClose();\n\t\t\t}\n\t\t}\n\t};\n\n\treturn (\n\t\t<Dialog\n\t\t\ttitle=\"Login\"\n\t\t\topen\n\t\t\tonClose={onClose}\n\t\t\tprimaryAction={{ label: 'Login', action: handleLogin }}\n\t\t>\n\t\t\t<Dialog.Section>\n\t\t\t\t<TextInput\n\t\t\t\t\tlabel=\"Username\"\n\t\t\t\t\tplaceholder=\"username\"\n\t\t\t\t\tvalue={username}\n\t\t\t\t\tonChange={setUsername}\n\t\t\t\t/>\n\t\t\t\t<TextInput\n\t\t\t\t\tlabel=\"Password\"\n\t\t\t\t\tplaceholder=\"password\"\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={setPassword}\n\t\t\t\t/>\n\t\t\t</Dialog.Section>\n\t\t</Dialog>\n\t);\n};\n\nexport default LoginForm;\n","import * as React from 'react';\nimport get from 'lodash/get';\nimport Text from '@wcpos/common/src/components/text';\nimport Dialog from '@wcpos/common/src/components/dialog';\nimport LoginForm from './login-form';\n\ntype ModalScreenProps = import('@wcpos/common/src/navigators/app').ModalScreenProps;\n\nexport const ModalScreen = ({ route, navigation }: ModalScreenProps) => {\n\tconst { params } = route;\n\n\tif (params.login) {\n\t\treturn <LoginForm onClose={() => navigation.goBack()} {...params.login} />;\n\t}\n\n\treturn (\n\t\t<Dialog\n\t\t\tsectioned\n\t\t\ttitle=\"Nice Modal\"\n\t\t\topen\n\t\t\tonClose={() => navigation.goBack()}\n\t\t\tprimaryAction={{ label: 'Got it!', action: () => navigation.goBack() }}\n\t\t\tsecondaryActions={[\n\t\t\t\t{ label: 'I am dumb', action: () => navigation.goBack() },\n\t\t\t\t{ label: 'Share', action: () => navigation.goBack() },\n\t\t\t]}\n\t\t>\n\t\t\t<Text>Text inside the Dialog!</Text>\n\t\t\t<Text>Params from route: {route.params}</Text>\n\t\t</Dialog>\n\t);\n};\n","import * as React from 'react';\nimport { RouteProp, CompositeNavigationProp } from '@react-navigation/native';\nimport { createStackNavigator, StackNavigationProp } from '@react-navigation/stack';\nimport { DrawerNavigationProp } from '@react-navigation/drawer';\nimport useAppState from '@wcpos/common/src/hooks/use-app-state';\nimport useWhyDidYouUpdate from '@wcpos/common/src/hooks/use-why-did-you-update';\nimport Auth from '@wcpos/common/src/screens/auth';\nimport Modal from '@wcpos/common/src/screens/modal';\n\ntype DrawerParamList = import('./main').DrawerParamList;\n\nconst MainNavigator = React.lazy(() => import('./main'));\n\nexport type AppStackParamList = {\n\tAuth: undefined;\n\tMain: undefined;\n\tModal: { login?: { site?: import('@wcpos/common/src/database').SiteDocument } };\n};\n\nconst Stack = createStackNavigator<AppStackParamList>();\ntype StackNavigatorProps = React.ComponentProps<typeof Stack.Navigator>;\n\nexport interface MainScreenProps {\n\tnavigation: CompositeNavigationProp<\n\t\tDrawerNavigationProp<DrawerParamList>,\n\t\tStackNavigationProp<AppStackParamList, 'Main'>\n\t>;\n\troute: RouteProp<AppStackParamList, 'Main'>;\n}\n\nexport interface AuthScreenProps {\n\tnavigation: StackNavigationProp<AppStackParamList, 'Auth'>;\n\troute: RouteProp<AppStackParamList, 'Auth'>;\n}\n\nexport interface ModalScreenProps {\n\tnavigation: StackNavigationProp<AppStackParamList, 'Modal'>;\n\troute: RouteProp<AppStackParamList, 'Modal'>;\n}\n\n/**\n *\n */\nconst AppNavigator = (props: Partial<StackNavigatorProps>) => {\n\tconst { storeDB } = useAppState();\n\n\tuseWhyDidYouUpdate('AppNavigator', { props, storeDB });\n\n\treturn (\n\t\t<Stack.Navigator screenOptions={{ headerShown: false }}>\n\t\t\t{storeDB ? (\n\t\t\t\t<Stack.Screen name=\"Main\" component={MainNavigator} />\n\t\t\t) : (\n\t\t\t\t<Stack.Screen name=\"Auth\" component={Auth} />\n\t\t\t)}\n\t\t\t<Stack.Screen name=\"Modal\" component={Modal} options={{ presentation: 'transparentModal' }} />\n\t\t</Stack.Navigator>\n\t);\n};\n\nexport default AppNavigator;\n","import * as React from 'react';\nimport { Animated } from 'react-native';\nimport Svg, { Path, G, Defs, Use, Symbol } from 'react-native-svg';\n\nconst AnimatedPath = Animated.createAnimatedComponent(Path);\n\ninterface Props {\n\tanimate?: boolean;\n}\n\nconst Logo: React.FC<Props> = ({ animate }) => {\n\t// const scaleY = React.useRef(new Animated.Value(1));\n\n\t// const pulse = () => {\n\t// \tAnimated.loop(\n\t// \t\tAnimated.sequence([\n\t// \t\t\tAnimated.timing(scaleY.current, { toValue: 0.7, useNativeDriver: true }),\n\t// \t\t\tAnimated.timing(scaleY.current, { toValue: 1, useNativeDriver: true }),\n\t// \t\t])\n\t// \t).start();\n\t// };\n\n\t// React.useEffect(() => {\n\t// \tif (animate) {\n\t// \t\tpulse();\n\t// \t} else {\n\t// \t\tscaleY.current.stopAnimation();\n\t// \t}\n\t// }, [animate]);\n\n\treturn (\n\t\t<Svg viewBox=\"0 0 1260 1260\" width={100} height={100}>\n\t\t\t<Path\n\t\t\t\tfill=\"#323A46\"\n\t\t\t\td=\"M0,90 q0,-90 90,-90 l1080,0 q90,0 90,90 l0,810 q0,90 -90,90 l-810,0 L0,1260 Z\"\n\t\t\t/>\n\t\t\t<G>\n\t\t\t\t<G fill=\"#CD2C24\">\n\t\t\t\t\t<Path d=\"M0,90 q0,-90 90,-90 l90,0 l0,270 a90,90 0 1,1 -180,0 Z\" />\n\t\t\t\t\t<Path d=\"M360,0 l180,0 l0,270 a90,90 0 1,1 -180,0 Z\" />\n\t\t\t\t\t<Path d=\"M720,0 l180,0 l0,270 a90,90 0 1,1 -180,0 Z\" />\n\t\t\t\t\t<Path d=\"M1080,0 l90,0 q90,0 90,90 l0,180 a90,90 0 1,1 -180,0 Z\" />\n\t\t\t\t</G>\n\t\t\t\t<G fill=\"#F5E5C0\">\n\t\t\t\t\t<Path d=\"M180,0 l180,0 l0,270 a90,90 0 1,1 -180,0 Z\" />\n\t\t\t\t\t<Path d=\"M540,0 l180,0 l0,270 a90,90 0 1,1 -180,0 Z\" />\n\t\t\t\t\t<Path d=\"M900,0 l180,0 l0,270 a90,90 0 1,1 -180,0 Z\" />\n\t\t\t\t</G>\n\t\t\t</G>\n\t\t\t<Svg\n\t\t\t\tviewBox=\"0 0 1200 400\"\n\t\t\t\twidth={1060}\n\t\t\t\theight={1260}\n\t\t\t\tx={100}\n\t\t\t\ty={50}\n\t\t\t\tstroke=\"#FFF\"\n\t\t\t\tstrokeWidth=\"60\"\n\t\t\t\tstrokeLinecap=\"round\"\n\t\t\t\tfill=\"#FFF\"\n\t\t\t\tfillOpacity=\"0\"\n\t\t\t>\n\t\t\t\t<Path d=\"M30,480 l0,-450m0,150a150,150 0 1,0 300,0a150,150 0 1,0 -300,0\" />\n\t\t\t\t<Path d=\"M600,30 m-150,150 a150,150 0 1,0 300,0 a150,150 0 1,0 -300,0\" />\n\t\t\t\t<Path d=\"M1170,70 c-25,-15 -75,-40 -150,-40 q-150,0 -150,75t150,75t150,75 t-150,75 c-75,0 -125,-25 -150,-40\" />\n\t\t\t</Svg>\n\t\t</Svg>\n\t);\n};\n\nexport default Logo;\n","import styled from 'styled-components/native';\n\nexport const Container = styled.View`\n\twidth: 100%;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: ${({ theme }) => `${theme.PAGE_MAIN_PADDING_Y} ${theme.PAGE_MAIN_PADDING_X}`};\n`;\n","import * as React from 'react';\nimport Logo from '@wcpos/common/src/components/logo';\nimport * as Styled from './styles';\n\n/**\n *\n */\nexport const Splash = () => {\n\tconsole.log('splash render');\n\n\treturn (\n\t\t<Styled.Container>\n\t\t\t<Logo />\n\t\t</Styled.Container>\n\t);\n};\n","import 'react-native-gesture-handler';\nimport * as React from 'react';\nimport { SafeAreaProvider } from 'react-native-safe-area-context';\nimport { Text } from 'react-native';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { ThemeProvider } from 'styled-components/native';\nimport { AppStateProvider } from './hooks/use-app-state';\nimport TranslationService from './services/translation';\nimport AppNavigator from './navigators';\nimport Portal from './components/portal';\nimport ErrorBoundary from './components/error-boundary';\nimport SplashScreen from './screens/splash';\nimport Url from './lib/url-parse';\nimport { AppProviderSizeProvider } from './hooks/use-position-in-app';\nimport { SnackbarProvider } from './components/snackbar/snackbar-provider';\nimport { AuthLoginProvider } from './hooks/use-auth-login';\n\n\nconst i18n = new TranslationService();\n\ninterface IntialProps {\n\thomepage?: string;\n}\n\nconst App = ({ homepage }: IntialProps) => {\n\tconst prefixes = ['wcpos://'];\n\tlet pathname = '';\n\n\tif (homepage) {\n\t\tconst parsedUrl = new Url(homepage);\n\t\tprefixes.push(parsedUrl.host);\n\t\tpathname = parsedUrl.pathname;\n\t}\n\n\tconst linking = {\n\t\tprefixes,\n\t\tconfig: {\n\t\t\tscreens: {\n\t\t\t\tAuth: `${pathname}/login`,\n\t\t\t\tMain: {\n\t\t\t\t\tpath: pathname,\n\t\t\t\t\tscreens: {\n\t\t\t\t\t\tPOS: {\n\t\t\t\t\t\t\tpath: '',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tProducts: {\n\t\t\t\t\t\t\tpath: 'products',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tOrders: {\n\t\t\t\t\t\t\tpath: 'orders',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tCustomers: {\n\t\t\t\t\t\t\tpath: 'customers',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tSupport: {\n\t\t\t\t\t\t\tpath: 'support',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tModal: '#',\n\t\t\t},\n\t\t},\n\t};\n\n\treturn (\n\t\t<ErrorBoundary>\n\t\t\t<React.Suspense fallback={<Text>loading app...</Text>}>\n\t\t\t\t{/* @TODO - suspend AppStateProvider until state is ready */}\n\t\t\t\t<AppStateProvider i18n={i18n}>\n\t\t\t\t\t{(isAppStateReady: boolean, theme: any) => (\n\t\t\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t\t\t<SafeAreaProvider style={{ overflow: 'hidden' }}>\n\t\t\t\t\t\t\t\t<AppProviderSizeProvider>\n\t\t\t\t\t\t\t\t\t<SnackbarProvider>\n\t\t\t\t\t\t\t\t\t\t<Portal.Provider>\n\t\t\t\t\t\t\t\t\t\t\t{isAppStateReady ? (\n\t\t\t\t\t\t\t\t\t\t\t\t<NavigationContainer linking={linking}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<AuthLoginProvider>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<AppNavigator />\n\t\t\t\t\t\t\t\t\t\t\t\t\t</AuthLoginProvider>\n\t\t\t\t\t\t\t\t\t\t\t\t</NavigationContainer>\n\t\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t\t<SplashScreen />\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t\t<Portal.Manager />\n\t\t\t\t\t\t\t\t\t\t</Portal.Provider>\n\t\t\t\t\t\t\t\t\t</SnackbarProvider>\n\t\t\t\t\t\t\t\t</AppProviderSizeProvider>\n\t\t\t\t\t\t\t</SafeAreaProvider>\n\t\t\t\t\t\t</ThemeProvider>\n\t\t\t\t\t)}\n\t\t\t\t</AppStateProvider>\n\t\t\t</React.Suspense>\n\t\t</ErrorBoundary>\n\t);\n};\n\nexport default App;\n","// @ts-nocheck\n// import './wdyr'; // Why Did You Render\nimport { AppRegistry } from 'react-native-web';\nimport App from '@wcpos/common/src/app';\n\nimport './index.css';\n\n// interface WCPOSWindow extends Window {\n// \tinitialProps: Record<string, unknown>;\n// }\n// declare let window: WCPOSWindow;\n\n// register the app\nAppRegistry.registerComponent('wcpos', () => App);\n\nAppRegistry.runApplication('wcpos', {\n\trootTag: document.getElementById('root'),\n\tinitialProps: window.initialProps,\n});\n","import styled from 'styled-components/native';\nimport { Text as StyledText } from '../text/styles';\n\nexport const Container = styled.View`\n\tbackground-color: ${({ theme }) => theme.DIALOG_BACKGROUND_COLOR};\n\twidth: ${({ theme }) => theme.DIALOG_WIDTH};\n\tmin-width: ${({ theme }) => theme.DIALOG_MIN_WIDTH};\n\tborder-radius: ${({ theme }) => theme.DIALOG_BORDER_RADIUS};\n\tshadow-offset: { width: 0, height: 1 };\n\tshadow-opacity: 0.22;\n\tshadow-radius: 7.5px;\n\tshadow-color: #000;\n\televation: 8;\n`;\n\nexport const Header = styled.View`\n\tpadding: 10px;\n\tflex-direction: row;\n`;\n\nexport const HeaderText = styled(StyledText)`\n\tflex: 1;\n`;\n\nexport const Section = styled.View`\n\tpadding: 10px;\n`;\n\nexport const Footer = styled.View`\n\tpadding: 10px;\n`;\n","import * as React from 'react';\nimport Icon from '../icon';\nimport * as Styled from './styles';\n\nexport interface HeaderProps {\n\ttitle?: string;\n\tonClose: () => void;\n\thideClose?: boolean;\n}\n\n/**\n * Displays the Modal Header.\n */\nexport const Header = ({ title, onClose, hideClose }: HeaderProps) => (\n\t<Styled.Header>\n\t\t<Styled.HeaderText size=\"large\">{title}</Styled.HeaderText>\n\t\t{hideClose ? null : <Icon name=\"close\" onPress={onClose} />}\n\t</Styled.Header>\n);\n","import * as React from 'react';\nimport Button from '../button';\nimport * as Styled from './styles';\n\nexport interface Actions {\n\t/**\n\t * Label to display.\n\t */\n\tlabel: string;\n\t/**\n\t * Action to execute on click.\n\t */\n\taction?: () => void;\n\t/**\n\t *\n\t */\n\ttype?: import('@wcpos/common/src/themes').ColorTypes;\n}\n\nexport interface FooterProps {\n\t/**\n\t * Primary action to perform in the Dialog. Will be displayed as a Primary Button.\n\t */\n\tprimaryAction: Actions;\n\t/**\n\t * Optional Secondary actions that can be performed (will appear in reverse order,\n\t * as first option is the most important and should appear on the right).\n\t *\n\t * Use secondary options sparingly, most times, a maximum of 1 secondary action should\n\t * be enough.\n\t */\n\tsecondaryActions?: Actions[];\n}\n\n/**\n * Displays the Modal Footer.\n */\nexport const Footer = ({ primaryAction, secondaryActions = [] }: FooterProps) => (\n\t<Styled.Footer>\n\t\t<Button.Group alignment=\"end\">\n\t\t\t{secondaryActions?.reverse()?.map(({ action, label, type = 'secondary' }, i) => (\n\t\t\t\t<Button key={i} onPress={action} type={type}>\n\t\t\t\t\t{label}\n\t\t\t\t</Button>\n\t\t\t))}\n\t\t\t<Button\n\t\t\t\tonPress={primaryAction.action}\n\t\t\t\ttype={primaryAction.type ? primaryAction.type : 'primary'}\n\t\t\t>\n\t\t\t\t{primaryAction.label}\n\t\t\t</Button>\n\t\t</Button.Group>\n\t</Styled.Footer>\n);\n","import * as React from 'react';\nimport * as Styled from './styles';\n\nexport interface SectionProps {\n\t/**\n\t * Content to put in Dialog Section.\n\t */\n\tchildren: React.ReactNode;\n}\n\n/**\n * Wraps Dialog content in a section which provides correct padding for content.\n */\nexport const Section = ({ children }: SectionProps) => <Styled.Section>{children}</Styled.Section>;\n","import React from 'react';\nimport { Modal } from 'react-native';\nimport { Header } from './header';\nimport { FooterProps, Footer } from './footer';\nimport { Section, SectionProps } from './section';\nimport Backdrop from '../backdrop';\nimport * as Styled from './styles';\n\nexport type DialogProps = {\n\t/**\n\t * Dialog Title.\n\t */\n\ttitle?: string;\n\t/**\n\t * Determines if the Dialog is shown or not.\n\t */\n\topen: boolean;\n\t/**\n\t * Function called when the dialog is closed.\n\t */\n\tonClose: () => void;\n\t/**\n\t * Dialog content.\n\t */\n\tchildren: React.ReactNode;\n\t/**\n\t * Provides a default `Dialog.Section` in the Dialog. All content will be wrapped in it.\n\t */\n\tsectioned?: boolean;\n\t/**\n\t * Set to true to hide the close modal button.\n\t */\n\thideClose?: boolean;\n} & FooterProps;\n\n/**\n * Show interactive content on top of an existing screen.\n * It should be used thoughtfully and sparingly, as it stops the user in its current flow.\n */\nexport const Dialog: React.FC<DialogProps> & { Section: typeof Section } = ({\n\ttitle,\n\topen,\n\tonClose,\n\tchildren,\n\tprimaryAction,\n\tsecondaryActions = [],\n\tsectioned = false,\n\thideClose = false,\n}) => {\n\treturn (\n\t\t<Modal\n\t\t\tvisible={open}\n\t\t\tonDismiss={onClose}\n\t\t\tonRequestClose={onClose}\n\t\t\tanimationType=\"fade\"\n\t\t\ttransparent\n\t\t>\n\t\t\t<Backdrop open={open}>\n\t\t\t\t<Styled.Container>\n\t\t\t\t\t<Header title={title} onClose={onClose} hideClose={hideClose} />\n\t\t\t\t\t{sectioned ? <Section>{children}</Section> : children}\n\t\t\t\t\t<Footer primaryAction={primaryAction} secondaryActions={secondaryActions} />\n\t\t\t\t</Styled.Container>\n\t\t\t</Backdrop>\n\t\t</Modal>\n\t);\n};\n\nDialog.Section = Section;\nexport type DialogSectionProps = SectionProps;\n","import { Platform as RNPlatform } from 'react-native';\n\ntype PlatformType = typeof RNPlatform & { isElectron: boolean; isStandalone: boolean };\n\nfunction isElectron() {\n\t// https://github.com/cheton/is-electron\n\treturn false;\n}\n\nconst Platform: PlatformType = {\n\t...RNPlatform,\n\tisElectron: isElectron(),\n\tisStandalone: (window.navigator as any).standalone,\n};\n\nexport default Platform;\n","//\n// Method to normalize size of fonts across devices\n//\n// Some code taken from https://jsfiddle.net/97ty7yjk/ &\n// https://stackoverflow.com/questions/34837342/font-size-on-iphone-6s-plus\n//\n// author: @xiaoneng\n// date: 14/10/2016\n// version: 03\n//\n\nimport { Platform, PixelRatio, Dimensions } from 'react-native';\n\nconst pixelRatio = PixelRatio.get();\nconst deviceHeight = Dimensions.get('window').height;\nconst deviceWidth = Dimensions.get('window').width;\nconst platform = Platform.OS;\n\n// -- Testing Only --\n// const fontScale = PixelRatio.getFontScale();\n// const layoutSize = PixelRatio.getPixelSizeForLayoutSize(14);\n// console.log('normalizeText getPR ->', pixelRatio);\n// console.log('normalizeText getFS ->', fontScale);\n// console.log('normalizeText getDH ->', deviceHeight);\n// console.log('normalizeText getDW ->', deviceWidth);\n// console.log('normalizeText getPSFLS ->', layoutSize);\n\nconst normalize = (size: number) => {\n\tif (platform === 'web') {\n\t\treturn size;\n\t}\n\n\tif (pixelRatio >= 2 && pixelRatio < 3) {\n\t\t// iphone 5s and older Androids\n\t\tif (deviceWidth < 360) {\n\t\t\treturn size * 0.95;\n\t\t}\n\n\t\t// iphone 5\n\t\tif (deviceHeight < 667) {\n\t\t\treturn size;\n\t\t\t// iphone 6-6s\n\t\t}\n\n\t\tif (deviceHeight >= 667 && deviceHeight <= 735) {\n\t\t\treturn size * 1.15;\n\t\t}\n\t\t// older phablets\n\t\treturn size * 1.25;\n\t}\n\n\tif (pixelRatio >= 3 && pixelRatio < 3.5) {\n\t\t// catch Android font scaling on small machines\n\t\t// where pixel ratio / font scale ratio => 3:3\n\t\tif (deviceWidth <= 360) {\n\t\t\treturn size;\n\t\t}\n\n\t\t// Catch other weird android width sizings\n\t\tif (deviceHeight < 667) {\n\t\t\treturn size * 1.15;\n\t\t\t// catch in-between size Androids and scale font up\n\t\t\t// a tad but not too much\n\t\t}\n\n\t\tif (deviceHeight >= 667 && deviceHeight <= 735) {\n\t\t\treturn size * 1.2;\n\t\t}\n\n\t\t// catch larger devices\n\t\t// ie iphone 6s plus / 7 plus / mi note 等等\n\t\treturn size * 1.27;\n\t}\n\n\tif (pixelRatio >= 3.5) {\n\t\t// catch Android font scaling on small machines\n\t\t// where pixel ratio / font scale ratio => 3:3\n\t\tif (deviceWidth <= 360) {\n\t\t\treturn size;\n\t\t\t// Catch other smaller android height sizings\n\t\t}\n\n\t\tif (deviceHeight < 667) {\n\t\t\treturn size * 1.2;\n\t\t\t// catch in-between size Androids and scale font up\n\t\t\t// a tad but not too much\n\t\t}\n\n\t\tif (deviceHeight >= 667 && deviceHeight <= 735) {\n\t\t\treturn size * 1.25;\n\t\t}\n\n\t\t// catch larger phablet devices\n\t\treturn size * 1.4;\n\t}\n\n\treturn size;\n};\n\nexport default normalize;\n","import Platform from '@wcpos/common/src/lib/platform';\nimport { math } from 'polished';\nimport palette from './palettes/blue-grey.json';\nimport normalizeText from './normalize-text';\n\nconst colors = {\n\tbackground: palette['blue-grey-050'],\n\tborder: palette['blue-grey-600'],\n\tprimary: palette['blue-grey-700'],\n\tsecondary: palette['blue-grey-400'],\n\tattention: palette['cyan-800'],\n\tcritical: palette['red-vivid-600'],\n\tinfo: palette['light-blue-vivid-800'],\n\tsuccess: palette['teal-800'],\n\twarning: palette['yellow-vivid-800'],\n\tinverse: 'rgba(256, 256, 256, 0.8)',\n\tdisabled: '#AFAFAF',\n\n\t// greys\n\t'lightest-grey': '#E1E1E1',\n\t'light-grey': '#AFAFAF',\n\tgrey: '#808080',\n\t'dark-grey': '#545454',\n\t'darkest-grey': '#2B2B2B',\n};\n\nexport type ColorTypes = Extract<keyof typeof colors, string>;\n\nconst baseRadius = '3px';\nconst basePadding = '5px';\n\nconst fonts = Platform.select({\n\tandroid: {\n\t\tregular: 'sans-serif',\n\t},\n\tios: {\n\t\tregular: 'System',\n\t},\n\tdefault: {\n\t\tregular: 'sans-serif',\n\t},\n});\n\nconst theme = {\n\tAPP_BACKGROUND_COLOR: colors.background,\n\n\tBACKDROP_COLOR: 'rgba(0, 0, 0, 0.3)',\n\tBACKDROP_Z_INDEX: 1000,\n\n\tBUTTON_BORDER_RADIUS: baseRadius,\n\tBUTTON_COLOR: colors.primary,\n\tBUTTON_COLOR_SECONDARY: colors.secondary,\n\tBUTTON_COLOR_ATTENTION: colors.attention,\n\tBUTTON_COLOR_CRITICAL: colors.critical,\n\tBUTTON_COLOR_INFO: colors.info,\n\tBUTTON_COLOR_SUCCESS: colors.success,\n\tBUTTON_COLOR_WARNING: colors.warning,\n\tBUTTON_COLOR_INVERSE: colors.inverse,\n\tBUTTON_COLOR_DISABLED: colors.disabled,\n\tBUTTON_PADDING_X: `${math(`2 * ${basePadding}`)}`,\n\tBUTTON_PADDING_Y: basePadding,\n\n\tBUTTONGROUP_BORDER_COLOR: colors.border,\n\tBUTTONGROUP_TEXT_COLOR: colors.background,\n\tBUTTONGROUP_SPACING: basePadding,\n\n\tCHECKBOX_BACKGROUND_COLOR: colors.primary,\n\tCHECKBOX_BACKGROUND_COLOR_DISABLED: colors.disabled,\n\tCHECKBOX_BORDER_COLOR: colors.primary,\n\tCHECKBOX_BORDER_RADIUS: baseRadius,\n\tCHECKBOX_BORDER_WIDTH: '1px',\n\tCHECKBOX_INFO_COLOR: colors.secondary,\n\tCHECKBOX_INFO_FONT_SIZE: `${normalizeText(12)}px`,\n\tCHECKBOX_LABEL_COLOR: colors.primary,\n\tCHECKBOX_LABEL_FONT_SIZE: `${normalizeText(14)}px`,\n\tCHECKBOX_WIDTH: `${normalizeText(14)}px`,\n\tCHECKBOX_HEIGHT: `${normalizeText(14)}px`,\n\n\tCOLOR_PRIMARY: colors.primary,\n\tCOLOR_SECONDARY: colors.secondary,\n\tCOLOR_ATTENTION: colors.attention,\n\tCOLOR_CRITICAL: colors.critical,\n\tCOLOR_INFO: colors.info,\n\tCOLOR_SUCCESS: colors.success,\n\tCOLOR_WARNING: colors.warning,\n\tCOLOR_INVERSE: colors.inverse,\n\tCOLOR_DISABLED: colors.disabled,\n\n\tDIALOG_BACKGROUND_COLOR: colors.background,\n\tDIALOG_WIDTH: '600px',\n\tDIALOG_MIN_WIDTH: '300px',\n\tDIALOG_BORDER_RADIUS: baseRadius,\n\n\tFONT_FAMILY: fonts.regular,\n\n\tFONT_SIZE: `${normalizeText(14)}px`,\n\tFONT_SIZE_LARGE: `${normalizeText(18)}px`,\n\tFONT_SIZE_SMALL: `${normalizeText(12)}px`,\n\n\tFONT_WEIGHT: 400,\n\tFONT_WEIGHT_BOLD: 700,\n\tFONT_WEIGHT_LIGHT: 300,\n\n\tICON_BACKGROUND_COLOR: colors['lightest-grey'],\n\n\tIMAGE_BORDER_RADIUS: baseRadius,\n\n\tINPUT_BACKGROUND_COLOR: '#FFFFFF',\n\tINPUT_BORDER_COLOR: colors.primary,\n\tINPUT_BORDER_RADIUS: baseRadius,\n\tINPUT_BORDER_WIDTH: '1px',\n\tINPUT_ERROR_TEXT_COLOR: colors.primary,\n\tINPUT_PADDING: '5px',\n\tINPUT_FONT_SIZE: `${normalizeText(14)}px`,\n\tINPUT_TEXT_COLOR: colors.border,\n\n\tMASTERBAR_BACKGROUND_COLOR: colors.primary,\n\tMASTERBAR_TITLE_COLOR: '#FFFFFF',\n\tMASTERBAR_TITLE_SIZE: '18px',\n\n\tMENU_ITEM_HOVER_BACKGROUND_COLOR: colors['lightest-grey'],\n\n\tLIST_ITEM_PADDING: '10px',\n\n\tLOADER_COLOR: colors.primary,\n\n\tPAGE_BACKGROUND_COLOR: colors.background,\n\tPAGE_HEADER_BACKGROUND_COLOR: 'red',\n\tPAGE_HEADER_PADDING_X: basePadding,\n\tPAGE_HEADER_PADDING_Y: basePadding,\n\tPAGE_MAIN_BACKGROUND_COLOR: 'yellow',\n\tPAGE_MAIN_PADDING_X: basePadding,\n\tPAGE_MAIN_PADDING_Y: basePadding,\n\n\tPOPOVER_BACKGROUND_COLOR: '#FFFFFF',\n\tPOPOVER_Z_INDEX: 99999,\n\n\tSEGMENT_BACKGROUND_COLOR: '#FFFFFF',\n\tSEGMENT_BORDER_COLOR: colors.primary,\n\tSEGMENT_BORDER_RADIUS: baseRadius,\n\tSEGMENT_BORDER_WIDTH: '1px',\n\tSEGMENT_PADDING: basePadding,\n\n\tSEGMENT_GROUP_PADDING: '10px',\n\tSEGMENT_MARGIN_BOTTOM: '10px',\n\n\tSIDEBAR_BACKGROUND_COLOR: '#FFFFFF',\n\n\tSNACKBAR_BACKGROUND_COLOR: colors.secondary,\n\tSNACKBAR_TEXT_COLOR: colors.inverse,\n\tSNACKBAR_PADDING_X: `${math(`2 * ${basePadding}`)}`,\n\tSNACKBAR_PADDING_Y: basePadding,\n\tSNACKBAR_RADIUS: baseRadius,\n\tSNACKBAR_WIDTH: '400px',\n\n\tTAG_BACKGROUND_COLOR: colors.secondary,\n\tTAG_BACKGROUND_DISABLED: colors.disabled,\n\tTAG_TEXT_COLOR: colors.inverse,\n\tTAG_BORDER_RADIUS: `${math(`${baseRadius} * 4`)}`,\n\tTAG_PADDING_X: basePadding,\n\tTAG_PADDING_Y: `${math(`${basePadding}/2`)}`,\n\n\tTEXT_COLOR: colors.primary,\n\tTEXT_COLOR_SECONDARY: colors.secondary,\n\tTEXT_COLOR_ATTENTION: colors.attention,\n\tTEXT_COLOR_CRITICAL: colors.critical,\n\tTEXT_COLOR_INFO: colors.info,\n\tTEXT_COLOR_SUCCESS: colors.success,\n\tTEXT_COLOR_WARNING: colors.warning,\n\tTEXT_COLOR_INVERSE: colors.inverse,\n\n\tTOAST_BACKGROUND_COLOR: '#000000',\n\tTOAST_Z_INDEX: 1001,\n\tTOAST_BORDER_RADIUS: baseRadius,\n\tTOAST_PADDING_X: '10px',\n\tTOAST_PADDING_Y: '5px',\n\tTOAST_TEXT_COLOR: '#FFFFFF',\n};\n\nexport default theme;\n","import * as React from 'react';\nimport DatabaseService from '@wcpos/common/src/database';\n\ntype UserDatabase = import('@wcpos/common/src/database').UserDatabase;\ntype UserDocument = import('@wcpos/common/src/database').UserDocument;\n\nlet userDB: UserDatabase;\n\n/**\n *\n */\nexport function useUser() {\n\tconst [user, setUser] = React.useState<UserDocument>();\n\n\t/**\n\t * run effect once to set the User ID\n\t */\n\tReact.useEffect(() => {\n\t\t(async function init() {\n\t\t\tuserDB = await DatabaseService.getUserDB();\n\t\t\tconst lastUser = await userDB.users.getLocal('lastUser');\n\n\t\t\tif (lastUser) {\n\t\t\t\t// restore last user\n\t\t\t\tconst lastUserDoc = await userDB.users.findOne(lastUser.get('id')).exec();\n\t\t\t\tif (lastUserDoc) {\n\t\t\t\t\treturn setUser(lastUserDoc);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst users = await userDB.users.find().exec();\n\n\t\t\tif (users.length === 0) {\n\t\t\t\t// create new user\n\t\t\t\t// @ts-ignore\n\t\t\t\tconst newUserDoc = await userDB.users.insert({ displayName: 'Test' });\n\t\t\t\tawait userDB.users.upsertLocal('lastUser', { id: newUserDoc.localId });\n\t\t\t\treturn setUser(newUserDoc);\n\t\t\t}\n\n\t\t\t// else?? set the first found user\n\t\t\tawait userDB.users.upsertLocal('lastUser', { id: users[0].localId });\n\t\t\treturn setUser(users[0]);\n\t\t})();\n\t}, []);\n\n\treturn { user, setUser, userDB };\n}\n","// eslint-disable-next-line @typescript-eslint/no-var-requires\nconst pkg = require('../../../package.json');\n\nexport const APP_VERSION = `${pkg.version || ''}`.replace(/-\\d+$/g, '');\n\n/**\n * @TODO unique instance id for the web app?\n */\nexport const getUniqueId = (): string => {\n\treturn '';\n};\n\n/**\n *\n */\nexport const getReadableVersion = (): string => {\n\treturn APP_VERSION;\n};\n","import * as React from 'react';\nimport DatabaseService from '@wcpos/common/src/database';\n\ntype StoreDatabase = import('@wcpos/common/src/database').StoreDatabase;\ntype SiteDocument = import('@wcpos/common/src/database').SiteDocument;\ntype WPCredentialsDocument = import('@wcpos/common/src/database').WPCredentialsDocument;\n\nfunction sanitizeStoreName(id: string) {\n\treturn `store_${id.replace(':', '_')}`;\n}\n\nexport interface LastUser {\n\tsite?: SiteDocument;\n\twpUser?: WPCredentialsDocument;\n\tstoreDB?: StoreDatabase;\n\tstoreID?: string;\n}\n\n/**\n *\n * @TODO - change lastStore key\n */\nexport function useLastUser() {\n\tconst [lastUser, _setLastUser] = React.useState<LastUser>();\n\tconst [ready, setReady] = React.useState(false);\n\n\t/**\n\t * run effect once to get the last user from local storage\n\t */\n\tReact.useEffect(() => {\n\t\t(async function init() {\n\t\t\tconst userDB = await DatabaseService.getUserDB();\n\t\t\tconst lastStore = await userDB.users.getLocal('lastStore');\n\t\t\tconst storeID = lastStore?.get('storeID');\n\t\t\tconst site = await userDB.sites.findOne(lastStore?.get('siteID')).exec();\n\t\t\tconst wpUser = await userDB.wp_credentials.findOne(lastStore?.get('wpUserID')).exec();\n\n\t\t\tif (storeID && site && wpUser) {\n\t\t\t\tconst storeDB = await DatabaseService.getStoreDB(\n\t\t\t\t\tsanitizeStoreName(storeID),\n\t\t\t\t\tsite.getWcApiUrl(),\n\t\t\t\t\twpUser.jwt as string\n\t\t\t\t);\n\t\t\t\tif (storeDB) {\n\t\t\t\t\t_setLastUser({\n\t\t\t\t\t\tsite,\n\t\t\t\t\t\twpUser,\n\t\t\t\t\t\tstoreDB,\n\t\t\t\t\t\tstoreID,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsetReady(true);\n\t\t})();\n\t}, []);\n\n\t/**\n\t * when user enters a Store\n\t */\n\tasync function setLastUser(id: string, site: any, wpUser: any) {\n\t\tconst userDB = await DatabaseService.getUserDB();\n\t\tconst storeDB = await DatabaseService.getStoreDB(\n\t\t\tsanitizeStoreName(id),\n\t\t\tsite.getWcApiUrl(),\n\t\t\twpUser.jwt\n\t\t);\n\t\tawait userDB.users.upsertLocal('lastStore', {\n\t\t\tstoreID: id,\n\t\t\tsiteID: site.localId,\n\t\t\twpUserID: wpUser.localId,\n\t\t});\n\t\t_setLastUser({\n\t\t\tsite,\n\t\t\twpUser,\n\t\t\tstoreDB,\n\t\t\tstoreID: id,\n\t\t});\n\t}\n\n\t/**\n\t * when user logs out\n\t */\n\tasync function unsetLastUser() {\n\t\tconst userDB = await DatabaseService.getUserDB();\n\t\tconst lastStore = await userDB.users.getLocal('lastStore');\n\t\tlastStore.remove();\n\t\t_setLastUser(undefined);\n\t}\n\n\treturn {\n\t\tsite: lastUser?.site,\n\t\twpUser: lastUser?.wpUser,\n\t\tstoreDB: lastUser?.storeDB,\n\t\tstoreID: lastUser?.storeID,\n\t\tsetLastUser,\n\t\tunsetLastUser,\n\t\tready,\n\t};\n}\n","import * as React from 'react';\nimport { isRxDocument } from 'rxdb/plugins/core';\nimport getTheme from '@wcpos/common/src/themes';\nimport useScreenSize from '../use-screen-size';\nimport useOnline from '../use-online';\nimport useUser from '../use-user';\nimport { getUniqueId, getReadableVersion } from './device-info';\n// import useStoreDB from '../use-store';\nimport { useLastUser } from './use-last-user';\n\ntype UserDocument = import('@wcpos/common/src/database').UserDocument;\ntype UserDatabase = import('@wcpos/common/src/database').UserDatabase;\ntype StoreDatabase = import('@wcpos/common/src/database').StoreDatabase;\ntype SiteDocument = import('@wcpos/common/src/database').SiteDocument;\ntype WPCredentialsDocument = import('@wcpos/common/src/database').WPCredentialsDocument;\n\nexport interface IAppStateProps {\n\tinfo: {\n\t\tuniqueId: string;\n\t\tversion: string;\n\t};\n\tonline: boolean;\n\tscreen: import('react-native').ScaledSize;\n\tuser?: UserDocument;\n\tsetUser: React.Dispatch<React.SetStateAction<UserDocument | undefined>>;\n\tuserDB?: UserDatabase;\n\tsite?: SiteDocument;\n\twpUser?: WPCredentialsDocument;\n\tstoreDB?: StoreDatabase;\n\tstoreID?: string;\n\tsetLastUser: (id: string, site: SiteDocument, wpUser: WPCredentialsDocument) => Promise<void>;\n\tunsetLastUser: () => Promise<void>;\n}\n\nexport const AppStateContext = React.createContext<unknown>({}) as React.Context<IAppStateProps>;\n\nconst info = {\n\tuniqueId: getUniqueId(),\n\tversion: getReadableVersion(),\n};\n\ninterface IAppStatePropviderProps {\n\tchildren: any;\n\ti18n: any;\n}\n/**\n * App State Provider\n * Hydrates static or non-frequent state for the app\n */\nconst AppStateProvider = ({ children, i18n }: IAppStatePropviderProps) => {\n\t// const [isReady, setIsReady] = React.useState(false);\n\tconst screen = useScreenSize();\n\tconst online = useOnline();\n\tconst { user, setUser, userDB } = useUser();\n\tconst theme = getTheme('default', 'dark');\n\tconst { site, wpUser, storeDB, storeID, setLastUser, unsetLastUser, ready } = useLastUser();\n\n\tconst value = {\n\t\tinfo,\n\t\tonline,\n\t\tscreen,\n\t\tuser,\n\t\tsetUser,\n\t\tuserDB,\n\t\tsite,\n\t\twpUser,\n\t\tstoreDB,\n\t\tstoreID,\n\t\tsetLastUser,\n\t\tunsetLastUser,\n\t};\n\tconsole.log(value);\n\n\treturn (\n\t\t<AppStateContext.Provider value={value}>{children(ready, theme)}</AppStateContext.Provider>\n\t);\n};\n\nexport default AppStateProvider;\n","import * as React from 'react';\nimport { Dimensions } from 'react-native';\nimport debounce from 'lodash/debounce';\n\nexport function useScreenSize() {\n\tconst [screen, setScreen] = React.useState(Dimensions.get('window'));\n\n\tconst onChange = React.useMemo(() => {\n\t\treturn debounce(({ window }) => {\n\t\t\tsetScreen(window);\n\t\t}, 250);\n\t}, []);\n\n\t/**\n\t * Listen to screen dimension changes\n\t */\n\tReact.useEffect(() => {\n\t\tDimensions.addEventListener('change', onChange);\n\t\treturn () => {\n\t\t\tDimensions.removeEventListener('change', onChange);\n\t\t};\n\t}, []);\n\n\treturn screen;\n}\n","import * as React from 'react';\nimport NetInfo from '@react-native-community/netinfo';\n\nexport function useOnline() {\n\tconst [online, setOnline] = React.useState(false);\n\n\t/**\n\t * Listen to internet connection\n\t * note: there is no removeEventListener, it returns the unsubscribe function\n\t */\n\tReact.useEffect(() => {\n\t\treturn NetInfo.addEventListener(({ isConnected }) => {\n\t\t\tsetOnline(!!isConnected);\n\t\t});\n\t}, []);\n\n\treturn online;\n}\n","import defaultTheme from './defaultTheme';\n\n/**\n * Returns a theme\n * @param name\n * @param mode\n */\nexport function switcher(name = 'default', mode = 'light') {\n\tif (mode === 'dark') {\n\t\tdefaultTheme.PAGE_BACKGROUND_COLOR = 'black';\n\t}\n\treturn defaultTheme;\n}\n","import { useContext } from 'react';\nimport { AppStateContext } from './app-state-provider';\n\nconst useAppState = () => {\n\treturn useContext(AppStateContext);\n};\n\nexport default useAppState;\n"],"sourceRoot":""}