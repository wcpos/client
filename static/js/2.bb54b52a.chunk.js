(this["webpackJsonp@wcpos/web"]=this["webpackJsonp@wcpos/web"]||[]).push([[2],{830:function(e,t,n){"use strict";var r,c,a,o,i,s=n(1),l=n(26),u=n(0),d=n(526),j=n(42),b=n.n(j),f=n(23),O=n(21),h=O.c.View(r||(r=Object(f.a)(["\n\tflex-direction: row;\n\talign-items: center;\n\tborder-bottom-width: 1px;\n\tborder-style: solid;\n\tborder-bottom-color: #000000;\n"]))),m=O.c.View(c||(c=Object(f.a)(["\n\tpadding: 5px;\n\talign-items: flex-start;\n"]))),x=O.c.View(a||(a=Object(f.a)(["\n\tflex-direction: row;\n\tborder-bottom-width: 2px;\n\tborder-style: solid;\n\tborder-bottom-color: #000000;\n\tbackground-color: #ffffff;\n"]))),p=O.c.View(o||(o=Object(f.a)(["\n\tpadding: 5px;\n"]))),y=O.c.View(i||(i=Object(f.a)(["\n\tflex-direction: row;\n\talign-items: center;\n"]))),v=n(46),g=n(3),w=u.memo((function(e){var t=e.children,n=e.cellData,r=e.flexGrow,c=void 0===r?1:r,a=e.flexShrink,o=void 0===a?1:a,i=e.flexBasis,s=void 0===i?"auto":i,l=e.width,u=void 0===l?"100%":l,d=e.style;e.rowData,e.dataKey;return t?Object(g.jsx)(m,{style:[{flexGrow:c,flexShrink:o,flexBasis:s,width:u},d],children:"function"===typeof t?t({cellData:n}):t}):Object(g.jsx)(m,{style:[{flexGrow:c,flexShrink:o,flexBasis:s,width:u},d],children:Object(g.jsx)(v.a,{children:String(null!==n&&void 0!==n?n:"")})})}));w.displayName="Table.Body.Row.Cell";var k=w,S=u.memo((function(e){var t=e.rowData,n=e.columns,r=e.style,c=e.children;return Object(g.jsx)(h,{style:r,children:n&&n.map((function(e,n){if(!e.hide){var r=e.key||n,a=t[r],o=e.flexGrow,i=e.flexShrink,l=e.flexBasis,u=e.width,d=function(){return{cellData:a,column:e,dataKey:r,flexGrow:o,flexShrink:i,flexBasis:l,width:u,rowData:t,index:n,key:r}};return"function"===typeof c?c({cellData:a,column:e,getCellProps:d}):Object(g.jsx)(k,Object(s.a)({},d()))}}))})}));S.displayName="Table.Row",S.Cell=k;var C=S,_=n(172),D=n(849),P=u.memo((function(e){var t=e.children,n=e.sort,r=e.sortBy,c=e.dataKey,a=e.defaultSortDirection,o=void 0===a?"asc":a,i=e.sortDirection,s=e.label,l=e.style,u=e.flexGrow,d=void 0===u?1:u,j=e.flexShrink,b=void 0===j?1:j,f=e.flexBasis,O=void 0===f?"auto":f,h=e.width,m=void 0===h?"100%":h,x=e.disableSort,w=void 0!==x&&x,k=e.hideLabel,S=void 0!==k&&k,C=!w&&"function"===typeof n,P=C&&r===c,B=r!==c?o:"desc"===i?"asc":"desc";return Object(g.jsx)(p,{style:[{flexGrow:d,flexShrink:b,flexBasis:O,width:m},l],children:C?Object(g.jsx)(_.a,{onPress:function(e){"function"===typeof n&&n({defaultSortDirection:o,event:e,sortBy:c,sortDirection:B})},children:function(e){var n=e.hovered;return Object(g.jsxs)(y,{children:[Object(g.jsx)(v.a,{children:t||s}),Object(g.jsx)(D.a,{visible:n||P,direction:P?i:void 0})]})}}):!S&&Object(g.jsx)(v.a,{children:t||s})})}));P.displayName="Table.Header.Row.Cell";var B=P,R=u.memo((function(e){var t=e.columns,n=e.sort,r=e.sortBy,c=e.sortDirection,a=e.children;e.style;return Object(g.jsx)(x,{children:t&&t.map((function(e,t){if(!e.hide){var o=e.key||t,i=e.defaultSortDirection,l=e.disableSort,u=e.label,d=e.flexGrow,j=e.flexShrink,b=e.flexBasis,f=e.width,O=e.hideLabel,h=function(){return{column:e,dataKey:o,defaultSortDirection:i,disableSort:l,flexGrow:d,flexShrink:j,flexBasis:b,label:u,sort:n,sortBy:r,sortDirection:c,width:f,hideLabel:O,key:o}};return"function"===typeof a?a({column:e,getHeaderCellProps:h}):Object(g.jsx)(B,Object(s.a)({},h()))}}))})}));R.displayName="Table.Header.Row",R.Cell=B;var N=R,A=function(e){var t=e.children;return Object(g.jsx)(g.Fragment,{children:t})};A.displayName="Table.Body";var E=Object.assign(A,{Row:C}),I=function(e){var t=e.children;return Object(g.jsx)(g.Fragment,{children:t})};I.displayName="Table.Header";var L=Object.assign(I,{Row:N}),T=function(e){var t=e.message,n=void 0===t?"No results found":t;return Object(g.jsx)(v.a,{children:n})},V=u.memo(T);T.displayName="Table.Row.Empty";var G=V,M=["children","columns","data","empty","footer","sort","sortBy","sortDirection"],$={minimumViewTime:500,viewAreaCoveragePercentThreshold:0},H=[0],q=u.memo((function(e){var t=e.children,n=e.columns,r=e.data,c=(e.empty,e.footer),a=e.sort,o=e.sortBy,i=e.sortDirection,j=Object(l.a)(e,M),f=u.useCallback((function(e,t){return b()(e,"localID")||t}),[]),O=u.Children.count(t),h=u.useMemo((function(){if(Array.isArray(t)&&O>0){var e=t.find((function(e){return e.type===E}));if(u.isValidElement(e))return function(t){var r=t.item,c=t.index;return e.props.children({item:r,columns:n,index:c})}}return"function"===typeof t?function(e){var r=e.item,c=e.index;return t({item:r,columns:n,index:c})}:function(e){var t=e.item;return Object(g.jsx)(C,{rowData:t,columns:n})}}),[t,O,n]),m=u.useCallback(h,[h]),x=u.useMemo((function(){if(Array.isArray(t)&&O>0){var e=t.find((function(e){return e.type===L}));if(u.isValidElement(e))return u.cloneElement(e.props.children,{columns:n,sort:a,sortBy:o,sortDirection:i})}return Object(g.jsx)(N,{columns:n,sort:a,sortBy:o,sortDirection:i})}),[t,O,n,a,o,i]);return Object(g.jsx)(d.a,Object(s.a)({data:r,renderItem:m,keyExtractor:f,ListHeaderComponent:x,ListFooterComponent:c,ListEmptyComponent:G,stickyHeaderIndices:H,viewabilityConfig:$},j))}));q.displayName="Table",q.Header=L,q.Body=E;var F=q;t.a=F},831:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return S}));var r=n(16),c=n(0),a=n(180),o=n(821),i=n(826),s=n(818),l=n(339),u=n(130),d=n(836),j=n(832),b=n(262),f=n(851),O=n(874),h=n(852),m=n(50),x=n(853),p=n.n(x),y=n(870),v=n(871),g=n(873),w=n(864),k=n(3),S=c.createContext({currentOrder:void 0,setCurrentOrder:void 0,currentCustomer:void 0,setCurrentCustomer:void 0});t.b=function(){var t=Object(u.b)().storeDB,n=Object(d.b)(),x=Object(o.a)(n.posProducts),C=Object(o.a)(n.cart),_=c.useState(),D=Object(r.a)(_,2),P=D[0],B=D[1],R=c.useState(),N=Object(r.a)(R,2),A=N[0],E=N[1],I=c.useRef(!1),L=Object(m.i)(x.get("width")),T=Object(h.a)(),V=Object(r.a)(T,2),G=V[0],M=V[1],$=Object(h.a)(),H=Object(r.a)($,2),q=H[0],F=H[1],U=c.useCallback((function(e,t){t.productColumnWidth=L.value}),[]),Q=c.useCallback((function(e,t){q&&G?(I.current=!0,L.value=Object(m.l)(p()((q.width+e.translationX)/G.width,.2,.8))):console.log("@TODO - why null?",q)}),[G,q]),z=c.useCallback((function(e,t){I.current=!1,x.atomicPatch({width:L.value})}),[]),W=Object(m.g)(function(){const t=function(){return{flexBasis:"".concat(100*L.value,"%")}};return t._closure={productColumnWidth:L},t.asString='function _f(){const{productColumnWidth}=jsThis._closure;{return{flexBasis:"".concat(productColumnWidth.value*100,"%")};}}',t.__workletHash=0xe295e26f59b,t.__location="/home/runner/work/client/client/packages/common/src/screens/pos/pos.tsx (82:46)",e.__reanimatedWorkletInit(t),t}()),X=function(e){I.current||M(e)},K=function(e){I.current||F(e)},J=t.collections.orders.find().where("status").eq("pos-open"),Y=Object(i.a)(J.$.pipe(Object(s.a)((function(e){return(null===Y||void 0===Y?void 0:Y.length)!==e.length}))),[]);return Object(l.a)("POS",{storeDB:t,productsUI:x,cartUI:C,currentOrder:P,orderQuery:J,orders:Y,handleColumnResize:Q,handleStartColumnResize:U,handleEndColumnResize:z,productsColumnStyle:W,handleContainerLayout:X,handleProductColumnLayout:K}),Object(k.jsx)(S.Provider,{value:{currentOrder:P,setCurrentOrder:B,currentCustomer:A,setCurrentCustomer:E},children:Object(k.jsxs)(w.c,{onLayout:X,children:[Object(k.jsx)(w.d,{as:m.a.View,onLayout:K,style:W,children:Object(k.jsx)(b.a,{children:Object(k.jsx)(j.a,{initialQuery:{sortBy:"name",sortDirection:"asc"},children:Object(k.jsx)(v.a,{ui:x})})})}),Object(k.jsx)(f.a,{onStart:U,onActive:Q,onEnd:z,children:Object(k.jsx)(m.a.View,{children:Object(k.jsx)(O.a,{})})}),P&&"pos-checkout"===P.status?Object(k.jsx)(w.b,{children:Object(k.jsx)(g.a,{})}):Object(k.jsx)(w.a,{children:Object(k.jsx)(b.a,{children:Object(k.jsx)(c.Suspense,{fallback:Object(k.jsx)(a.a,{children:"Loading cart..."}),children:Object(k.jsx)(y.a,{ui:C,orders:Y})})})})]})})}}).call(this,n(38))},832:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n(1),c=n(16),a=n(0),o=n(341),i=n.n(o),s=n(3),l=a.createContext(null),u=function(e){var t=e.children,n=e.initialQuery,o=a.useState(n),u=Object(c.a)(o,2),d=u[0],j=u[1],b=a.useCallback((function(e,t){j((function(n){return i()(Object(r.a)({},n),e,t)}))}),[j]);return Object(s.jsx)(l.Provider,{value:{query:d,setQuery:b},children:t})},d=function(){var e=a.useContext(l);if(void 0===e)throw new Error("useQuery must be called within QueryProvider");return e}},833:function(e,t,n){"use strict";var r=n(1),c=n(16),a=n(0),o=n(887),i=n(340),s=n(74),l=n(838),u=n(79),d=n(46),j=n(3);t.a=function(e){var t=e.ui,n=Object(o.a)().t,b=t.id.split("_")[1],f=t.get("columns"),O=a.useState(!1),h=Object(c.a)(O,2),m=h[0],x=h[1];return Object(j.jsxs)(i.a,{open:m,activator:Object(j.jsx)(s.a,{name:"cog",onPress:function(){return x(!0)},tooltip:"Table Settings"}),onRequestClose:function(){return x(!1)},children:[Object(j.jsx)(d.a,{children:"Columns"}),f.map((function(e,c){return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(l.a,{label:n("".concat(b,".column.label.").concat(e.key)),checked:!e.hide,onChange:function(n){f[c]=Object(r.a)(Object(r.a)({},e),{},{hide:!n}),t.atomicSet("columns",f)}},e.key),e.display?e.display.map((function(c,a){return Object(j.jsx)(l.a,{label:n("".concat(b,".column.label.").concat(c.key)),checked:!c.hide,onChange:function(n){e.display[a]=Object(r.a)(Object(r.a)({},c),{},{hide:!n}),t.atomicSet("columns",f)}},c.key)})):null]})})),Object(j.jsx)(u.a,{title:"Restore Default Settings",onPress:t.reset})]})}},834:function(e,t,n){"use strict";var r=n(0),c=n(46),a=n(3),o=n(1),i=n(20),s={default:"{name}\n{company}\n{address_1}\n{address_2}\n{city}\n{state}\n{postcode}\n{country}",AU:"{name}\n{company}\n{address_1}\n{address_2}\n{city} {state} {postcode}\n{country}",AT:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",BE:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",CA:"{company}\n{name}\n{address_1}\n{address_2}\n{city} {state_code}&nbsp;&nbsp;{postcode}\n{country}",CH:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",CL:"{company}\n{name}\n{address_1}\n{address_2}\n{state}\n{postcode} {city}\n{country}",CN:"{country} {postcode}\n{state}, {city}, {address_2}, {address_1}\n{company}\n{name}",CZ:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",DE:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",EE:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",FI:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",DK:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",FR:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city_upper}\n{country}",HK:"{company}\n{first_name} {last_name_upper}\n{address_1}\n{address_2}\n{city_upper}\n{state_upper}\n{country}",HU:"{name}\n{company}\n{city}\n{address_1}\n{address_2}\n{postcode}\n{country}",IN:"{company}\n{name}\n{address_1}\n{address_2}\n{city} {postcode}\n{state}, {country}",IS:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",IT:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode}\n{city}\n{state_upper}\n{country}",JP:"{postcode}\n{state} {city} {address_1}\n{address_2}\n{company}\n{last_name} {first_name}\n{country}",TW:"{company}\n{last_name} {first_name}\n{address_1}\n{address_2}\n{state}, {city} {postcode}\n{country}",LI:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",NL:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",NZ:"{name}\n{company}\n{address_1}\n{address_2}\n{city} {postcode}\n{country}",NO:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",PL:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",PT:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",SK:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",RS:"{name}\n{company}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",SI:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",ES:"{name}\n{company}\n{address_1}\n{address_2}\n{postcode} {city}\n{state}\n{country}",SE:"{company}\n{name}\n{address_1}\n{address_2}\n{postcode} {city}\n{country}",TR:"{name}\n{company}\n{address_1}\n{address_2}\n{postcode} {city} {state}\n{country}",UG:"{name}\n{company}\n{address_1}\n{address_2}\n{city}\n{state}, {country}",US:"{name}\n{company}\n{address_1}\n{address_2}\n{city}, {state_code} {postcode}\n{country}",VN:"{name}\n{company}\n{address_1}\n{city}\n{country}"},l=n(886),u=r.memo((function(e){var t=e.value;return Object(a.jsx)(c.a,{children:Object(l.a)(new Date(t||""),"dd/MM/yyyy")})})),d=r.memo((function(e){var t=e.children,n=e.symbol;return Object(a.jsxs)(c.a,{children:[n," ",t]})}));t.a={Name:function(e){var t=e.firstName,n=e.lastName;return Object(a.jsxs)(c.a,{children:[t," ",n]})},Number:function(e){var t=e.children,n=e.prefix,r=e.suffix;return Object(a.jsxs)(c.a,{children:[n," ",t," ",r]})},List:function(e){var t=e.array;return Object(a.jsx)(a.Fragment,{children:null===t||void 0===t?void 0:t.map((function(e,t){return"string"===typeof e?Object(a.jsxs)(c.a,{children:[e,", "]}):e}))})},Address:function(e){var t,n,r=e.address,l=e.showName,u=Object(o.a)({},r),d=u.country&&s.hasOwnProperty(u.country)?s[u.country]:s.default;Object.assign(u,{name:l&&"".concat(u.first_name," ").concat(u.last_name),state_code:u.state,state_upper:null===(t=u.state)||void 0===t?void 0:t.toUpperCase(),city_upper:null===(n=u.city)||void 0===n?void 0:n.toUpperCase()});var j=d.match(/\{[\w]+\}/g);return j&&j.forEach((function(e){var t=new RegExp(e,"g"),n=e.split(/{|}/g)[1];d=d.replace(t,u[n]||"")})),Object(a.jsx)(i.a,{children:d.split("\n").map((function(e,t){if(e.trim())return Object(a.jsx)(c.a,{children:e},t)}))})},Date:u,Currency:d}},835:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r,c,a,o,i=n(0),s=n.n(i),l=n(23),u=n(21),d=n(135),j=n(172),b=u.c.View(r||(r=Object(l.a)(["\n\theight: 100%;\n"]))),f=u.c.View(c||(c=Object(l.a)(["\n\tflex-direction: row;\n"]))),O=Object(u.c)(j.a)(a||(a=Object(l.a)(["\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 5px;\n"]))),h=Object(u.c)(d.a)(o||(o=Object(l.a)(["\n\tcolor: ",";\n"])),(function(e){var t=e.selected,n=e.theme;return t?n.TEXT_COLOR:n.TEXT_COLOR_SECONDARY})),m=n(3),x=function(e){var t=e.label,n=e.selected,r=e.onSelect;return Object(m.jsx)(O,{selected:n,onPress:r,children:Object(m.jsx)(h,{selected:n,children:t})})},p=function(e){var t=e.tabs,n=e.selected,r=e.onSelect,c=e.children,a=e.position,o=void 0===a?"top":a,i=s.a.useMemo((function(){return t.map((function(e,t){return Object(m.jsx)(x,{label:e,selected:n===t,onSelect:function(){return r(t)}},e)}))}),[t,n,r]);return Object(m.jsxs)(b,{children:["bottom"===o&&c,Object(m.jsx)(f,{children:i}),"top"===o&&c]})}},836:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return f}));var r=n(0),c=n(819),a=n(818),o=n(820),i=n(42),s=n.n(i),l=n(130),u=n(850),d=n(3),j=r.createContext(),b=function(e){var t=e.children,n=Object(l.b)().storeDB,r=function(e){if(!n)return new o.a(Object(c.a)(null));var t=n.getLocal$("ui_".concat(e)).pipe(Object(a.a)((function(t){var r=s()(u,e);return!t&&r?(n.insertLocal("ui_".concat(e),r),!1):(t.reset=function(){n.upsertLocal("ui_".concat(e),r)},t)})));return new o.a(t,(function(e){return!!e}))},i={posProducts:r("posProducts"),cart:r("cart"),products:r("products"),orders:r("orders"),customers:r("customers")};return Object(d.jsx)(j.Provider,{value:i,children:t})},f=function(){var e=r.useContext(j);if(void 0===e)throw new Error("useUI must be called within UIResourceProvider");return e}},837:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var r,c,a,o,i=n(16),s=n(0),l=n(23),u=n(21),d=u.c.TextInput(r||(r=Object(l.a)(["\n\tmax-height: 300px;\n"]))),j=u.c.View(c||(c=Object(l.a)(["\n\tposition: relative;\n\twidth: 100%;\n"]))),b=u.c.View(a||(a=Object(l.a)(["\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n"]))),f=n(3),O=function(e){var t=e.data,n=JSON.stringify(t,null,"  ");return Object(f.jsx)(d,{multiline:!0,numberOfLines:n.split("\n").length,editable:!1,value:n})},h=n(46),m=u.c.View(o||(o=Object(l.a)(["\n\tpadding-left: 20px;\n"]))),x=function(e){var t=e.name,n=e.value;e.keyPath,e.deep;return Object(f.jsxs)(m,{style:{flexDirection:"row"},children:[Object(f.jsxs)(h.a,{type:"info",children:[t," : "]}),Object(f.jsx)(h.a,{children:String(n)})]})},p=n(27),y=n(20),v=n(840),g=n(172),w=function(e){var t=e.data,n=e.name,r=e.isCollapsed,c=e.onExpand,a=e.keyPath,o=void 0===a?[]:a,l=e.deep,u=void 0===l?0:l,d=-1===u?[]:[].concat(Object(p.a)(o),[n]),j=u+1,b=s.useState(r(d,u,t)),O=Object(i.a)(b,2),x=O[0],w=O[1];return Object(f.jsxs)(m,{children:[Object(f.jsxs)(y.a,{style:{flexDirection:"row"},children:[Object(f.jsxs)(g.a,{onPress:function(){x&&c(d,u,t),w(!x)},style:{flexDirection:"row",alignItems:"center"},children:[Object(f.jsx)(v.a,{direction:x?"right":"down"}),Object(f.jsxs)(h.a,{type:"info",children:[n," :"]})]}),x?function(){var e=Object.getOwnPropertyNames(t).length,n=0===e||e>1?"keys":"key";return Object(f.jsxs)(h.a,{type:"secondary",children:[" {...}"," ",e," ",n]})}():Object(f.jsx)(h.a,{children:" {"})]}),!x&&function(){var e=Object.getOwnPropertyNames(t).map((function(e){return Object(f.jsx)(C,{name:e,data:t[e],keyPath:d,deep:j,isCollapsed:r,onExpand:c},e)}));return Object(f.jsx)(y.a,{children:e})}(),!x&&Object(f.jsx)(h.a,{children:"}"})]})},k=function(e){var t=e.data,n=e.name,r=e.isCollapsed,c=e.onExpand,a=e.keyPath,o=void 0===a?[]:a,l=e.deep,u=void 0===l?0:l,d=-1===u?[]:[].concat(Object(p.a)(o),[n]),j=u+1,b=s.useState(r(d,u,t)),O=Object(i.a)(b,2),x=O[0],w=O[1];return Object(f.jsxs)(m,{children:[Object(f.jsxs)(y.a,{style:{flexDirection:"row"},children:[Object(f.jsxs)(g.a,{onPress:function(){x&&c(d,u,t),w(!x)},style:{flexDirection:"row",alignItems:"center"},children:[Object(f.jsx)(v.a,{direction:x?"right":"down"}),Object(f.jsxs)(h.a,{type:"info",children:[n," :"]})]}),x?function(){var e=t.length,n=0===e||e>1?"items":"item";return Object(f.jsxs)(h.a,{type:"secondary",children:[" [...]"," ",e," ",n]})}():Object(f.jsx)(h.a,{children:" ["})]}),!x&&function(){Object.getOwnPropertyNames(t);var e=t.map((function(e,t){return Object(f.jsx)(C,{name:"".concat(t),data:e,keyPath:d,deep:j,isCollapsed:r,onExpand:c},t)}));return Object(f.jsx)(y.a,{children:e})}(),!x&&Object(f.jsx)(h.a,{children:"]"})]})},S=n(861),C=function(e){var t=e.data,n=e.name,r=e.isCollapsed,c=void 0===r?function(e){return e.length>0}:r,a=e.onExpand,o=void 0===a?function(){}:a,i=e.keyPath,s=void 0===i?[]:i,l=e.deep,u=void 0===l?0:l;switch(Object(S.a)(t)){case"String":return Object(f.jsx)(x,{name:n,value:'"'.concat(t,'"'),originalValue:t,keyPath:s,deep:u,isCollapsed:c,onExpand:o});case"Number":return Object(f.jsx)(x,{name:n,value:t,originalValue:t,keyPath:s,deep:u,isCollapsed:c,onExpand:o});case"Boolean":return Object(f.jsx)(x,{name:n,value:!!t,originalValue:t,keyPath:s,deep:u,isCollapsed:c,onExpand:o});case"Date":return Object(f.jsx)(x,{name:n,value:t.toISOString(),originalValue:t,keyPath:s,deep:u,isCollapsed:c,onExpand:o});case"Null":return Object(f.jsx)(x,{name:n,value:"null",originalValue:"null",keyPath:s,deep:u,isCollapsed:c,onExpand:o});case"Undefined":return Object(f.jsx)(x,{name:n,value:"undefined",originalValue:"undefined",keyPath:s,deep:u,isCollapsed:c,onExpand:o});case"Object":return Object(f.jsx)(w,{name:n,data:t,keyPath:s,deep:u,isCollapsed:c,onExpand:o});case"Array":return Object(f.jsx)(k,{name:n,data:t,keyPath:s,deep:u,isCollapsed:c,onExpand:o});default:return null}},_=n(79),D=n(74),P=function(e){var t=e.data,n=e.rootName,r=void 0===n?"root":n,c=e.isCollapsed,a=e.onExpand,o=(e.fallback,s.useState(!1)),l=Object(i.a)(o,2),u=l[0],d=l[1];return Object(f.jsxs)(j,{children:[u?Object(f.jsx)(O,{data:t}):Object(f.jsx)(C,{data:t,name:r,deep:-1,isCollapsed:c,onExpand:a}),Object(f.jsx)(b,{children:Object(f.jsx)(_.a,{title:"raw",type:"secondary",background:"outline",size:"small",onPress:function(){return d(!u)},accessoryLeft:u?Object(f.jsx)(D.a,{size:"small",name:"visibility-off"}):Object(f.jsx)(D.a,{size:"small",name:"visibility"})})})]})}},838:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r,c,a,o,i,s=n(16),l=n(0),u=n(343),d=n(46),j=n(23),b=n(21),f=n(74),O=n(172),h=Object(b.c)(O.a)(r||(r=Object(j.a)(["\n\tdisplay: flex;\n\tflex-direction: row;\n\t","\n"])),(function(e){return e.disabled&&Object(b.b)(c||(c=Object(j.a)(["\n\t\t\topacity: 0.5;\n\t\t"])))})),m=b.c.View(a||(a=Object(j.a)(["\n\tflex: 0 1 auto;\n\talign-items: center;\n\tjustify-content: center;\n\tborder-style: solid;\n\tbackground-color: ",";\n\twidth: ",";\n\theight: ",";\n\tborder-width: ",";\n\tborder-color: ",";\n\tborder-radius: ",";\n"])),(function(e){var t=e.theme;return e.checked?t.CHECKBOX_BACKGROUND_COLOR:"transparent"}),(function(e){return e.theme.CHECKBOX_WIDTH}),(function(e){return e.theme.CHECKBOX_HEIGHT}),(function(e){return e.theme.CHECKBOX_BORDER_WIDTH}),(function(e){return e.theme.CHECKBOX_BORDER_COLOR}),(function(e){return e.theme.CHECKBOX_BORDER_RADIUS})),x=Object(b.c)(f.a)(o||(o=Object(j.a)(["\n\tcolor: #fff;\n"]))),p=b.c.View(i||(i=Object(j.a)(["\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n\tpadding: 0 5px;\n"]))),y=n(3),v=function(e){var t=e.label,n=(e.checked,e.info);return Object(y.jsxs)(p,{children:[Object(y.jsx)(d.a,{children:t}),n&&Object(y.jsx)(d.a,{children:n})]})};function g(e){var t=e.checked,n=(e.hasError,e.disabled);e.focused,e.hovered,e.pressed;return Object(y.jsx)(m,{checked:t,children:t&&Object(y.jsx)(x,{name:"check",size:"small",disabled:n,color:"#FFF"})})}var w=function(e){var t=e.label,n=e.disabled,r=e.helpText,c=e.checked,a=void 0!==c&&c,o=e.onChange,i=Object(u.a)(a,o),d=Object(s.a)(i,2),j=d[0],b=d[1],f=l.useCallback((function(){return null===b||void 0===b?void 0:b(!j)}),[j,b]);return Object(y.jsxs)(h,{disabled:n,onPress:f,children:[Object(y.jsx)(g,{checked:j,disabled:n}),Object(y.jsx)(v,{label:t,checked:j,info:r})]})}},839:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r,c,a,o=n(1),i=n(26),s=n(0),l=n(131),u=n(342),d=n(23),j=n(21),b=j.c.View(r||(r=Object(d.a)(["\n\tflex-direction: row;\n\tflex: 1;\n\talign-items: center;\n"]))),f=j.c.View(c||(c=Object(d.a)(["\n\tflex: 1;\n"]))),O=(j.c.View(a||(a=Object(d.a)(["\n\tflex-direction: row;\n"]))),n(3)),h=["actions","onSearch","filters"],m=function(e){e.actions;var t=e.onSearch,n=e.filters,r=Object(i.a)(e,h),c=s.useMemo((function(){if(n)return n.map((function(e){var t=e.label,n=e.onRemove;return Object(O.jsx)(u.a,{removable:!0,onRemove:n,children:t})}))}),[n]);return Object(O.jsx)(b,{children:Object(O.jsx)(f,{children:Object(O.jsx)(l.a,Object(o.a)({hideLabel:!0,clearable:!0,onChange:t,leftAccessory:c},r))})})}},840:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));n(0);var r,c,a,o,i,s=n(23),l=n(21),u=l.c.View(r||(r=Object(s.a)(["\n\twidth: 8px;\n\theight: 8px;\n"]))),d=l.c.View(c||(c=Object(s.a)(["\n\tborder-top-width: 4px;\n\tborder-bottom-width: 4px;\n\tborder-right-width: 4px;\n\tborder-right-color: ",";\n\tborder-top-color: transparent;\n\tborder-bottom-color: transparent;\n"])),(function(e){return e.theme.COLOR_PRIMARY})),j=l.c.View(a||(a=Object(s.a)(["\n\tborder-top-width: 4px;\n\tborder-bottom-width: 4px;\n\tborder-left-width: 4px;\n\tborder-left-color: ",";\n\tborder-top-color: transparent;\n\tborder-bottom-color: transparent;\n"])),(function(e){return e.theme.COLOR_PRIMARY})),b=l.c.View(o||(o=Object(s.a)(["\n\tborder-left-width: 4px;\n\tborder-right-width: 4px;\n\tborder-bottom-width: 4px;\n\tborder-bottom-color: ",";\n\tborder-left-color: transparent;\n\tborder-right-color: transparent;\n"])),(function(e){return e.theme.COLOR_PRIMARY})),f=l.c.View(i||(i=Object(s.a)(["\n\tborder-left-width: 4px;\n\tborder-right-width: 4px;\n\tborder-top-width: 4px;\n\tborder-top-color: ",";\n\tborder-left-color: transparent;\n\tborder-right-color: transparent;\n"])),(function(e){return e.theme.COLOR_PRIMARY})),O=n(3),h=function(e){var t=e.direction,n=void 0===t?"down":t;e.size;return Object(O.jsx)(u,{children:function(){switch(n){case"left":return Object(O.jsx)(d,{});case"right":return Object(O.jsx)(j,{});case"up":return Object(O.jsx)(b,{});default:return Object(O.jsx)(f,{})}}()})}},841:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(16),c=n(0),a=n(888),o=n(816),i=n(825),s=n(881),l=n(93),u=n(130),d=function(e,t){var n=Object(u.b)(),d=n.storeDB,j=null===d||void 0===d?void 0:d.collections[e],b=c.useState(t),f=Object(r.a)(b,2),O=f[0],h=f[1];Object(l.p)();if(!j)throw Error("Collection not found");var m=Object(a.a)((function(e){return e.pipe(Object(o.a)((function(e){var t=Object(r.a)(e,1)[0];return j.query(t).$})),Object(i.a)(1),Object(s.a)((function(e){return console.error(e),e})))}),[O]);return{data$:m,query:O,setQuery:h}}},842:function(e,t,n){"use strict";var r=n(0),c=n(342),a=n(832),o=n(3);t.a=function(e){var t=e.item.categories,n=Object(a.b)().setQuery,i=r.useCallback((function(e){n("filters.category",e)}),[n]),s=r.useMemo((function(){return Array.isArray(t)?t.map((function(e){return{key:e.id,label:e.name,action:function(){return i(e)}}})):[]}),[t,i]);return t?Object(o.jsx)(c.a.Group,{tags:s}):Object(o.jsx)(c.a.Group.Skeleton,{numberOfTags:2})}},843:function(e,t,n){"use strict";var r=n(0),c=n(342),a=n(832),o=n(3);t.a=function(e){var t=e.item.tags,n=Object(a.b)().setQuery,i=r.useCallback((function(e){n("filters.tag",e)}),[n]),s=r.useMemo((function(){return Array.isArray(t)?t.map((function(e){return{key:e.id,label:e.name,action:function(){return i(e)}}})):[]}),[t,i]);return t?Object(o.jsx)(c.a.Group,{tags:s}):Object(o.jsx)(c.a.Group.Skeleton,{numberOfTags:2})}},844:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));n(0);var r=n(50),c=n(526),a=n(3),o=(function(){var t=function(e,t,n){return Math.min(Math.max(t,e),n)};t._closure={},t.asString="function _f(value,lowerBound,upperBound){return Math.min(Math.max(lowerBound,value),upperBound);}",t.__workletHash=5192855762164,t.__location="/home/runner/work/client/client/packages/common/src/components/draggable/draggable.tsx (11:14)",e.__reanimatedWorkletInit(t)}(),function(t){var n=t.children,o=t.onStart,i=t.onActive,s=t.onEnd,l=(t.minX,t.minY,t.maxX,t.maxY,Object(r.d)({onStart:function(){const t=function(e,t){o&&o(e,t)};return t._closure={_onStart:o},t.asString="function onStart(event,ctx){const{_onStart}=jsThis._closure;{if(_onStart){_onStart(event,ctx);}}}",t.__workletHash=0xdec80fc8533,t.__location="/home/runner/work/client/client/packages/common/src/components/draggable/draggable.tsx",e.__reanimatedWorkletInit(t),t}(),onActive:function(){const t=function(e,t){i&&i(e,t)};return t._closure={_onActive:i},t.asString="function onActive(event,ctx){const{_onActive}=jsThis._closure;{if(_onActive){_onActive(event,ctx);}}}",t.__workletHash=0xc1905c1c1d3,t.__location="/home/runner/work/client/client/packages/common/src/components/draggable/draggable.tsx",e.__reanimatedWorkletInit(t),t}(),onEnd:function(){const t=function(e,t){s&&s(e,t)};return t._closure={_onEnd:s},t.asString="function onEnd(event,ctx){const{_onEnd}=jsThis._closure;{if(_onEnd){_onEnd(event,ctx);}}}",t.__workletHash=5282268739699,t.__location="/home/runner/work/client/client/packages/common/src/components/draggable/draggable.tsx",e.__reanimatedWorkletInit(t),t}()}));return Object(a.jsx)(c.b,{onGestureEvent:l,children:n})})}).call(this,n(38))},845:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return i}));n(0);var r=n(20),c=n(50),a=n(863),o=n(3),i=function(t){var n=t.open,i=t.children,s=Object(c.f)(),l=Object(c.h)(function(){const t=function(){return n?Object(c.m)(1):Object(c.m)(0)};return t._closure={open:n,withTiming:c.m},t.asString="function _f(){const{open,withTiming}=jsThis._closure;{return open?withTiming(1):withTiming(0);}}",t.__workletHash=0xdfa6b0f450c,t.__location="/home/runner/work/client/client/packages/common/src/components/collapsible/collapsible.tsx (34:34)",e.__reanimatedWorkletInit(t),t}()),u=Object(c.i)(0),d=Object(c.g)(function(){const t=function(){return{height:u.value*l.value,opacity:l.value}};return t._closure={height:u,progress:l},t.asString="function _f(){const{height,progress}=jsThis._closure;{return{height:height.value*progress.value,opacity:progress.value};}}",t.__workletHash=7619090238724,t.__location="/home/runner/work/client/client/packages/common/src/components/collapsible/collapsible.tsx (37:32)",e.__reanimatedWorkletInit(t),t}());return Object(o.jsx)(a.a,{as:c.a.View,style:d,children:Object(o.jsx)(r.a,{ref:s,onLayout:function(e){var t=e.nativeEvent.layout.height;u.value=t},children:i})})}}).call(this,n(38))},849:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));n(0);var r,c,a,o=n(23),i=n(21),s=i.c.View(r||(r=Object(o.a)(["\n\tpadding: 3px;\n\topacity: 0.6;\n"]))),l=i.c.View(c||(c=Object(o.a)(["\n\tborder-left-width: 4px;\n\tborder-right-width: 4px;\n\tborder-bottom-width: 4px;\n\tborder-bottom-color: ",";\n\tborder-left-color: transparent;\n\tborder-right-color: transparent;\n\tmargin-bottom: 2px;\n"])),(function(e){var t=e.active,n=e.theme;return t?n.COLOR_PRIMARY:n.COLOR_DISABLED})),u=i.c.View(a||(a=Object(o.a)(["\n\tborder-left-width: 4px;\n\tborder-right-width: 4px;\n\tborder-top-width: 4px;\n\tborder-top-color: ",";\n\tborder-left-color: transparent;\n\tborder-right-color: transparent;\n"])),(function(e){var t=e.active,n=e.theme;return t?n.COLOR_PRIMARY:n.COLOR_DISABLED})),d=n(3),j=function(e){var t=e.direction;e.visible;return Object(d.jsxs)(s,{children:[Object(d.jsx)(l,{active:"asc"===t}),Object(d.jsx)(u,{active:"desc"===t})]})}},850:function(e){e.exports=JSON.parse('{"posProducts":{"sortBy":"name","sortDirection":"asc","width":0.6,"columns":[{"key":"image","disableSort":true,"order":1,"width":"15%","flexShrink":0,"hideLabel":true},{"key":"name","order":2,"display":[{"key":"sku","hide":true,"order":1},{"key":"categories","order":2},{"key":"tags","hide":true,"order":3}]},{"key":"sku","hide":true,"order":3,"width":"20%","flexShrink":0},{"key":"price","order":4,"width":"90px","flexShrink":0,"align":"right"},{"key":"actions","disableSort":true,"order":5,"width":"38px","flexShrink":0,"hideLabel":true}]},"cart":{"sortBy":"id","sortDirection":"asc","columns":[{"key":"quantity","order":0,"width":"15%","flexShrink":0},{"key":"name","order":1,"width":"50%"},{"key":"sku","hide":true,"order":2,"width":"20%","flexShrink":0},{"key":"price","order":3,"width":"20%","flexShrink":0},{"key":"subtotal","hide":true,"order":4,"width":"20%","flexShrink":0},{"key":"subtotalTax","hide":true,"order":5,"width":"20%","flexShrink":0},{"key":"totalTax","hide":true,"order":6,"width":"20%","flexShrink":0},{"key":"total","order":7,"width":"20%","flexShrink":0,"align":"right"},{"key":"actions","order":8,"width":"60px","flexShrink":0,"hideLabel":true}]},"products":{"sortBy":"name","sortDirection":"asc","columns":[{"key":"image","width":"15%","disableSort":true,"order":1,"flexShrink":0,"hideLabel":true},{"key":"id","order":2,"width":"50px","flexShrink":0,"hide":true},{"key":"name","width":"30%","order":3},{"key":"sku","order":4,"width":"80px","flexShrink":0,"hide":true},{"key":"categories","width":"20%","order":5,"disableSort":true},{"key":"tags","width":"20%","order":6,"hide":true,"disableSort":true},{"key":"regularPrice","width":"100px","order":7},{"key":"salePrice","width":"100px","order":8},{"key":"dateCreated","width":"100px","order":9,"hide":true},{"key":"dateModified","width":"100px","order":10,"hide":true},{"key":"actions","disableSort":true,"order":11,"width":"38px","flexShrink":0,"hideLabel":true}]},"orders":{"sortBy":"number","sortDirection":"desc","columns":[{"key":"status","width":"38px","order":1,"hideLabel":true},{"key":"number","width":"38px","order":2,"hideLabel":true},{"key":"customer","width":"20%","order":3},{"key":"billing","width":"20%","order":4},{"key":"shipping","width":"20%","order":5},{"key":"customerNote","width":"38px","order":6},{"key":"dateCreated","width":"100px","order":7},{"key":"dateModified","hide":true,"width":"100px","order":8},{"key":"dateCompleted","hide":true,"width":"100px","order":9},{"key":"total","width":"90px","order":10},{"key":"actions","disableSort":true,"width":"38px","order":11,"hideLabel":true}]},"customers":{"sortBy":"lastName","sortDirection":"asc","columns":[{"key":"avatarUrl","disableSort":true,"width":"15%","order":1,"hideLabel":true},{"key":"firstName","width":"20%","order":2},{"key":"lastName","width":"20%","order":3},{"key":"email","width":"20%","order":4},{"key":"role","width":"20%","hide":true,"order":5},{"key":"username","width":"20%","hide":true,"order":6},{"key":"billing","width":"20%","order":7},{"key":"shipping","width":"20%","order":8},{"key":"actions","disableSort":true,"width":"38px","order":9,"hideLabel":true}]}}')},851:function(e,t,n){"use strict";var r=n(844);n.d(t,"a",(function(){return r.a}))},852:function(e,t,n){"use strict";var r=n(16),c=n(0);t.a=function(){var e=c.useState(null),t=Object(r.a)(e,2),n=t[0],a=t[1];return[n,c.useCallback((function(e){var t=e.nativeEvent;a(t.layout)}),[a])]}},861:function(module,__webpack_exports__,__webpack_require__){"use strict";function getObjectType(e){return null===e||"object"!==typeof e||Array.isArray(e)||"function"!==typeof e[Symbol.iterator]?Object.prototype.toString.call(e).slice(8,-1):"Iterable"}function parse(string){var result=string;if(0===result.indexOf("function"))return eval("(".concat(result,")"));try{result=JSON.parse(string)}catch(e){}return result}__webpack_require__.d(__webpack_exports__,"a",(function(){return getObjectType}))},863:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r,c=n(23),a=n(21).c.View(r||(r=Object(c.a)(["\n\toverflow: hidden;\n"])))},864:function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return j}));var r,c,a,o,i=n(23),s=n(21),l=s.c.View(r||(r=Object(i.a)(["\n\theight: 100%;\n\tflex-direction: row;\n\tpadding: ",";\n"])),(function(e){var t=e.theme;return"".concat(t.PAGE_MAIN_PADDING_Y," ").concat(t.PAGE_MAIN_PADDING_X)})),u=s.c.View(c||(c=Object(i.a)(["\n\theight: 100%;\n\tflex-grow: 0;\n\tflex-shrink: 0;\n\tflex-basis: 60%;\n"]))),d=s.c.View(a||(a=Object(i.a)(["\n\theight: 100%;\n\tflex: 1;\n"]))),j=s.c.View(o||(o=Object(i.a)(["\n\theight: 100%;\n\tflex: 1;\n"])))},870:function(e,t,n){"use strict";n.d(t,"a",(function(){return Pe}));var r,c,a,o,i,s,l,u,d,j,b=n(1),f=n(16),O=n(0),h=n(20),m=n(826),x=n(888),p=n(818),y=n(816),v=n(83),g=n(173),w=n(46),k=n(342),S=n(835),C=n(339),_=n(887),D=n(830),P=n(74),B=n(172),R=n(4),N=n.n(R),A=n(11),E=n(79),I=n(340),L=n(23),T=n(21),V=n(135),G=T.c.View(r||(r=Object(L.a)([""]))),M=T.c.View(c||(c=Object(L.a)(["\n\tflex-direction: row;\n"]))),$=Object(T.c)(V.a)(a||(a=Object(L.a)(["\n\tflex: 1;\n"]))),H=T.c.View(o||(o=Object(L.a)(["\n\tjustify-content: space-between;\n\tflex-wrap: wrap;\n\tflex-direction: row;\n"]))),q=Object(T.c)(B.a)(i||(i=Object(L.a)(["\n\tflex-grow: 1;\n\tflex-shrink: 0;\n\tflex-basis: 30%;\n\talign-items: center;\n\tmargin: 1px;\n"]))),F=Object(T.c)(V.a)(s||(s=Object(L.a)([""]))),U=n(3),Q=["7","8","9","4","5","6","1","2","3","-","0","."],z=function(e){e.display;var t=e.placeholder,n=void 0===t?"0":t,r=O.useState(n),c=Object(f.a)(r,2),a=c[0],o=c[1];return Object(U.jsxs)(G,{children:[Object(U.jsxs)(M,{children:[Object(U.jsx)($,{children:a}),Object(U.jsx)(P.a,{name:"backspace",onPress:function(){o(a)}})]}),Object(U.jsx)(H,{children:Q.map((function(e){return Object(U.jsx)(q,{onPress:function(){return function(e){o(a+e)}(e)},children:Object(U.jsx)(F,{children:e})},"button-".concat(e))}))})]})},W=function(e){var t=e.lineItem,n=O.useState(!1),r=Object(f.a)(n,2),c=r[0],a=r[1],o=Object(m.a)(t.quantity$,t.quantity);return Object(U.jsx)(I.a,{open:c,onRequestClose:function(){return a(!1)},activator:Object(U.jsx)(E.a,{title:String(o),onPress:function(){return a(!0)},background:"outline"}),children:Object(U.jsx)(z,{placeholder:String(o)})})},X=function(e){var t=e.lineItem,n=Object(m.a)(t.price$,t.price);return Object(U.jsx)(E.a,{title:String(n),onPress:function(){console.log("numpad")},background:"outline"})},K=n(834),J=function(e){var t=e.item,n=e.type,r=void 0===n?"total":n,c=Object(m.a)(t["".concat(r,"$")],t[r]);return Object(C.a)("CartLineItemTotal",{item:t,total:c}),Object(U.jsx)(K.a.Currency,{children:c})},Y=function(e){var t=e.item,n=e.type,r=void 0===n?"totalTax":n,c=Object(m.a)(t["".concat(r,"$")],t[r]);return Object(U.jsx)(w.a,{children:c})},Z=n(437),ee=n(831),te=n(102),ne=n(131),re=n(838),ce=T.c.View(l||(l=Object(L.a)([""]))),ae=T.c.View(u||(u=Object(L.a)(["\n\tflex-direction: row;\n"]))),oe=T.c.View(d||(d=Object(L.a)(["\n\tflex: 1;\n\tpadding: 5px;\n"]))),ie=function(e){var t=e.data,n=function(){console.log("hi")};return Object(U.jsx)(ce,{children:null===t||void 0===t?void 0:t.map((function(e){return Object(U.jsxs)(ae,{children:[Object(U.jsx)(oe,{children:Object(U.jsx)(ne.a,{label:"Key",value:e.key})}),Object(U.jsx)(oe,{children:Object(U.jsx)(ne.a,{label:"Value",value:e.value})}),Object(U.jsx)(P.a,{name:"add",onPress:n})]},e.key)}))})},se=function(e){var t=e.item,n=e.onClose;Object(m.a)(t.$);var r=function(){var e=Object(A.a)(N.a.mark((function e(n){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.atomicPatch({taxClass:n});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(e){return t.collection.schema.topLevelFields.includes(e)};return Object(U.jsx)(te.a,{title:t.name||t.methodTitle,open:!0,onClose:n,primaryAction:{label:"Save",action:n},children:Object(U.jsxs)(te.a.Section,{children:[c("name")&&Object(U.jsx)(ne.a,{label:"Name",value:t.name}),c("taxStatus")&&Object(U.jsx)(re.a,{label:"Taxable",checked:"taxable"===t.taxStatus,onChange:function(e){return t.atomicPatch({taxStatus:e?"taxable":"none"})}}),c("taxClass")&&Object(U.jsx)(ne.a,{label:"Tax Class",value:t.taxClass,onChange:r}),Object(U.jsx)(ie,{data:t.metaData})]})})},le=function(e){var t=e.item,n=O.useState(!1),r=Object(f.a)(n,2),c=r[0],a=r[1],o=O.useContext(ee.a).currentOrder,i=function(e){var t=O.useContext(Z.a);return O.useCallback((function(){return t.show(e)}),[t,e])}({message:"Item removed",dismissable:!0,action:{label:"Undo",action:function(){console.log("Undo remove",t)}}});return Object(U.jsxs)(h.a,{style:{flexDirection:"row",alignItems:"center"},children:[Object(U.jsx)(P.a,{name:"more-vert",size:"large",onPress:function(){return a(!0)},backgroundStyle:"none"}),Object(U.jsx)(P.a,{name:"remove",size:"x-large",onPress:function(){null===o||void 0===o||o.removeCartLine(t),i()},backgroundStyle:"none",type:"critical"}),c&&Object(U.jsx)(se,{item:t,onClose:function(){return a(!1)}})]})},ue=function(e){var t=e.item,n=e.columns;return Object(C.a)("CartLineItem",{item:t,columns:n}),Object(U.jsx)(D.a.Body.Row,{rowData:t,columns:n,children:function(e){var n=e.getCellProps,r=n(),c=(r.cellData,r.column);return Object(U.jsx)(D.a.Body.Row.Cell,Object(b.a)(Object(b.a)({},n()),{},{children:function(){switch(c.key){case"quantity":return Object(U.jsx)(W,{lineItem:t});case"price":return Object(U.jsx)(X,{lineItem:t});case"subtotalTax":return Object(U.jsx)(Y,{item:t,type:"subtotalTax"});case"subtotal":return Object(U.jsx)(J,{item:t,type:"subtotal"});case"totalTax":return Object(U.jsx)(Y,{item:t});case"total":return Object(U.jsx)(J,{item:t});case"actions":return Object(U.jsx)(le,{item:t});default:return null}}()}))}})},de=function(e){var t=e.item,n=Object(m.a)(t.total$,t.total);return Object(U.jsx)(E.a,{title:n,onPress:function(){console.log("numpad")},background:"outline"})},je=function(e){var t=e.fee,n=e.columns;return Object(U.jsx)(D.a.Body.Row,{rowData:t,columns:n,children:function(e){var n=e.getCellProps,r=n(),c=(r.cellData,r.column);return Object(U.jsx)(D.a.Body.Row.Cell,Object(b.a)(Object(b.a)({},n()),{},{children:function(){switch(c.key){case"quantity":return Object(U.jsx)(U.Fragment,{});case"price":return Object(U.jsx)(de,{item:t});case"totalTax":return Object(U.jsx)(Y,{item:t});case"actions":return Object(U.jsx)(le,{item:t});default:return null}}()}))}})},be=function(e){var t=e.shipping,n=e.columns;return Object(U.jsx)(D.a.Body.Row,{rowData:t,columns:n,children:function(e){var n=e.getCellProps,r=n(),c=(r.cellData,r.column);return Object(U.jsx)(D.a.Body.Row.Cell,Object(b.a)(Object(b.a)({},n()),{},{children:function(){switch(c.key){case"quantity":return Object(U.jsx)(U.Fragment,{});case"price":return Object(U.jsx)(de,{item:t});case"name":return Object(U.jsx)(w.a,{children:t.methodTitle});case"totalTax":return Object(U.jsx)(Y,{item:t});case"actions":return Object(U.jsx)(le,{item:t});default:return null}}()}))}})},fe=function(e){var t=e.order,n=e.columns,r=e.items,c=e.query,a=e.onSort,o=e.ui,i=Object(_.a)().t,s=O.useMemo((function(){return Object(U.jsxs)(h.a,{children:[Object(U.jsxs)(B.a,{style:{flexDirection:"row",padding:5,alignItems:"center"},onPress:function(){t.addFeeLine({name:"Fee",total:"10"})},children:[Object(U.jsx)(w.a,{style:{flex:1},children:"Add fee"}),Object(U.jsx)(P.a,{name:"addCircleOutline"})]}),Object(U.jsxs)(B.a,{style:{flexDirection:"row",padding:5,alignItems:"center"},onPress:function(){t.addShippingLine({methodTitle:"Shipping",methodId:"test",total:"5"})},children:[Object(U.jsx)(w.a,{style:{flex:1},children:"Add shipping"}),Object(U.jsx)(P.a,{name:"addCircleOutline"})]})]})}),[t]);return Object(C.a)("CartTable",{columns:n,items:r,query:c,onSort:a,ui:o}),Object(U.jsxs)(D.a,{columns:n,data:r,sort:a,sortBy:c.sortBy,sortDirection:c.sortDirection,footer:s,children:[Object(U.jsx)(D.a.Header,{children:Object(U.jsx)(D.a.Header.Row,{columns:n,children:function(e){var t=e.getHeaderCellProps,n=t().column;return Object(U.jsx)(D.a.Header.Row.Cell,Object(b.a)(Object(b.a)({},t()),{},{children:i("cart.column.label.".concat(n.key))}))}})}),Object(U.jsx)(D.a.Body,{children:function(e){var t=e.item;switch(t.collection.name){case"line_items":return Object(U.jsx)(ue,{item:t,columns:n});case"fee_lines":return Object(U.jsx)(je,{fee:t,columns:n});case"shipping_lines":return Object(U.jsx)(be,{shipping:t,columns:n});default:return null}}})]})},Oe=n(235),he=n.n(Oe),me=n(841),xe=n(343),pe=T.c.ScrollView(j||(j=Object(L.a)(["\n\tmax-height: 200px;\n"]))),ye=function(e){var t=e.label,n=e.choices,r=e.selected,c=void 0===r?null:r,a=e.onChange,o=e.placeholder,i=e.searchValue,s=e.onSearch,l=e.hideLabel,u=O.useState(!1),d=Object(f.a)(u,2),j=d[0],b=d[1],h=O.useCallback((function(){return b(!0)}),[]),m=Object(xe.b)(c,a),x=Object(f.a)(m,2),p=x[0],y=x[1],v=O.useMemo((function(){return n.map((function(e){return Object(U.jsx)(I.a.Item,{label:e.label,disabled:e.disabled,onSelect:function(){return y(e.value)}},e.key)}))}),[n,y]);return Object(U.jsx)(I.a,{open:j,activator:Object(U.jsx)(ne.a,{label:t,hideLabel:l,onFocus:h,placeholder:o,onChange:s,value:i||p,clearable:!0,onClear:function(){return y(null)}}),onRequestClose:function(){b(!1)},hideBackdrop:!0,matchWidth:!0,children:Object(U.jsx)(pe,{children:v})})},ve=function(e){var t=e.selectedCustomer,n=e.onSelectCustomer,r=Object(_.a)().t,c=Object(me.a)("customers",{search:"",sortBy:"lastName",sortDirection:"asc"}),a=c.data$,o=c.query,i=c.setQuery,s=O.useCallback((function(e){i((function(t){return Object(b.a)(Object(b.a)({},t),{},{search:e})}))}),[i]),l=Object(m.a)(a,[]),u=O.useMemo((function(){return he()(l,"lastName").map((function(e){return{label:"".concat(e.firstName," ").concat(e.lastName),value:e,key:e.localID}}))}),[l]);return Object(C.a)("Customer Select",{selectedCustomer:t,onSelectCustomer:n,customers:l,onSearch:s,query:o,setQuery:i,data$:a}),Object(U.jsx)(ye,{label:"Search customers",hideLabel:!0,choices:u,placeholder:r("customers.search.placeholder"),selected:t?"".concat(t.firstName," ").concat(t.lastName):"",onSearch:s,searchValue:o.search,onChange:n})},ge=n(130),we=n(837),ke=function(e){var t=e.customer,n=Object(ge.b)().storeDB,r=O.useState(!1),c=Object(f.a)(r,2),a=c[0],o=c[1],i=O.useState(null===t||void 0===t?void 0:t.firstName),s=Object(f.a)(i,2),l=s[0],u=s[1],d=O.useState(null===t||void 0===t?void 0:t.email),j=Object(f.a)(d,2),b=j[0],h=j[1],m=O.useState(0),x=Object(f.a)(m,2),p=x[0],y=x[1],v=O.useCallback((function(){return o(!0)}),[]),g=O.useCallback((function(){return o(!1)}),[]),w=t?"Edit Customer":"Add Customer",k=function(){var e=Object(A.a)(N.a.mark((function e(){var r,c,a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t){e.next=8;break}return c=null===n||void 0===n?void 0:n.collections.customers,e.next=5,null===c||void 0===c?void 0:c.insert({firstName:l,email:b});case 5:e.sent,e.next=9;break;case 8:r.atomicPatch({firstName:l,email:b});case 9:r&&((a=r.syncRestApi({push:{}})).error$.subscribe((function(e){401===e.code&&console.log("need to login")})),a.run(!1));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=0===p?Object(U.jsxs)(te.a.Section,{children:[Object(U.jsx)(ne.a,{label:"First Name",value:l,onChange:u}),Object(U.jsx)(ne.a,{label:"Email",value:b,onChange:h})]}):Object(U.jsx)(te.a.Section,{children:t?Object(U.jsx)(we.a,{data:t.toJSON()}):null});return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(P.a,{name:"addCustomer",onPress:v,tooltip:"Add new customer"}),a&&Object(U.jsx)(te.a,{title:w,open:!0,onClose:g,primaryAction:{label:"Save",action:k},children:Object(U.jsx)(S.a,{tabs:["Form","JSON"],selected:p,onSelect:y,children:C})})]})},Se=n(833),Ce=function(e){var t=e.order,n=Object(m.a)(t.total$,t.total),r=Object(m.a)(t.totalTax$,t.totalTax);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(h.a,{style:{flexDirection:"row"},children:[Object(U.jsx)(h.a,{style:{flex:1},children:Object(U.jsx)(w.a,{children:"Total Tax:"})}),Object(U.jsx)(h.a,{children:Object(U.jsx)(w.a,{children:r})})]}),Object(U.jsxs)(h.a,{style:{flexDirection:"row"},children:[Object(U.jsx)(h.a,{style:{flex:1},children:Object(U.jsx)(w.a,{children:"Order Total:"})}),Object(U.jsx)(h.a,{children:Object(U.jsx)(w.a,{children:n})})]})]})},_e=(n(122),O.createContext((function(){}))),De=function(e){var t=e.order,n=O.useContext(ee.a).setCurrentOrder,r=O.useState(!1),c=Object(f.a)(r,2),a=c[0],o=c[1],i=O.useContext(_e);return Object(U.jsxs)(U.Fragment,{children:[Object(U.jsxs)(E.a.Group,{style:{marginBottom:5},children:[Object(U.jsx)(E.a,{title:"Add Note",background:"outline",onPress:function(){t.atomicPatch({customerNote:"This is a note!"})}}),Object(U.jsx)(E.a,{title:"Order Meta",background:"outline",onPress:function(){o(!0)}}),Object(U.jsx)(E.a,{title:"Save",background:"outline",onPress:Object(A.a)(N.a.mark((function e(){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.syncRestApi({push:{}})).error$.subscribe((function(e){401===e.code&&i()})),n.run(!1);case 3:case"end":return e.stop()}}),e)})))})]}),Object(U.jsxs)(E.a.Group,{children:[Object(U.jsx)(E.a,{title:"Void",type:"critical",onPress:Object(A.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.remove(),n(void 0);case 2:case"end":return e.stop()}}),e)}))),style:{width:"80px"}}),Object(U.jsx)(E.a,{title:"Checkout",accessoryRight:Object(U.jsx)(w.a,{type:"inverse",children:t.total}),type:"success",onPress:Object(A.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.atomicPatch({status:"pos-checkout"});case 1:case"end":return e.stop()}}),e)})))})]}),a&&Object(U.jsx)(te.a,{title:"Order Data",open:!0,onClose:function(){return o(!1)},primaryAction:{label:"Save",action:function(){return o(!1)}},children:Object(U.jsxs)(te.a.Section,{children:[Object(U.jsx)(ne.a,{label:"Order Number",value:t.number}),Object(U.jsx)(re.a,{label:"Price Includes Tax",checked:t.pricesIncludeTax,onChange:function(e){return t.atomicPatch({pricesIncludeTax:e})}}),Object(U.jsx)(ie,{data:t.metaData}),Object(U.jsx)(ne.a,{label:"Currency Symbol",value:t.currencySymbol})]})})]})},Pe=function(e){var t=e.ui,n=e.orders,r=void 0===n?[]:n;Object(C.a)("Cart",{ui:t,orders:r});var c=O.useContext(ee.a),a=c.currentOrder,o=c.setCurrentOrder,i=c.currentCustomer,s=c.setCurrentCustomer,l=Object(m.a)((function(){return t.get$("columns")}),t.get("columns")),u=Object(f.a)(l,1)[0],d=O.useState({sortBy:"id",sortDirection:"asc"}),j=Object(f.a)(d,2),_=j[0],D=j[1],P=O.useCallback((function(e){var t=e.sortBy,n=e.sortDirection;D(Object(b.a)(Object(b.a)({},_),{},{sortBy:t,sortDirection:n}))}),[_]),B=Object(x.a)((function(e){return e.pipe(Object(p.a)((function(e){var t=Object(f.a)(e,2),n=t[0];t[1];return Object(v.e)(n)})),Object(y.a)((function(e){var t=Object(f.a)(e,2),n=t[0];t[1];return n.cart$})))}),[a,_]),R=Object(m.a)(B,[]),N=O.useCallback((function(e){a&&a.addCustomer(e),s(e)}),[a,s]),A=O.useMemo((function(){return r.map((function(e){return e.total}))}),[r]),E=O.useCallback((function(e){o(r[e])}),[r,o]);return Object(U.jsx)(S.a,{tabs:A,selected:0,onSelect:E,position:"bottom",children:Object(U.jsxs)(g.a.Group,{children:[Object(U.jsxs)(g.a,{style:{flexDirection:"row",alignItems:"center"},children:[Object(U.jsx)(h.a,{style:{flex:1},children:i?Object(U.jsxs)(h.a,{style:{flexDirection:"row",alignItems:"center"},children:[Object(U.jsx)(w.a,{children:"Customer: "}),Object(U.jsx)(k.a,{removable:!0,onPress:function(){console.log("edit customer")},onRemove:function(){s(void 0)},children:"".concat(i.firstName," ").concat(i.lastName)})]}):Object(U.jsx)(ve,{onSelectCustomer:N})}),Object(U.jsx)(ke,{}),Object(U.jsx)(Se.a,{ui:t})]}),a?Object(U.jsxs)(g.a.Group,{grow:!0,children:[Object(U.jsx)(g.a,{grow:!0,children:Object(U.jsx)(fe,{order:a,items:R,columns:u,query:_,onSort:P,ui:t})}),Object(U.jsx)(g.a,{children:Object(U.jsx)(Ce,{order:a})}),Object(U.jsx)(g.a,{children:Object(U.jsx)(De,{order:a})})]}):Object(U.jsx)(g.a,{content:"Add item to cart",grow:!0})]})})}},871:function(e,t,n){"use strict";n.d(t,"a",(function(){return Me}));var r=n(0),c=n(826),a=n(158),o=n.n(a),i=n(130),s=n(93),l={products:["id","name"]},u=function(e){var t=Object(i.b)(),n=t.storeDB,c=t.site,a=t.wpCredentials,u=Object(s.p)();r.useEffect((function(){var t=o.a.CancelToken.source(),r={"X-WCPOS":"1"};return a.wpNonce&&Object.assign(r,{"X-WP-Nonce":a.wpNonce}),a.jwt&&Object.assign(r,{Authorization:"Bearer ".concat(a.jwt)}),o.a.get("products",{baseURL:c.wcApiUrl,params:{fields:l[e],posts_per_page:-1},headers:r}).then((function(t){var r=t.data;return n.collections[e].auditIdsFromServer(r)})).catch((function(e){var t=e.response;console.log(t),t?(401===t.status&&u.navigate("Modal",{login:!0}),403===t.status&&console.error("invalid nonce")):console.error("CORS error")})),function(){t.cancel()}}),[e,u,c.wcApiUrl,n.collections,a.jwt,a.wpNonce])},d=n(4),j=n.n(d),b=n(16),f=n(11),O=n(888),h=n(294),m=n(882),x=n(817),p=n(875),y=n(402),v=n.n(y),g=n(47),w=n.n(g),k=n(42),S=n.n(k),C=n(341),_=n.n(C),D=n(144),P=n.n(D),B=n(405),R=n.n(B),N=n(832);function A(e,t){var n=S()(e,"schema.topLevelFields");w()(t,(function(e,n){!["localID","_attachments","_rev"].includes(n)&&n.includes("_")&&(t[v()(n)]=e,P()(t,n))})),Array.isArray(t.metaData)&&w()(t.metaData,(function(e){"object"===typeof e.value&&null!==e.value&&(e.value=JSON.stringify(e.value))}));var r=R()(Object.keys(t),n);return r.length>0&&(console.log("the following properties are being omitted",r),r.forEach((function(e){P()(t,e)}))),t}var E,I,L,T,V,G,M=n(173),$=n(1),H=n(887),q=n(235),F=n.n(q),U=n(824),Q=n(816),z=n(143),W=n(339),X=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},K=n(23),J=n(21),Y=J.c.View(E||(E=Object(K.a)(["\n\twidth: 100%;\n\theight: 100%;\n"]))),Z=J.c.View(I||(I=Object(K.a)(["\n\tflex-direction: row;\n\talign-items: center;\n\tborder-bottom-width: 1px;\n\tborder-style: solid;\n\tborder-bottom-color: #000000;\n"]))),ee=J.c.View(L||(L=Object(K.a)(["\n\tpadding: 5px;\n\talign-items: flex-start;\n"]))),te=J.c.View(T||(T=Object(K.a)(["\n\tflex-direction: row;\n\tborder-bottom-width: 2px;\n\tborder-style: solid;\n\tborder-bottom-color: #000000;\n\tbackground-color: #ffffff;\n"]))),ne=J.c.View(V||(V=Object(K.a)(["\n\tpadding: 5px;\n"]))),re=J.c.View(G||(G=Object(K.a)(["\n\tflex-direction: row;\n\talign-items: center;\n"]))),ce=n(46),ae=n(172),oe=n(849),ie=n(3),se=r.memo((function(e){var t=e.columns,n=e.style,r=e.sort,c=e.sortBy,a=e.sortDirection;return Object(ie.jsx)(te,{children:t.map((function(e){var t=e.key,o=e.flexGrow,i=void 0===o?1:o,s=e.flexShrink,l=void 0===s?1:s,u=e.flexBasis,d=void 0===u?"auto":u,j=e.width,b=void 0===j?"100%":j,f=e.disableSort,O=void 0!==f&&f,h=e.defaultSortDirection,m=void 0===h?"asc":h,x=e.hideLabel,p=void 0!==x&&x,y=e.label,v=!O&&"function"===typeof r,g=v&&c===t,w=c!==t?m:"desc"===a?"asc":"desc";return Object(ie.jsx)(ne,{style:[{flexGrow:i,flexShrink:l,flexBasis:d,width:b},n],children:v?Object(ie.jsx)(ae.a,{onPress:function(e){v&&r({defaultSortDirection:m,event:e,sortBy:t,sortDirection:w})},children:function(e){var t=e.hovered;return Object(ie.jsxs)(re,{children:[Object(ie.jsx)(ce.a,{children:y}),Object(ie.jsx)(oe.a,{visible:t||g,direction:g?a:void 0})]})}}):!p&&Object(ie.jsx)(ce.a,{children:y})},t)}))})})),le=r.memo((function(e){var t=e.item,n=e.columns,r=e.rowStyle,a=e.cellStyle;Object(c.a)(t.$);return Object(ie.jsx)(Z,{style:r,children:n.map((function(e,n){var r=function(e,t,n){var r;return t.onRender?t.onRender(e,t,n):Object(ie.jsx)(ce.a,{children:String(null!==(r=e[t.key])&&void 0!==r?r:"")})}(t,e,n),c=e.flexGrow,o=void 0===c?1:c,i=e.flexShrink,s=void 0===i?1:i,l=e.flexBasis,u=void 0===l?"auto":l,d=e.width,j=void 0===d?"100%":d;return Object(ie.jsx)(ee,{style:[{flexGrow:o,flexShrink:s,flexBasis:u,width:j},a],children:r},e.key)}))})})),ue=n(20),de=n(862),je=function(){return Object(ie.jsx)(ce.a,{children:"No results found"})},be=r.memo((function(e){var t=e.data,n=(e.style,e.context),c=e.emptyRenderer,a=void 0===c?function(){return Object(ie.jsx)(je,{})}:c,o=e.rowRenderer,i=e.virtualizerRef,s=r.useRef(),l=r.useState(0),u=Object(b.a)(l,2)[1],d=r.useRef(0),j=Object(de.a)({size:t.length,parentRef:s,overscan:10});i&&(i.current=j);var f=r.useCallback((function(e,t){return S()(e,"localID")||t}),[]),O=r.useCallback((function(){d.current++,u((function(e){return e+1}))}),[]);return Object(ie.jsx)(fe.Provider,{value:O,children:Object(ie.jsxs)(ue.a,{ref:s,style:{overflow:"scroll",flexGrow:1,flexShrink:1,flexBasis:0},children:[0===j.virtualItems.length?null===a||void 0===a?void 0:a():null,Object(ie.jsx)(ue.a,{style:{position:"relative",width:"100&",height:j.totalSize},children:j.virtualItems.map((function(e){var r=t[e.index];return Object(ie.jsx)(ue.a,{ref:e.measureRef,style:{position:"absolute",top:0,left:0,width:"100%",transform:[{translateY:e.start}]},children:o(r,e.index,n)},f(r,e.index))}))})]})})})),fe=r.createContext(void 0);var Oe,he=function(e){var t=e.data,n=e.columns,c=e.style,a=e.enableColumnHeaders,o=void 0===a||a,i=e.footer,s=e.sort,l=e.sortBy,u=e.sortDirection,d=r.useCallback((function(e,t){return Object(ie.jsx)(le,{item:e,columns:n})}),[n]),j=o&&Object(ie.jsx)(se,{columns:n,sort:s,sortBy:l,sortDirection:u});return Object(ie.jsxs)(Y,{style:c,children:[j,Object(ie.jsx)(be,{data:t,rowRenderer:d}),i]})},me=n(74),xe=n(79),pe=n(340),ye=function(e){var t=e.product,n=r.useState([]),c=Object(b.a)(n,2),a=c[0],o=(c[1],function(){var e=Object(f.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.collections().orders.findOne().exec();case 2:e.sent.addOrUpdateLineItem(n,t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i=function(){var e=Object(f.a)(j.a.mark((function e(t){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return 0===a.length?Object(ie.jsx)(xe.a,{title:"Fetch variations",onPress:function(){i("products/".concat(t.id,"/variations"))}}):Object(ie.jsx)(ie.Fragment,{children:a.map((function(e){return Object(ie.jsxs)(ue.a,{children:[Object(ie.jsxs)(ce.a,{children:[e.id," -",e.attributes.map((function(e){return Object(ie.jsxs)(ce.a,{children:[e.name," -",e.option,","]},e.id)})),"- ",e.price]}),Object(ie.jsx)(xe.a,{title:"Add to Cart",onPress:function(){return o(e)}})]},e.id)}))})},ve=n(831),ge=function(e){var t=e.item,n=r.useContext(ve.a),c=n.currentOrder,a=n.setCurrentOrder,o=Object(i.b)().storeDB,s=r.useState(!1),l=Object(b.a)(s,2),u=l[0],d=l[1],O=r.useCallback(Object(f.a)(j.a.mark((function e(){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=4;break}c.addOrUpdateLineItem(t),e.next=8;break;case 4:return e.next=6,null===o||void 0===o?void 0:o.collections.orders.createNewOrderWithProduct(t);case 6:n=e.sent,a(n);case 8:case"end":return e.stop()}}),e)}))),[c,t,a,null===o||void 0===o?void 0:o.collections.orders]);return t.isSynced()?t.isVariable()?Object(ie.jsx)(pe.a,{open:u,onRequestClose:function(){return d(!1)},activator:Object(ie.jsx)(xe.a,{title:"->",onPress:function(){return d(!0)}}),children:Object(ie.jsx)(ye,{product:t})}):Object(ie.jsx)(me.a,{name:"addCircle",size:"x-large",backgroundStyle:"none",onPress:O}):Object(ie.jsx)(me.a.Skeleton,{size:"x-large"})},we=n(842),ke=n(345),Se=function(e){var t=e.item.thumbnail;return Object(ie.jsx)(ke.a,{src:t})},Ce=n(108),_e=n.n(Ce),De=n(843),Pe=function(e){var t=e.item,n=e.column.display,c=r.useCallback((function(e){var t=_e()(n,{key:e});return!(t&&t.hide)}),[n]);return Object(ie.jsxs)(ie.Fragment,{children:[Object(ie.jsx)(ce.a,{children:t.name}),c("sku")&&Object(ie.jsx)(ce.a,{size:"small",children:t.sku}),c("categories")&&Object(ie.jsx)(we.a,{item:t}),c("tags")&&Object(ie.jsx)(De.a,{item:t}),"variable"===t.type&&Object(ie.jsx)(ue.a,{children:t.attributes.filter((function(e){return e.variation})).map((function(e){return Object(ie.jsxs)(ce.a,{size:"small",children:[Object(ie.jsxs)(ce.a,{size:"small",type:"secondary",children:[e.name,":"]}),e.options.join(", ")]},e.id)}))})]})},Be=function(e){var t=e.item;return t.isSynced()?Object(ie.jsx)(ce.a,{children:t.price}):Object(ie.jsx)(ce.a.Skeleton,{length:"short"})},Re=function(e){var t=e.item;return Object(ie.jsx)(ce.a,{children:t.regular_price})},Ne=function(e){var t=e.item;return t.isSynced()?Object(ie.jsx)(ce.a,{children:t.sku}):Object(ie.jsx)(ce.a.Skeleton,{length:"short"})},Ae=J.c.View(Oe||(Oe=Object(K.a)(["\n\talign-items: end;\n"]))),Ee=function(e){var t=e.count,n=Object(i.b)().storeDB,r=Object(c.a)(n.products.totalDocuments$,0);return Object(ie.jsx)(Ae,{children:Object(ie.jsxs)(ce.a,{children:[t," of ",r]})})},Ie={actions:ge,categories:we.a,image:Se,name:Pe,price:Be,regularPrice:Re,sku:Ne,tag:De.a},Le=function(e){var t=e.columns,n=Object(H.a)().t,a=function(e){var t=Object(i.b)().storeDB,n=t.collections[e],a=Object(N.b)().query,o=Object(c.a)((function(e){return e.pipe(Object(U.a)(100),Object(Q.a)((function(e){var t={};return w()(e.search,(function(e,n){e&&_()(t,[n,"$regex"],new RegExp(X(e),"i"))})),S()(e,"filters.category.id")&&_()(t,["categories","$elemMatch","id"],S()(e,"filters.category.id")),S()(e,"filters.tag.id")&&_()(t,["tags","$elemMatch","id"],S()(e,"filters.tag.id")),n.find({selector:t}).$.pipe(Object(z.a)((function(t){var n=Array.isArray(t)?t:[];return F()(n,[function(t){return"name"===e.sortBy?t[e.sortBy].toLowerCase():t[e.sortBy]}],[e.sortDirection])})))})))}),[]),s=Object(b.a)(o,2),l=s[0],u=s[1];return r.useEffect((function(){u(a)}),[a,u]),Object(W.a)("Collection Query",{storeDB:t,collection:n,query:a,data:l,updateQuery:u}),{data:l,count:l.length}}("products"),o=a.data,s=Object(N.b)(),l=s.query,u=s.setQuery,d=r.useMemo((function(){return t.filter((function(e){return!e.hide})).map((function(e){var t=S()(Ie,e.key);return Object($.a)(Object($.a)({},e),{},{label:n("products.column.label.".concat(e.key)),onRender:function(n){return t?Object(ie.jsx)(t,{item:n,column:e}):null}})}))}),[t,n]),j=r.useMemo((function(){return F()(o,[l.sortBy],[l.sortDirection])}),[o,l.sortBy,l.sortDirection]),f=r.useCallback((function(e){var t=e.sortBy,n=e.sortDirection;u("sortBy",t),u("sortDirection",n)}),[u]);return Object(W.a)("Table",{data:o}),Object(ie.jsx)(he,{columns:d,data:j,sort:f,sortBy:l.sortBy,sortDirection:l.sortDirection,footer:Object(ie.jsx)(Ee,{count:o.length})})},Te=n(839),Ve=n(833),Ge=function(e){var t=e.ui,n=Object(N.b)(),c=n.query,a=n.setQuery,o=r.useCallback((function(e){a(["search","name"],e)}),[a]),i=r.useMemo((function(){var e=[];return S()(c,"filters.category")&&e.push({label:S()(c,"filters.category.name"),onRemove:function(){a("filters.category",null)}}),S()(c,"filters.tag")&&e.push({label:S()(c,"filters.tag.name"),onRemove:function(){a("filters.tag",null)}}),e}),[c,a]);return Object(ie.jsxs)(ue.a,{style:{flexDirection:"row"},children:[Object(ie.jsx)(Te.a,{label:"Search Products",placeholder:"Search Products",value:S()(c,["search","name"],""),onSearch:o,filters:i}),Object(ie.jsx)(Ve.a,{ui:t})]})},Me=function(e){var t=e.ui,n=t.get$("columns"),r=Object(c.a)(n,t.get("columns"));return u("products"),function(e){var t=Object(i.b)(),n=t.storeDB,r=t.site,c=t.wpCredentials,a=n.collections[e],l=Object(N.b)().query,u=Object(s.p)(),d=Object(O.a)((function(e){return e.pipe(Object(m.a)(a.unsyncedDocuments$),Object(x.a)(function(){var e=Object(f.a)(j.a.mark((function e(t){var n,i,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(b.a)(t,2),i=Object(b.a)(n[0],1),s=i[0],n[1],e.next=3,Object(p.a)({collection:a,replicationIdentifier:"product-replication",pull:{handler:function(e){return Object(f.a)(j.a.mark((function t(){var n,i,l,d,b,O;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),console.log(s),n={"X-WCPOS":"1"},c.wpNonce&&Object.assign(n,{"X-WP-Nonce":c.wpNonce}),c.jwt&&Object.assign(n,{Authorization:"Bearer ".concat(c.jwt)}),i={per_page:10,page:1,order:s.sortDirection,orderby:"name"===s.sortBy?"title":s.sortBy},S()(s,"filters.category.id")&&_()(i,"category",S()(s,"filters.category.id")),S()(s,"filters.tag.id")&&_()(i,"tag",S()(s,"filters.tag.id")),t.next=10,o.a.get("products",{baseURL:r.wcApiUrl,params:i,headers:n}).catch((function(e){var t=e.response;console.log(t),t?(401===t.status&&u.navigate("Modal",{login:!0}),403===t.status&&console.error("invalid nonce")):console.error("CORS error")}));case 10:return l=t.sent,console.log(l),d=(null===l||void 0===l?void 0:l.data)||[],b=d.map(function(){var e=Object(f.a)(j.a.mark((function e(t){var n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.findOne().where("id").eq(t.id).exec();case 2:return(n=e.sent)&&Object.assign(t,{localID:n.localID}),e.abrupt("return",A(a,t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=16,Promise.all(b);case 16:return O=t.sent,t.abrupt("return",{documents:O,hasMoreDocuments:!1});case 18:case"end":return t.stop()}}),t)})))()}}});case 3:e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[l]);Object(h.a)(d)}("products"),Object(ie.jsxs)(M.a.Group,{children:[Object(ie.jsx)(M.a,{children:Object(ie.jsx)(Ge,{ui:t})}),Object(ie.jsx)(M.a,{grow:!0,children:Object(ie.jsx)(Le,{columns:r})})]})}},873:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var r,c,a,o,i,s=n(4),l=n.n(s),u=n(11),d=n(0),j=n(173),b=n(46),f=n(3),O=function(e){var t=e.src,n=e.title,r=e.onError,c=e.onMessage,a=e.onLoad;return d.useEffect((function(){if("function"===typeof c)return window.addEventListener("message",c),function(){window.removeEventListener("message",c)}}),[]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("iframe",{title:n,src:t,onLoad:a,onError:r,width:"100%",height:"100%",allowpaymentrequest:!0})})},h=n(79),m=n(16),x=n(845),p=n(23),y=n(21),v=n(258),g=n(172),w=y.c.View(r||(r=Object(p.a)([""]))),k=Object(y.c)(g.a)(c||(c=Object(p.a)([""]))),S=Object(y.c)(v.a)(a||(a=Object(p.a)([""]))),C=(y.c.View(o||(o=Object(p.a)([""]))),Object(y.c)(v.a)(i||(i=Object(p.a)([""])))),_=function(e){var t=e.items,n=d.useState(null),r=Object(m.a)(n,2),c=r[0],a=r[1];return Object(f.jsx)(w,{children:t.map((function(e,t){var n=e.label,r=e.content;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(k,{onPress:function(){a(t===c?null:t)},children:Object(f.jsx)(S,{children:n})}),Object(f.jsx)(x.a,{open:t===c,children:"string"===typeof r?Object(f.jsx)(C,{children:r}):r})]})}))})},D=n(831),P=function(){var e,t=d.useContext(D.a),n=t.currentOrder,r=(t.currentCustomer,null===n||void 0===n||null===(e=n.metaData)||void 0===e?void 0:e.find((function(e){return"_pos_checkout_url"===e.key})));if("pos-checkout"!==(null===n||void 0===n?void 0:n.status))throw Error("Order does not have the right status");return d.useEffect((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=null===n||void 0===n?void 0:n.syncRestApi({push:{}})).error$.subscribe((function(e){console.log(e)})),t.run(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),Object(f.jsxs)(j.a.Group,{children:[Object(f.jsx)(j.a,{children:Object(f.jsxs)(b.a,{children:["Order Total: ",null===n||void 0===n?void 0:n.total]})}),Object(f.jsx)(j.a,{grow:!0,children:(null===r||void 0===r?void 0:r.value)?Object(f.jsx)(_,{items:[{label:"Stripe",content:Object(f.jsx)(O,{src:"".concat(null===r||void 0===r?void 0:r.value,"&wcpos=1&gateway=stripe")})},{label:"BACS",content:Object(f.jsx)(O,{src:"".concat(null===r||void 0===r?void 0:r.value,"&wcpos=1&gateway=bacs")})},{label:"Cheque",content:Object(f.jsx)(O,{src:"".concat(null===r||void 0===r?void 0:r.value,"&wcpos=1&gateway=cheque")})},{label:"COD",content:Object(f.jsx)(O,{src:"".concat(null===r||void 0===r?void 0:r.value,"&wcpos=1&gateway=cod")})},{label:"PayPal",content:Object(f.jsx)(O,{src:"".concat(null===r||void 0===r?void 0:r.value,"&wcpos=1&gateway=paypal")})}]}):null}),Object(f.jsx)(j.a,{children:Object(f.jsx)(h.a,{title:"Go Back",onPress:function(){n.atomicPatch({status:"pos-open"})}})})]})}},874:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));n(0);var r,c,a=n(328),o=n(23),i=n(21),s=n(75),l=i.c.View(r||(r=Object(o.a)(["\n\theight: 100%;\n\talign-items: center;\n\tjustify-content: center;\n\tbackground-color: ",";\n\twidth: 10px;\n\n\t","}\n"])),(function(e){return e.hovered?"#f5f5f5":"transparent"}),"ios"!==s.a.OS&&"android"!==s.a.OS&&Object(i.b)(c||(c=Object(o.a)(["\n\t\t\tcursor: col-resize;\n\t\t"])))),u=n(74),d=n(3),j=function(e){var t=e.children,n=e.style;return Object(d.jsx)(a.a,{style:[{flexDirection:"row",height:"100%"},n],children:function(e){var n=e.hovered;return Object(d.jsx)(l,{hovered:n,children:t||Object(d.jsx)(u.a,{name:"more-vert"})})}})}},885:function(e,t,n){"use strict";n.r(t);var r,c,a,o=n(0),i=n(93),s=n(883),l=n(831),u=n(1),d=n(16),j=n(821),b=n(826),f=n(42),O=n.n(f),h=n(341),m=n.n(h),x=n(841),p=n(173),y=n(46),v=n(130),g=n(836),w=n(839),k=n(887),S=n(256),C=n.n(S),_=n(235),D=n.n(_),P=n(830),B=n(339),R=n(3),N=function(e){var t=e.item,n=e.column;return Object(R.jsx)(y.a,{children:String(t[n.key])})},A=o.memo((function(e){var t=e.item,n=e.columns,r=e.cells,c=e.setQuery,a=Object(b.a)(t.$);return Object(B.a)("Common Table Row",{forceRender:a,item:t,columns:n,cells:r}),Object(R.jsx)(P.a.Body.Row,{rowData:t,columns:n,children:function(e){var n=e.column,a=e.getCellProps,o=r[n.key]?r[n.key]:N;return Object(R.jsx)(P.a.Body.Row.Cell,Object(u.a)(Object(u.a)({},a()),{},{children:Object(R.jsx)(o,{item:t,column:n,setQuery:c})}))}})})),E=o.memo((function(e){var t=e.collection,n=e.columns,r=e.data$,c=e.setQuery,a=e.sortBy,i=e.sortDirection,s=e.cells,l=Object(k.a)().t,d=Object(b.a)(r,[]),j=o.useCallback((function(e){var t=e.sortBy,n=e.sortDirection;c((function(e){return Object(u.a)(Object(u.a)({},e),{},{sortBy:t,sortDirection:n})}))}),[c]),f=o.useMemo((function(){return C()(t.schema.indexes).includes(a)?d:D()(d,[a],[i])}),[a,i,t.schema.indexes,d]),O=o.useCallback((function(e,t){return{length:100,offset:100*t,index:t}}),[]);return Object(B.a)("Common Table",{collection:t,columns:n,data:d,maybeSortedData:f,setQuery:c,_sortBy:a,_sortDirection:i,cells:s,t:l}),Object(R.jsxs)(P.a,{columns:n,data:f,sort:j,sortBy:a,sortDirection:i,getItemLayout:O,children:[Object(R.jsx)(P.a.Header,{children:Object(R.jsx)(P.a.Header.Row,{children:function(e){var n=e.getHeaderCellProps,r=n().column;return Object(R.jsx)(P.a.Header.Row.Cell,Object(u.a)(Object(u.a)({},n()),{},{children:l("".concat(t.name,".column.label.").concat(r.key))}))}})}),Object(R.jsx)(P.a.Body,{children:function(e){var t=e.item;return Object(R.jsx)(A,{item:t,columns:n,cells:s,setQuery:c})}})]})})),I=n(833),L=n(345),T=function(e){var t=e.item;return Object(R.jsx)(L.a,{src:t.thumbnail,style:{width:100,height:100}})},V=n(4),G=n.n(V),M=n(11),$=n(131),H=function(e){var t=e.item,n=function(){var e=Object(M.a)(G.a.mark((function e(n){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.atomicPatch({name:n});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(R.jsx)($.a,{label:"Name",value:t.name,onChange:n,hideLabel:!0})},q=n(842),F=n(843),U=n(834),Q=function(e){var t=e.item,n=e.column;return Object(R.jsx)(U.a.Currency,{symbol:"$",children:t[n.key]})},z=n(340),W=n(407),X=n.n(W),K=n(21),J=n(23),Y=n(172),Z=n(135),ee=K.c.View(r||(r=Object(J.a)([""]))),te=Object(K.c)(Y.a)(c||(c=Object(J.a)(["\n\tpadding: 5px 10px;\n"]))),ne=Object(K.c)(Z.a)(a||(a=Object(J.a)(["\n\t","\n"])),(function(e){var t=e.hovered,n=e.theme,r=e.type;return t&&"critical"===r|"warning"===r&&"\n    color: ".concat(n.TEXT_COLOR_INVERSE,";\n  ")})),re=function(e){var t=e.children,n=e.label,r=void 0===n?"":n,c=e.onPress,a=e.action,i=e.type,s=e.style,l=Object(K.d)(),u=o.useCallback((function(){"function"===typeof a&&a(),"function"===typeof c&&c(r)}),[a,r,c]),d=o.useCallback((function(e){var t=e.hovered,n=l.MENU_ITEM_HOVER_BACKGROUND_COLOR;if(i){var r="color_".concat(i).toUpperCase();n=l[r]}return[{backgroundColor:t?n:"transparent"},s]}),[s,l,i]);return Object(R.jsx)(te,{onPress:u,style:d,children:function(e){var n=e.hovered;return Object(R.jsx)(ne,{type:i,hovered:n,children:t||r})}})},ce=function(e){var t=e.items,n=e.onSelect,r=void 0===n?function(){}:n;return Object(R.jsx)(ee,{children:t.map((function(e,t){var n="string"===typeof e?{label:e}:e;return Object(R.jsx)(re,Object(u.a)(Object(u.a)({},n),{},{onPress:function(){r(n)}}),X()("".concat(n.label,"_").concat(t)))}))})};ce.Item=re;var ae,oe,ie,se,le,ue=n(840),de=function(e){var t=e.items,n=e.onSelect,r=e.activator,c=o.useState(!1),a=Object(d.a)(c,2),i=a[0],s=a[1],l=o.useCallback((function(){return s(!0)}),[]),u=o.useCallback((function(){return s(!1)}),[]),j=o.useMemo((function(){return"string"===typeof r?Object(R.jsxs)(y.a,{onPress:l,style:{alignItems:"center"},children:[r,Object(R.jsx)(ue.a,{direction:i?"up":"down"})]}):o.isValidElement(r)&&"Icon"===O()(r,"type.name")?o.cloneElement(r,{onPress:l}):Object(R.jsxs)(Y.a,{onPress:l,style:{alignItems:"center"},children:[r,Object(R.jsx)(ue.a,{direction:i?"up":"down"})]})}),[r,i,l]);return Object(R.jsx)(z.a,{activator:j,onRequestClose:u,open:i,hideBackdrop:!0,placement:"bottom-end",popoverStyle:{paddingLeft:0,paddingRight:0},children:Object(R.jsx)(ce,{items:t,onSelect:n})})},je=n(74),be=n(102),fe=n(835),Oe=n(837),he=n(120),me=n(343),xe=n(448),pe=function(e){var t,n=e.label,r=e.choices,c=e.selected,a=void 0===c?null:c,i=e.onChange,s=e.placeholder,l=e.helpText,u=e.error,j=void 0!==u&&u,b=e.disabled,f=void 0!==b&&b,O=o.useState(!1),h=Object(d.a)(O,2),m=h[0],x=h[1],p=o.useCallback((function(){return x(!0)}),[]),y=o.useCallback((function(){return x(!1)}),[]),v=Object(me.b)(a,i),g=Object(d.a)(v,2),w=g[0],k=g[1],S=o.useMemo((function(){return r.map((function(e){return"string"===typeof e?{label:e,value:e}:e}))}),[r]),C=o.useMemo((function(){return S.find((function(e){return e.value===w}))}),[S,w]),_=o.useMemo((function(){return S.map((function(e){return Object(R.jsx)(z.a.Item,{label:e.label,disabled:e.disabled,onSelect:function(){return t=e.value,k(t),void x(!1);var t}},e.value)}))}),[S,k]);return Object(R.jsx)(xe.a,{label:n,disabled:f,helpText:l,error:j,onLabelClick:p,children:Object(R.jsx)(z.a,{open:m,activator:Object(R.jsx)(xe.b,{value:null!==(t=null===C||void 0===C?void 0:C.label)&&void 0!==t?t:"",placeholder:s,disabled:f,focused:m,onPress:p,rightAccessory:Object(R.jsx)(ue.a,{direction:m?"up":"down"}),style:{minWidth:"100px"}}),onRequestClose:y,popoverStyle:{maxHeight:300},placement:"bottom",hideBackdrop:!0,matchWidth:!0,children:Object(R.jsx)(he.a,{children:_})})})},ye=n(838),ve=function(e){var t=e.product,n=e.onClose,r=o.useState(0),c=Object(d.a)(r,2),a=c[0],i=c[1],s=0===a?Object(R.jsxs)(be.a.Section,{children:[Object(R.jsx)($.a,{label:"Name",value:t.name}),Object(R.jsx)(pe,{label:"Status",choices:["draft","pending","private","publish"],selected:t.status}),Object(R.jsx)($.a,{label:"Price",value:t.price}),Object(R.jsx)($.a,{label:"Regular Price",value:t.regularPrice}),Object(R.jsx)($.a,{label:"Sale Price",value:t.salePrice}),Object(R.jsx)(ye.a,{label:"On Sale",checked:t.onSale})]}):Object(R.jsx)(be.a.Section,{children:Object(R.jsx)(Oe.a,{data:t.toJSON()})});return Object(R.jsx)(be.a,{title:t.name,open:!0,onClose:n,primaryAction:{label:"Save"},children:Object(R.jsx)(fe.a,{tabs:["Product","JSON"],selected:a,onSelect:i,children:s})})},ge=function(e){var t=e.product,n=e.onClose;return Object(R.jsx)(be.a,{title:"Confirm",open:!0,onClose:n,primaryAction:{label:"Delete",action:function(){console.log("delete locally and on server")},type:"critical"},secondaryActions:[{label:"Delete locally",action:t.remove},{label:"Cancel",action:n}],children:Object(R.jsx)(be.a.Section,{children:Object(R.jsxs)(y.a,{children:["You are about to delete ",t.name]})})})},we=function(e){var t=e.item,n=o.useState(!1),r=Object(d.a)(n,2),c=r[0],a=r[1],i=o.useState(!1),s=Object(d.a)(i,2),l=s[0],u=s[1];return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(de,{items:[{label:"Show",action:function(){return a(!0)}},{label:"Sync",action:function(){t.syncRestApi({push:{}}).run(!1)}},{label:"Delete",action:function(){return u(!0)},type:"critical"}],activator:Object(R.jsx)(je.a,{name:"more"})}),l&&Object(R.jsx)(ge,{product:t,onClose:function(){return u(!1)}}),c&&Object(R.jsx)(ve,{product:t,onClose:function(){return a(!1)}})]})},ke=function(e){var t=e.item,n=e.column;return t[n.key]?Object(R.jsx)(U.a.Date,{value:t[n.key]}):null},Se={image:T,name:H,categories:q.a,tags:F.a,regularPrice:Q,salePrice:Q,actions:we,dateCreated:ke},Ce=K.c.View(ae||(ae=Object(J.a)(["\n\theight: 100%;\n\tflex-direction: row;\n\tflex: 1;\n\tpadding: ",";\n"])),(function(e){var t=e.theme;return"".concat(t.PAGE_MAIN_PADDING_Y," ").concat(t.PAGE_MAIN_PADDING_X)})),_e=function(){var e=Object(v.b)().storeDB,t=Object(g.b)(),n=Object(j.a)(t.products),r=Object(b.a)((function(){return n.get$("columns")}),n.get("columns")),c=Object(d.a)(r,1)[0],a=Object(b.a)(null===e||void 0===e?void 0:e.collections.products.totalRecords$),i=o.useState(!1),s=Object(d.a)(i,2),l=(s[0],s[1],o.useState(0)),f=Object(d.a)(l,2),h=f[0],k=(f[1],Object(x.a)("products",{search:"",sortBy:"name",sortDirection:"asc",filters:{category:null,tag:null}})),S=k.data$,C=k.query,_=k.setQuery,D=o.useCallback((function(e){_((function(t){return Object(u.a)(Object(u.a)({},t),{},{search:e})}))}),[_]);if(!e)throw Error("something went wrong");var P=o.useMemo((function(){var e=[];return O()(C,"filters.category")&&e.push({label:O()(C,"filters.category.name"),onRemove:function(){_((function(e){return m()(Object(u.a)({},e),"filters.category",null)}))}}),O()(C,"filters.tag")&&e.push({label:O()(C,"filters.tag.name"),onRemove:function(){_((function(e){return m()(Object(u.a)({},e),"filters.tag",null)}))}}),e}),[C,_]);return Object(R.jsx)(Ce,{children:Object(R.jsxs)(p.a.Group,{children:[Object(R.jsx)(p.a,{children:Object(R.jsx)(w.a,{label:"Search Products",placeholder:"Search Products",value:C.search,onSearch:D,actions:[Object(R.jsx)(I.a,{ui:n})],filters:P})}),Object(R.jsx)(p.a,{grow:!0,children:Object(R.jsx)(E,{collection:e.collections.products,columns:c,data$:S,setQuery:_,sortBy:C.sortBy,sortDirection:C.sortDirection,cells:Se})}),Object(R.jsx)(p.a,{style:{alignItems:"flex-end"},children:Object(R.jsx)(R.Fragment,{children:Object(R.jsxs)(y.a,{children:["Showing ",h," of ",a]})})})]})})},De=n(180),Pe=function(e){var t=e.order,n=e.onClose,r=o.useState(0),c=Object(d.a)(r,2),a=c[0],i=c[1],s=0===a?Object(R.jsx)(be.a.Section,{children:Object(R.jsx)($.a,{label:"Order Number",value:t.number})}):Object(R.jsx)(be.a.Section,{children:Object(R.jsx)(Oe.a,{data:t.toJSON()})});return Object(R.jsx)(be.a,{open:!0,title:"Order",onClose:n,primaryAction:{label:"Save "},children:Object(R.jsx)(fe.a,{tabs:["Order","JSON"],selected:a,onSelect:i,children:s})})},Be=function(e){var t=e.item,n=o.useState(!1),r=Object(d.a)(n,2),c=r[0],a=r[1],s=Object(i.p)(),l=o.useCallback((function(){t.atomicPatch({status:"pos-open"}),s.navigate("POS",{currentOrder:t})}),[s,t]);return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(de,{items:[{label:"Show",action:function(){return a(!0)}},{label:"Open in Cart",action:l},{label:"Sync",action:function(){console.log("sync")}},{label:"Delete",action:t.remove}],activator:Object(R.jsx)(je.a,{name:"more"})}),c&&Object(R.jsx)(Pe,{order:t,onClose:function(){return a(!1)}})]})},Re=function(e){var t=e.item[e.column.key];return t?Object(R.jsx)(U.a.Address,{address:t,showName:!1}):Object(R.jsx)(y.a.Skeleton,{})},Ne=function(e){var t=e.item;return t.customer_id?Object(R.jsx)(y.a,{children:t.customer_id}):Object(R.jsx)(y.a.Skeleton,{})},Ae=n(348),Ee={actions:Be,billing:Re,shipping:Re,customer:Ne,customerNote:function(e){var t=e.item;return t.note?Object(R.jsx)(Ae.a,{content:t.note,children:Object(R.jsx)(je.a,{name:"note"})}):null},status:function(e){var t=e.item;return t.status?Object(R.jsx)(Ae.a,{content:t.status,children:Object(R.jsx)(je.a,{name:t.status})}):Object(R.jsx)(je.a.Skeleton,{})}},Ie=K.c.View(oe||(oe=Object(J.a)(["\n\theight: 100%;\n\tflex-direction: row;\n\tflex: 1;\n\tpadding: ",";\n"])),(function(e){var t=e.theme;return"".concat(t.PAGE_MAIN_PADDING_Y," ").concat(t.PAGE_MAIN_PADDING_X)})),Le=function(){var e=Object(v.b)().storeDB,t=Object(g.b)(),n=Object(j.a)(t.orders),r=Object(b.a)((function(){return n.get$("columns")}),n.get("columns")),c=Object(d.a)(r,1)[0],a=Object(x.a)("orders",{search:"",sortBy:"dateCreatedGmt",sortDirection:"desc"}),i=a.data$,s=a.query,l=a.setQuery,f=o.useCallback((function(e){l((function(t){return Object(u.a)(Object(u.a)({},t),{},{search:e})}))}),[l]);if(!e)throw Error("something went wrong");return Object(R.jsx)(Ie,{children:Object(R.jsx)(o.Suspense,{fallback:Object(R.jsx)(De.a,{children:"loading orders..."}),children:Object(R.jsxs)(p.a.Group,{children:[Object(R.jsx)(p.a,{children:Object(R.jsx)(w.a,{label:"Search Orders",placeholder:"Search Orders",value:s.search,onSearch:f,actions:[Object(R.jsx)(I.a,{ui:n})]})}),Object(R.jsx)(p.a,{grow:!0,children:Object(R.jsx)(E,{collection:e.collections.orders,columns:c,data$:i,setQuery:l,sortBy:s.sortBy,sortDirection:s.sortDirection,cells:Ee})}),Object(R.jsx)(p.a,{})]})})})},Te=function(e){var t=e.onClose,n=e.customer,r=Object(v.b)().storeDB,c=o.useState(null===n||void 0===n?void 0:n.firstName),a=Object(d.a)(c,2),i=a[0],s=a[1],l=o.useState(null===n||void 0===n?void 0:n.email),u=Object(d.a)(l,2),j=u[0],b=u[1],f=o.useState(0),O=Object(d.a)(f,2),h=O[0],m=O[1],x=n?"Edit Customer":"Add Customer",p=function(){var e=Object(M.a)(G.a.mark((function e(){var t,c,a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n){e.next=8;break}return c=null===r||void 0===r?void 0:r.collections.customers,e.next=5,null===c||void 0===c?void 0:c.insert({firstName:i,email:j});case 5:e.sent,e.next=9;break;case 8:t.atomicPatch({firstName:i,email:j});case 9:t&&((a=t.syncRestApi({push:{}})).error$.subscribe((function(e){401===e.code&&console.log("need to login")})),a.run(!1));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=0===h?Object(R.jsxs)(be.a.Section,{children:[Object(R.jsx)($.a,{label:"First Name",value:i,onChange:s}),Object(R.jsx)($.a,{label:"Email",value:j,onChange:b})]}):Object(R.jsx)(be.a.Section,{children:n?Object(R.jsx)(Oe.a,{data:n.toJSON()}):null});return Object(R.jsx)(be.a,{title:x,open:!0,onClose:t,primaryAction:{label:"Save",action:p},children:Object(R.jsx)(fe.a,{tabs:["Form","JSON"],selected:h,onSelect:m,children:y})})},Ve=function(e){var t=e.item,n=e.column;return Object(R.jsx)(U.a.Address,{address:t[n.key],showName:!1})},Ge=function(e){var t=e.item[e.column.key];return void 0!==t?Object(R.jsx)(y.a,{children:t}):Object(R.jsx)(y.a.Skeleton,{})},Me={avatarUrl:function(e){var t=e.item;return Object(R.jsx)(L.a,{src:t.avatarUrl,style:{width:100,height:100}})},firstName:Ge,lastName:Ge,email:function(e){var t=e.item;return void 0!==t.email?Object(R.jsx)(y.a,{children:t.email}):Object(R.jsx)(y.a.Skeleton,{})},billing:Ve,shipping:Ve,actions:function(e){var t=e.item,n=o.useState(!1),r=Object(d.a)(n,2),c=r[0],a=r[1];return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(de,{activator:Object(R.jsx)(je.a,{name:"more"}),items:[{label:"Edit",action:function(){return a(!0)}},{label:"Sync",action:function(){t.syncRestApi({push:{}}).run(!1)}},{label:"Delete",action:function(){t.remove()}}]}),c&&Object(R.jsx)(Te,{onClose:function(){return a(!1)},customer:t})]})}},$e=K.c.View(ie||(ie=Object(J.a)(["\n\theight: 100%;\n\tflex-direction: row;\n\tflex: 1;\n\tpadding: ",";\n"])),(function(e){var t=e.theme;return"".concat(t.PAGE_MAIN_PADDING_Y," ").concat(t.PAGE_MAIN_PADDING_X)})),He=function(e){var t=e.navigation,n=Object(v.b)().storeDB,r=Object(g.b)(),c=Object(j.a)(r.customers),a=Object(b.a)((function(){return c.get$("columns")}),c.get("columns")),i=Object(d.a)(a,1)[0],s=Object(x.a)("customers",{search:"",sortBy:"lastName",sortDirection:"asc"}),l=s.data$,f=s.query,O=s.setQuery,h=o.useCallback((function(e){O((function(t){return Object(u.a)(Object(u.a)({},t),{},{search:e})}))}),[O]);if(!n)throw Error("something went wrong");return Object(B.a)("Customer Page",{data$:l,query:f,ui:c,columns:i,storeDB:n,navigation:t}),Object(R.jsx)($e,{children:Object(R.jsx)(o.Suspense,{fallback:Object(R.jsx)(De.a,{children:"loading customers..."}),children:Object(R.jsxs)(p.a.Group,{children:[Object(R.jsx)(p.a,{children:Object(R.jsx)(w.a,{label:"Search Customers",placeholder:"Search Customers",value:f.search,onSearch:h,actions:[{name:"add",action:function(){console.log("show modal")}},Object(R.jsx)(I.a,{ui:c})]})}),Object(R.jsx)(p.a,{grow:!0,children:Object(R.jsx)(E,{collection:n.collections.customers,columns:i,data$:l,setQuery:O,sortBy:f.sortBy,sortDirection:f.sortDirection,cells:Me})}),Object(R.jsx)(p.a,{})]})})})},qe=n(20),Fe=n(79),Ue=function(){var e=o.useState([]),t=Object(d.a)(e,2),n=t[0];t[1];o.useEffect((function(){!function(){var e=Object(M.a)(G.a.mark((function e(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);var r=function(){var e=Object(M.a)(G.a.mark((function e(t){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(M.a)(G.a.mark((function e(t){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,userDB.collections[t].find().exec();case 2:n=e.sent,console.log(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=[{key:"name",label:"Name"},{key:"count",label:"Count"},{key:"actions",label:""}];return Object(R.jsxs)(P.a,{columns:a,data:n,children:[Object(R.jsx)(P.a.Header,{children:Object(R.jsx)(P.a.Header.Row,{children:a.map((function(e){var t=e.key,n=e.label;return Object(R.jsx)(P.a.Header.Row.Cell,{dataKey:t,sort:function(){console.log("sort")},sortBy:"name",sortDirection:"asc",children:n},t)}))})}),Object(R.jsx)(P.a.Body,{children:function(e){var t=e.item;return Object(R.jsx)(P.a.Body.Row,{rowData:t,columns:a,children:function(e){var n=e.column,a=e.getCellProps;return"actions"===n.key?Object(R.jsxs)(P.a.Body.Row.Cell,{children:[Object(R.jsx)(Fe.a,{title:"Delete All",onPress:function(){r(t.name)}}),Object(R.jsx)(Fe.a,{title:"Info",onPress:function(){c(t.name)}})]}):Object(R.jsx)(P.a.Body.Row.Cell,Object(u.a)({},a()))}})}})]})},Qe=function(e){var t=e.item,n=e.columns,r=Object(b.a)(t.totalRecords$);return Object(R.jsx)(P.a.Body.Row,{rowData:t,columns:n,children:function(e){switch(e.column.key){case"name":return Object(R.jsx)(P.a.Body.Row.Cell,{cellData:t.name});case"count":return Object(R.jsx)(P.a.Body.Row.Cell,{cellData:r});case"actions":return Object(R.jsx)(P.a.Body.Row.Cell,{children:Object(R.jsx)(Fe.a,{title:"Delete All",onPress:function(){t.remove()}})});default:return null}}})},ze=function(){var e=Object(v.b)().storeDB,t=[{key:"name",label:"Name"},{key:"count",label:"Count"},{key:"actions",label:""}];return Object(R.jsxs)(P.a,{columns:t,data:Object.values(e.collections),children:[Object(R.jsx)(P.a.Header,{children:Object(R.jsx)(P.a.Header.Row,{children:t.map((function(e){var t=e.key,n=e.label;return Object(R.jsx)(P.a.Header.Row.Cell,{dataKey:t,sort:function(){console.log("sort")},sortBy:"name",sortDirection:"asc",children:n},t)}))})}),Object(R.jsx)(P.a.Body,{children:function(e){var n=e.item;return Object(R.jsx)(Qe,{item:n,columns:t})}})]})},We=function(){return Object(R.jsxs)(qe.a,{style:{flexDirection:"row"},children:[Object(R.jsxs)(p.a.Group,{style:{width:"50%"},children:[Object(R.jsx)(p.a,{children:"Authentication Database"}),Object(R.jsx)(p.a,{children:Object(R.jsx)(Ue,{})})]}),Object(R.jsxs)(p.a.Group,{style:{width:"50%"},children:[Object(R.jsx)(p.a,{children:"Store Database"}),Object(R.jsx)(p.a,{children:Object(R.jsx)(ze,{})})]})]})},Xe=n(451),Ke=n(888),Je=n(816),Ye=function(e){var t=e.onClose,n=Object(v.b)().storeDB,r=o.useState("GB"),c=Object(d.a)(r,2),a=c[0],i=(c[1],Object(Ke.a)((function(e){return e.pipe(Object(Je.a)((function(e){return(null===n||void 0===n?void 0:n.collections.taxes.find().where("country").eq(a)).$})))}),[a])),s=Object(b.a)(i,[]);return console.log(s),Object(R.jsx)(be.a,{sectioned:!0,title:"Settings",open:!0,onClose:t,primaryAction:{label:"Save",action:t},children:Object(R.jsxs)(qe.a,{style:{zIndex:999999},children:[Object(R.jsx)(y.a,{children:"Store location: "}),Object(R.jsx)(pe,{label:"Country",placeholder:"GB",choices:[{label:"GB",value:"GB"},{label:"US",value:"US"}]}),Object(R.jsx)(P.a,{columns:[{key:"country",label:"Country"},{key:"name",label:"Name"},{key:"rate",label:"Rate"}],data:s})]})})},Ze=K.c.View(se||(se=Object(J.a)(["\n\tflex-direction: row;\n\talign-items: center;\n"]))),et=function(){var e=Object(v.b)(),t=e.site,n=e.wpCredentials,r=e.store,c=o.useState(!1),a=Object(d.a)(c,2),s=a[0],l=a[1],u=Object(i.p)();return Object(R.jsxs)(R.Fragment,{children:[Object(R.jsx)(de,{activator:Object(R.jsxs)(Ze,{children:[Object(R.jsx)(y.a,{type:"inverse",children:"Test"}),Object(R.jsx)(Xe.a,{src:"https://secure.gravatar.com/avatar/a2a53c07cdd4a8aa81c043baafd0915f",size:"small"})]}),items:[{label:"Logout",action:function(){t.collection.upsertLocal("current",{id:null}),n.collection.upsertLocal("current",{id:null}),r.collection.upsertLocal("current",{id:null}),u.goBack()},type:"warning"},{label:"Settings",action:function(){return l(!0)}},{label:"Modal",action:function(){return u.dispatch(i.b.navigate({name:"Modal",params:{foo:"bar"}}))}}]}),s&&Object(R.jsx)(Ye,{onClose:function(){return l(!1)}})]})},tt=function(){var e=Object(v.b)().online;return Object(R.jsx)(je.a,{name:"circle",size:"x-small",color:e?"green":"red"})},nt=function(){return Object(R.jsx)(R.Fragment,{children:Object(R.jsx)(je.a,{name:"notifications",onPress:function(){}})})},rt=K.c.View(le||(le=Object(J.a)(["\n\tflex-direction: row;\n\talign-items: center;\n"]))),ct=function(){return Object(R.jsxs)(rt,{children:[Object(R.jsx)(tt,{}),Object(R.jsx)(nt,{}),Object(R.jsx)(et,{})]})},at=Object(s.a)();t.default=function(e){var t=e.navigation,n=(e.route,o.useCallback((function(){t.dispatch(i.c.openDrawer())}),[])),r=o.useMemo((function(){return{headerStyle:{backgroundColor:"#f4511e",height:"40px"},headerTintColor:"#fff",headerTitleStyle:{fontWeight:"bold",textAlign:"center",margin:0},headerBackgroundContainerStyle:{},headerLeftContainerStyle:{padding:"5px",flexGrow:1,flexShrink:1,flexBasis:"20%"},headerRightContainerStyle:{padding:"5px",flexGrow:1,flexShrink:1,flexBasis:"20%"},headerTitleContainerStyle:{padding:"5px",flexGrow:1,flexShrink:1,flexBasis:"100%"},headerLeft:function(){return Object(R.jsx)(Fe.a,{onPress:n,title:"Menu"})},headerRight:ct}}),[n]);return Object(R.jsx)(g.a,{children:Object(R.jsxs)(at.Navigator,{screenOptions:r,children:[Object(R.jsx)(at.Screen,{name:"POS",component:l.b}),Object(R.jsx)(at.Screen,{name:"Products",component:_e}),Object(R.jsx)(at.Screen,{name:"Orders",component:Le}),Object(R.jsx)(at.Screen,{name:"Customers",component:He}),Object(R.jsx)(at.Screen,{name:"Support",component:We})]})})}}}]);
//# sourceMappingURL=2.bb54b52a.chunk.js.map